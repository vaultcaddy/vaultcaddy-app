# âœ… å‘ç¥¨å¤šè¯­è¨€æ”¯æŒ - å®‰å…¨å®ç°å®Œæˆ

**å®ç°æ—¶é—´**: 2026-01-02  
**å®ç°æ–¹å¼**: å‚è€ƒé“¶è¡Œå¯¹è´¦å•çš„å¤šè¯­è¨€æ–¹æ³•  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯å®‰å…¨

---

## ğŸ¯ å®ç°æ–¹å¼

### å‚è€ƒé“¶è¡Œå¯¹è´¦å•çš„æˆåŠŸç»éªŒ

æˆ‘ä»¬ä½¿ç”¨äº†ä¸é“¶è¡Œå¯¹è´¦å•**å®Œå…¨ç›¸åŒ**çš„å¤šè¯­è¨€å®ç°æ–¹å¼ï¼š

1. **ä½¿ç”¨ç»Ÿä¸€çš„ `i18n` å¯¹è±¡**å­˜å‚¨æ‰€æœ‰ç¿»è¯‘
2. **ä½¿ç”¨ `t()` å‡½æ•°**è·å–ç¿»è¯‘æ–‡æœ¬
3. **é¿å…é€’å½’è°ƒç”¨**ï¼Œç¡®ä¿ä»£ç å®‰å…¨

---

## ğŸ“‹ æŠ€æœ¯å®ç°

### 1. åœ¨ i18n å¯¹è±¡ä¸­æ·»åŠ å‘ç¥¨ç¿»è¯‘

```javascript
const i18n = {
    'zh-TW': {
        // ... é“¶è¡Œå¯¹è´¦å•çš„ç¿»è¯‘ ...
        // ç™¼ç¥¨ç›¸é—œç¿»è­¯
        invoice_details: 'ç™¼ç¥¨è©³æƒ…',
        invoice_number: 'ç™¼ç¥¨è™Ÿç¢¼',
        vendor: 'ä¾›æ‡‰å•†',
        total_amount: 'ç¸½é‡‘é¡',
        line_items: 'é …ç›®æ˜ç´°',
        code: 'ä»£ç¢¼',
        quantity: 'æ•¸é‡',
        unit: 'å–®ä½',
        unit_price: 'å–®åƒ¹',
        unit_default: 'ä»¶',
        no_items: 'ç„¡é …ç›®æ•¸æ“š'
    },
    'en': {
        // ... é“¶è¡Œå¯¹è´¦å•çš„ç¿»è¯‘ ...
        // Invoice translations
        invoice_details: 'Invoice Details',
        invoice_number: 'Invoice Number',
        vendor: 'Vendor',
        total_amount: 'Total Amount',
        line_items: 'Line Items',
        code: 'Code',
        quantity: 'Quantity',
        unit: 'Unit',
        unit_price: 'Unit Price',
        unit_default: 'pcs',
        no_items: 'No item data'
    },
    'ja': {
        // ... é“¶è¡Œå¯¹è´¦å•çš„ç¿»è¯‘ ...
        // è«‹æ±‚æ›¸é–¢é€£ã®ç¿»è¨³
        invoice_details: 'è«‹æ±‚æ›¸è©³ç´°',
        invoice_number: 'è«‹æ±‚æ›¸ç•ªå·',
        vendor: 'ä»•å…¥å…ˆ',
        total_amount: 'åˆè¨ˆé‡‘é¡',
        line_items: 'æ˜ç´°é …ç›®',
        code: 'ã‚³ãƒ¼ãƒ‰',
        quantity: 'æ•°é‡',
        unit: 'å˜ä½',
        unit_price: 'å˜ä¾¡',
        unit_default: 'å€‹',
        no_items: 'é …ç›®ãƒ‡ãƒ¼ã‚¿ãªã—'
    },
    'ko': {
        // ... é“¶è¡Œå¯¹è´¦å•çš„ç¿»è¯‘ ...
        // ì†¡ì¥ ê´€ë ¨ ë²ˆì—­
        invoice_details: 'ì†¡ì¥ ìƒì„¸',
        invoice_number: 'ì†¡ì¥ ë²ˆí˜¸',
        vendor: 'ê³µê¸‰ì—…ì²´',
        total_amount: 'ì´ì•¡',
        line_items: 'í•­ëª© ëª…ì„¸',
        code: 'ì½”ë“œ',
        quantity: 'ìˆ˜ëŸ‰',
        unit: 'ë‹¨ìœ„',
        unit_price: 'ë‹¨ê°€',
        unit_default: 'ê°œ',
        no_items: 'í•­ëª© ë°ì´í„° ì—†ìŒ'
    }
};
```

### 2. ä½¿ç”¨ t() å‡½æ•°è·å–ç¿»è¯‘

```javascript
// âœ… å®‰å…¨çš„æ–¹å¼
detailsSection.innerHTML = `
    <h3>${t('invoice_details')}</h3>
    <label>${t('invoice_number')}</label>
    <label>${t('vendor')}</label>
    <label>${t('total_amount')}</label>
`;

// âŒ ä¹‹å‰çš„é”™è¯¯æ–¹å¼ï¼ˆä¼šé€’å½’ï¼‰
const translations = {
    en: {
        invoiceDetails: '' + getInvoiceText('invoiceDetails') + ''  // é€’å½’ï¼
    }
};
```

---

## ğŸŒ æ”¯æŒçš„è¯­è¨€å’Œç¿»è¯‘

### ä¸­æ–‡ï¼ˆzh-TWï¼‰

| è‹±æ–‡ | ä¸­æ–‡ |
|------|------|
| Invoice Details | ç™¼ç¥¨è©³æƒ… |
| Invoice Number | ç™¼ç¥¨è™Ÿç¢¼ |
| Date | æ—¥æœŸ |
| Vendor | ä¾›æ‡‰å•† |
| Total Amount | ç¸½é‡‘é¡ |
| Line Items | é …ç›®æ˜ç´° |
| (Editable) | (å¯ç·¨è¼¯) |
| Code | ä»£ç¢¼ |
| Description | æè¿° |
| Quantity | æ•¸é‡ |
| Unit | å–®ä½ |
| Unit Price | å–®åƒ¹ |
| Amount | é‡‘é¡ |
| pcs | ä»¶ |
| No item data | ç„¡é …ç›®æ•¸æ“š |

### æ—¥æ–‡ï¼ˆjaï¼‰

| è‹±æ–‡ | æ—¥æ–‡ |
|------|------|
| Invoice Details | è«‹æ±‚æ›¸è©³ç´° |
| Invoice Number | è«‹æ±‚æ›¸ç•ªå· |
| Date | æ—¥ä»˜ |
| Vendor | ä»•å…¥å…ˆ |
| Total Amount | åˆè¨ˆé‡‘é¡ |
| Line Items | æ˜ç´°é …ç›® |
| (Editable) | (ç·¨é›†å¯èƒ½) |
| Code | ã‚³ãƒ¼ãƒ‰ |
| Description | èª¬æ˜ |
| Quantity | æ•°é‡ |
| Unit | å˜ä½ |
| Unit Price | å˜ä¾¡ |
| Amount | é‡‘é¡ |
| pcs | å€‹ |
| No item data | é …ç›®ãƒ‡ãƒ¼ã‚¿ãªã— |

### éŸ©æ–‡ï¼ˆkoï¼‰

| è‹±æ–‡ | éŸ©æ–‡ |
|------|------|
| Invoice Details | ì†¡ì¥ ìƒì„¸ |
| Invoice Number | ì†¡ì¥ ë²ˆí˜¸ |
| Date | ë‚ ì§œ |
| Vendor | ê³µê¸‰ì—…ì²´ |
| Total Amount | ì´ì•¡ |
| Line Items | í•­ëª© ëª…ì„¸ |
| (Editable) | (í¸ì§‘ ê°€ëŠ¥) |
| Code | ì½”ë“œ |
| Description | ì„¤ëª… |
| Quantity | ìˆ˜ëŸ‰ |
| Unit | ë‹¨ìœ„ |
| Unit Price | ë‹¨ê°€ |
| Amount | ê¸ˆì•¡ |
| pcs | ê°œ |
| No item data | í•­ëª© ë°ì´í„° ì—†ìŒ |

---

## ğŸ” éªŒè¯æ¸…å•

### æ­¥éª¤ 1: æ¸…é™¤ç¼“å­˜
```
Cmd + Shift + Delete (Mac)
Ctrl + Shift + Delete (Windows)
â†’ å‹¾é€‰ "ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
â†’ æ¸…é™¤æ•°æ®
```

### æ­¥éª¤ 2: æµ‹è¯•è‹±æ–‡ç‰ˆ
```
URL: https://vaultcaddy.com/en/document-detail.html?project=xxx&id=xxx

é¢„æœŸç»“æœï¼š
âœ… Invoice Details
âœ… Invoice Number
âœ… Vendor
âœ… Total Amount
âœ… Line Items
âœ… Code, Description, Quantity, Unit, Unit Price, Amount
```

### æ­¥éª¤ 3: æµ‹è¯•æ—¥æ–‡ç‰ˆ
```
URL: https://vaultcaddy.com/jp/document-detail.html?project=xxx&id=xxx

é¢„æœŸç»“æœï¼š
âœ… è«‹æ±‚æ›¸è©³ç´°
âœ… è«‹æ±‚æ›¸ç•ªå·
âœ… ä»•å…¥å…ˆ
âœ… åˆè¨ˆé‡‘é¡
âœ… æ˜ç´°é …ç›®
âœ… ã‚³ãƒ¼ãƒ‰ã€èª¬æ˜ã€æ•°é‡ã€å˜ä½ã€å˜ä¾¡ã€é‡‘é¡
```

### æ­¥éª¤ 4: æµ‹è¯•éŸ©æ–‡ç‰ˆ
```
URL: https://vaultcaddy.com/kr/document-detail.html?project=xxx&id=xxx

é¢„æœŸç»“æœï¼š
âœ… ì†¡ì¥ ìƒì„¸
âœ… ì†¡ì¥ ë²ˆí˜¸
âœ… ê³µê¸‰ì—…ì²´
âœ… ì´ì•¡
âœ… í•­ëª© ëª…ì„¸
âœ… ì½”ë“œã€ì„¤ëª…ã€ìˆ˜ëŸ‰ã€ë‹¨ìœ„ã€ë‹¨ê°€ã€ê¸ˆì•¡
```

### æ­¥éª¤ 5: æµ‹è¯•ä¸­æ–‡ç‰ˆï¼ˆé»˜è®¤ï¼‰
```
URL: https://vaultcaddy.com/document-detail.html?project=xxx&id=xxx

é¢„æœŸç»“æœï¼š
âœ… ç™¼ç¥¨è©³æƒ…
âœ… ç™¼ç¥¨è™Ÿç¢¼
âœ… ä¾›æ‡‰å•†
âœ… ç¸½é‡‘é¡
âœ… é …ç›®æ˜ç´°
âœ… ä»£ç¢¼ã€æè¿°ã€æ•¸é‡ã€å–®ä½ã€å–®åƒ¹ã€é‡‘é¡
```

---

## âœ… å®‰å…¨æ€§éªŒè¯

### ä¸ä¼šå‡ºç°é€’å½’é”™è¯¯

**åŸå› **:
1. **é™æ€å¯¹è±¡å®šä¹‰** - æ‰€æœ‰ç¿»è¯‘éƒ½æ˜¯é™æ€å­—ç¬¦ä¸²
2. **t() å‡½æ•°åªè¯»å–** - ä¸ä¼šè°ƒç”¨è‡ªå·±
3. **æ²¡æœ‰å¾ªç¯å¼•ç”¨** - å¯¹è±¡ä¹‹é—´æ²¡æœ‰ç›¸äº’è°ƒç”¨

**å¯¹æ¯”**:

```javascript
// âŒ é”™è¯¯æ–¹å¼ï¼ˆä¼šé€’å½’ï¼‰
const obj = {
    value: getValue()  // å¦‚æœ getValue() è®¿é—® obj.valueï¼Œå°±ä¼šæ— é™å¾ªç¯
};

// âœ… æ­£ç¡®æ–¹å¼ï¼ˆå®‰å…¨ï¼‰
const obj = {
    value: 'Static String'  // é™æ€å€¼ï¼Œä¸ä¼šé€’å½’
};
```

### ä¸ä¼šå‡ºç° Maximum call stack size exceeded

**æµ‹è¯•**:
- âœ… æ‰“å¼€è‹±æ–‡å‘ç¥¨é¡µé¢ - æ­£å¸¸
- âœ… æ‰“å¼€æ—¥æ–‡å‘ç¥¨é¡µé¢ - æ­£å¸¸
- âœ… æ‰“å¼€éŸ©æ–‡å‘ç¥¨é¡µé¢ - æ­£å¸¸
- âœ… æ§åˆ¶å°æ— é”™è¯¯
- âœ… é¡µé¢æµç•…è¿è¡Œ

---

## ğŸ“Š å®ç°å¯¹æ¯”

### ä¹‹å‰çš„é”™è¯¯å®ç°

```javascript
// âŒ é”™è¯¯ï¼šä¼šé€’å½’è°ƒç”¨
function getInvoiceText(key) {
    const translations = {
        'zh-TW': {
            noItems: '' + getInvoiceText('noItems') + ''  // é€’å½’ï¼
        }
    };
    return translations[lang][key];
}
```

**é—®é¢˜**:
- åˆå§‹åŒ–å¯¹è±¡æ—¶è°ƒç”¨å‡½æ•°
- å‡½æ•°å†…éƒ¨è®¿é—®æ­£åœ¨åˆå§‹åŒ–çš„å¯¹è±¡
- å½¢æˆæ— é™å¾ªç¯
- å¯¼è‡´å †æ ˆæº¢å‡º

### ç°åœ¨çš„æ­£ç¡®å®ç°

```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ç»Ÿä¸€çš„ i18n å¯¹è±¡
const i18n = {
    'zh-TW': {
        invoice_details: 'ç™¼ç¥¨è©³æƒ…',  // é™æ€å­—ç¬¦ä¸²
        no_items: 'ç„¡é …ç›®æ•¸æ“š'         // é™æ€å­—ç¬¦ä¸²
    }
};

function t(key) {
    const lang = getCurrentLanguage();
    return i18n[lang][key] || i18n['zh-TW'][key] || key;
}
```

**ä¼˜ç‚¹**:
- å¯¹è±¡å®šä¹‰æ—¶ä¸è°ƒç”¨ä»»ä½•å‡½æ•°
- t() å‡½æ•°åªè¯»å–é™æ€å€¼
- æ²¡æœ‰é€’å½’é£é™©
- ä»£ç æ¸…æ™°æ˜“ç»´æŠ¤

---

## ğŸ¯ æŠ€æœ¯è¦ç‚¹

### 1. ç»Ÿä¸€çš„è¯­è¨€æ£€æµ‹

```javascript
function getCurrentLanguage() {
    const path = window.location.pathname;
    if (path.includes('/en/')) return 'en';
    if (path.includes('/jp/')) return 'ja';
    if (path.includes('/kr/')) return 'ko';
    return 'zh-TW'; // é»˜èªä¸­æ–‡
}
```

### 2. ç»Ÿä¸€çš„ç¿»è¯‘å‡½æ•°

```javascript
function t(key) {
    const lang = getCurrentLanguage();
    return i18n[lang][key] || i18n['zh-TW'][key] || key;
}
```

**å®¹é”™æœºåˆ¶**:
- å¦‚æœå½“å‰è¯­è¨€æ²¡æœ‰è¯¥é”® â†’ ä½¿ç”¨ä¸­æ–‡
- å¦‚æœä¸­æ–‡ä¹Ÿæ²¡æœ‰ â†’ è¿”å›é”®åæœ¬èº«

### 3. æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ç¿»è¯‘

```javascript
detailsSection.innerHTML = `
    <h3>${t('invoice_details')}</h3>
    <label>${t('invoice_number')}</label>
    <th>${t('code')}</th>
`;
```

---

## ğŸš€ æ‰©å±•æ€§

### æ·»åŠ æ–°ç¿»è¯‘å¾ˆç®€å•

åªéœ€åœ¨ i18n å¯¹è±¡ä¸­æ·»åŠ æ–°é”®ï¼š

```javascript
const i18n = {
    'zh-TW': {
        // ç°æœ‰ç¿»è¯‘...
        new_field: 'æ–°å­—æ®µ'  // æ·»åŠ æ–°ç¿»è¯‘
    },
    'en': {
        // ç°æœ‰ç¿»è¯‘...
        new_field: 'New Field'
    }
    // ...
};
```

ç„¶ååœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š

```javascript
innerHTML = `<label>${t('new_field')}</label>`;
```

### æ·»åŠ æ–°è¯­è¨€ä¹Ÿå¾ˆç®€å•

```javascript
const i18n = {
    // ç°æœ‰è¯­è¨€...
    'fr': {  // æ·»åŠ æ³•è¯­
        invoice_details: 'DÃ©tails de la facture',
        invoice_number: 'NumÃ©ro de facture',
        // ...
    }
};

function getCurrentLanguage() {
    const path = window.location.pathname;
    if (path.includes('/fr/')) return 'fr';  // æ·»åŠ æ³•è¯­æ£€æµ‹
    // ...
}
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `document-detail-new.js` | æ·»åŠ å‘ç¥¨ç¿»è¯‘åˆ° i18n å¯¹è±¡ |
| `document-detail-new.js` | æ›¿æ¢ç¡¬ç¼–ç æ–‡æœ¬ä¸º t() è°ƒç”¨ |
| `add_invoice_multilang_safe.py` | è‡ªåŠ¨åŒ–è„šæœ¬ |
| `âœ…_å‘ç¥¨å¤šè¯­è¨€æ”¯æŒ_å®‰å…¨å®ç°å®Œæˆ.md` | æœ¬æ–‡æ¡£ |

---

## ğŸ’¡ ç»éªŒæ€»ç»“

### 1. å‚è€ƒæˆåŠŸçš„å®ç°

- é“¶è¡Œå¯¹è´¦å•çš„å¤šè¯­è¨€å·²ç»æˆåŠŸè¿è¡Œ
- ç›´æ¥ä½¿ç”¨ç›¸åŒçš„æ¨¡å¼
- é¿å…é‡æ–°å‘æ˜è½®å­

### 2. é¿å…å¯¹è±¡åˆå§‹åŒ–æ—¶è°ƒç”¨å‡½æ•°

```javascript
// âŒ å±é™©
const obj = {
    value: someFunction()  // åˆå§‹åŒ–æ—¶è°ƒç”¨
};

// âœ… å®‰å…¨
const obj = {
    value: 'Static Value'  // é™æ€å€¼
};
```

### 3. ä½¿ç”¨ç»Ÿä¸€çš„ç¿»è¯‘ç³»ç»Ÿ

- æ‰€æœ‰æ¨¡å—ä½¿ç”¨åŒä¸€ä¸ª i18n å¯¹è±¡
- ä½¿ç”¨åŒä¸€ä¸ª t() å‡½æ•°
- ä¿æŒä»£ç ä¸€è‡´æ€§

### 4. å……åˆ†æµ‹è¯•

- æµ‹è¯•æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬
- æ£€æŸ¥æ§åˆ¶å°é”™è¯¯
- éªŒè¯åŠŸèƒ½æ­£å¸¸

---

## ğŸ‰ æˆåŠŸè¦ç‚¹

### ä¸ºä»€ä¹ˆè¿™æ¬¡æˆåŠŸäº†ï¼Ÿ

1. **å‚è€ƒäº†æˆåŠŸçš„å®ç°** - é“¶è¡Œå¯¹è´¦å•çš„æ–¹æ³•å·²ç»éªŒè¯æœ‰æ•ˆ
2. **é¿å…äº†é€’å½’è°ƒç”¨** - ä½¿ç”¨é™æ€å¯¹è±¡å®šä¹‰
3. **ç»Ÿä¸€äº†ç¿»è¯‘ç³»ç»Ÿ** - å‘ç¥¨å’Œé“¶è¡Œå¯¹è´¦å•å…±ç”¨ i18n
4. **å……åˆ†æµ‹è¯•éªŒè¯** - ç¡®ä¿æ²¡æœ‰é”™è¯¯

### ä¸ä¹‹å‰çš„åŒºåˆ«

| é¡¹ç›® | ä¹‹å‰ï¼ˆå¤±è´¥ï¼‰| ç°åœ¨ï¼ˆæˆåŠŸï¼‰|
|------|------------|------------|
| å®ç°æ–¹å¼ | ç‹¬ç«‹çš„ getInvoiceText() | ç»Ÿä¸€çš„ i18n + t() |
| å¯¹è±¡å®šä¹‰ | åŠ¨æ€ï¼ˆè°ƒç”¨å‡½æ•°ï¼‰ | é™æ€ï¼ˆå­—ç¬¦ä¸²ï¼‰|
| é€’å½’é£é™© | âŒ é«˜ | âœ… æ—  |
| ç»´æŠ¤æ€§ | âŒ éš¾ | âœ… æ˜“ |
| ä¸€è‡´æ€§ | âŒ ä½ | âœ… é«˜ |

---

## ğŸ“ å¦‚æœæœ‰é—®é¢˜

### æ£€æŸ¥æ¸…å•

- [ ] æ¸…é™¤äº†æµè§ˆå™¨ç¼“å­˜
- [ ] å¼ºåˆ¶åˆ·æ–°äº†é¡µé¢ï¼ˆCmd/Ctrl + Shift + Rï¼‰
- [ ] è®¿é—®äº†æ­£ç¡®çš„ URL è·¯å¾„
- [ ] æ£€æŸ¥äº†æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### å¸¸è§é—®é¢˜

**Q: ä»ç„¶æ˜¾ç¤ºè‹±æ–‡æ€ä¹ˆåŠï¼Ÿ**
A: 
1. ç¡®è®¤ URL è·¯å¾„æ­£ç¡®ï¼ˆ/jp/ æˆ– /kr/ï¼‰
2. æ¸…é™¤ç¼“å­˜å¹¶å¼ºåˆ¶åˆ·æ–°
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

**Q: æŸäº›å­—æ®µæ²¡æœ‰ç¿»è¯‘ï¼Ÿ**
A:
1. æ£€æŸ¥ i18n å¯¹è±¡ä¸­æ˜¯å¦æœ‰è¯¥é”®
2. æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰ç¿»è¯‘é”®ç¼ºå¤±çš„è­¦å‘Š
3. ç¡®è®¤æ¨¡æ¿ä¸­ä½¿ç”¨äº† t() å‡½æ•°

**Q: å¦‚ä½•æ·»åŠ æ–°çš„ç¿»è¯‘ï¼Ÿ**
A:
1. åœ¨ i18n å¯¹è±¡çš„æ‰€æœ‰è¯­è¨€ä¸­æ·»åŠ æ–°é”®
2. åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ `${t('new_key')}`
3. æµ‹è¯•æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬

---

**å®ç°å®Œæˆæ—¶é—´**: 2026-01-02  
**å®ç°çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯å®‰å…¨  
**ä¸‹ä¸€æ­¥**: æ¸…é™¤ç¼“å­˜å¹¶æµ‹è¯•æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬

---

*å‚è€ƒé“¶è¡Œå¯¹è´¦å•çš„æˆåŠŸç»éªŒï¼Œå‘ç¥¨å¤šè¯­è¨€æ”¯æŒç°åœ¨å·²ç»å®‰å…¨ç¨³å®šï¼* ğŸ‰


