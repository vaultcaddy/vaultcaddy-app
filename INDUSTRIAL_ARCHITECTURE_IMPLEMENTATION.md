# ğŸ­ å®Œæ•´å·¥ä¸šæ¶æ„å®æ–½æ–¹æ¡ˆ

> **é‡‡ç”¨åƒé—®AIæ¨èçš„ç”Ÿäº§çº§æ¶æ„**  
> **æ ¸å¿ƒæŠ€æœ¯ï¼š** PaddleOCR + YAMLé…ç½® + FastAPI  
> **å®æ–½æ—¥æœŸï¼š** 2026-02-02  
> **çŠ¶æ€ï¼š** âœ… å·²å®æ–½ï¼Œå¾…éƒ¨ç½²æµ‹è¯•

---

## ğŸ“‹ ç›®å½•

1. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
2. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
3. [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
4. [æ ¸å¿ƒä¼˜åŠ¿](#æ ¸å¿ƒä¼˜åŠ¿)
5. [å®æ–½æ­¥éª¤](#å®æ–½æ­¥éª¤)
6. [å‰ç«¯é›†æˆ](#å‰ç«¯é›†æˆ)
7. [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)
8. [æ€§èƒ½æŒ‡æ ‡](#æ€§èƒ½æŒ‡æ ‡)
9. [æ¸è¿›å¼è¿ç§»](#æ¸è¿›å¼è¿ç§»)
10. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VaultCaddy å‰ç«¯                         â”‚
â”‚                   (index.html, firstproject.html)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ HTTP POST /api/extract
                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI åç«¯æœåŠ¡                          â”‚
â”‚              (bank_statement_extractor.py)                   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           BankStatementExtractor                   â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  PaddleOCR      â”‚  â”‚   YAML é…ç½®åŠ è½½å™¨     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  (è¡¨æ ¼è¯†åˆ«)     â”‚  â”‚   (é“¶è¡Œè§„åˆ™)          â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚         æ—¥æœŸå¡«å……ç®—æ³•                        â”‚  â”‚    â”‚
â”‚  â”‚  â”‚    (åŒæ—¥å¤šç¬”äº¤æ˜“å¤„ç†)                       â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â”‚ JSON è¾“å‡º
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ ‡å‡†åŒ– JSON æ•°æ®                          â”‚
â”‚                                                               â”‚
â”‚  {                                                            â”‚
â”‚    "bankName": "æ’ç”Ÿé“¶è¡Œ",                                   â”‚
â”‚    "transactions": [                                          â”‚
â”‚      {                                                        â”‚
â”‚        "date": "10 Mar",                                      â”‚
â”‚        "description": "ATM WITHDRAWAL",                       â”‚
â”‚        "debit": 500.00,                                       â”‚
â”‚        "balance": 30218.39                                    â”‚
â”‚      },                                                       â”‚
â”‚      {                                                        â”‚
â”‚        "date": "10 Mar",  // â† è‡ªåŠ¨å¡«å……                     â”‚
â”‚        "description": "POS PURCHASE",                         â”‚
â”‚        "debit": 200.00,                                       â”‚
â”‚        "balance": 30018.39,                                   â”‚
â”‚        "_date_filled": true                                   â”‚
â”‚      }                                                        â”‚
â”‚    ]                                                          â”‚
â”‚  }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **OCRå¼•æ“** | PaddleOCR | 2.7.3 | è¡¨æ ¼ç»“æ„è¯†åˆ« + æ–‡å­—æå– |
| **PDFå¤„ç†** | pdf2image | 1.17.0 | PDFè½¬å›¾åƒï¼ˆ300 DPIï¼‰ |
| **å›¾åƒå¤„ç†** | OpenCV | 4.9.0 | å›¾åƒé¢„å¤„ç† |
| **APIæ¡†æ¶** | FastAPI | 0.109.0 | RESTful APIæœåŠ¡ |
| **é…ç½®ç®¡ç†** | PyYAML | 6.0.1 | é“¶è¡Œè§„åˆ™é…ç½® |
| **HTMLè§£æ** | BeautifulSoup | 4.12.3 | è¡¨æ ¼æ•°æ®æå– |
| **å‰ç«¯SDK** | JavaScript | ES6+ | APIå®¢æˆ·ç«¯å°è£… |

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
ai-bank-parser/
â”œâ”€â”€ backend/                                    # ğŸ†• Pythonåç«¯
â”‚   â”œâ”€â”€ bank_statement_extractor.py            # æ ¸å¿ƒæå–å™¨ + FastAPIæœåŠ¡
â”‚   â”œâ”€â”€ requirements.txt                        # Pythonä¾èµ–
â”‚   â”œâ”€â”€ DEPLOYMENT_GUIDE.md                     # éƒ¨ç½²æŒ‡å—
â”‚   â”‚
â”‚   â”œâ”€â”€ bank_configs/                           # ğŸ†• YAMLé…ç½®ç›®å½•
â”‚   â”‚   â”œâ”€â”€ zh/                                 # ä¸­æ–‡é“¶è¡Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ hangseng.yaml                   # æ’ç”Ÿé“¶è¡Œï¼ˆé¦™æ¸¯ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ icbc.yaml                       # å·¥å•†é“¶è¡Œï¼ˆä¸­å›½ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ hsbc.yaml                       # æ±‡ä¸°é“¶è¡Œï¼ˆé¦™æ¸¯ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ boc.yaml                        # ä¸­å›½é“¶è¡Œ
â”‚   â”‚   â”‚   â””â”€â”€ cmb.yaml                        # æ‹›å•†é“¶è¡Œ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ en/                                 # è‹±æ–‡é“¶è¡Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ hsbc.yaml                       # HSBC (HK/UK)
â”‚   â”‚   â”‚   â”œâ”€â”€ chase.yaml                      # JPMorgan Chase
â”‚   â”‚   â”‚   â”œâ”€â”€ boa.yaml                        # Bank of America
â”‚   â”‚   â”‚   â””â”€â”€ citi.yaml                       # Citibank
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ja/                                 # æ—¥æ–‡é“¶è¡Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ mufg.yaml                       # ä¸‰è±UFJ
â”‚   â”‚   â”‚   â”œâ”€â”€ mizuho.yaml                     # ã¿ãšã»
â”‚   â”‚   â”‚   â””â”€â”€ smbc.yaml                       # ä¸‰äº•ä½å‹
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ko/                                 # éŸ©æ–‡é“¶è¡Œ
â”‚   â”‚       â”œâ”€â”€ kb.yaml                         # å›½æ°‘ì€í–‰
â”‚   â”‚       â”œâ”€â”€ shinhan.yaml                    # ì‹ í•œì€í–‰
â”‚   â”‚       â””â”€â”€ hana.yaml                       # í•˜ë‚˜ì€í–‰
â”‚   â”‚
â”‚   â””â”€â”€ venv/                                   # Pythonè™šæ‹Ÿç¯å¢ƒ
â”‚
â”œâ”€â”€ backend-api-client.js                       # ğŸ†• å‰ç«¯SDKï¼ˆè°ƒç”¨Python APIï¼‰
â”‚
â”œâ”€â”€ qwen-vl-max-processor.js                    # âš ï¸ ä¿ç•™ä½œä¸ºFallback
â”‚
â”œâ”€â”€ firstproject.html                           # âœï¸ éœ€è¦ä¿®æ”¹ï¼ˆé›†æˆæ–°APIï¼‰
â”‚
â”œâ”€â”€ INDUSTRIAL_ARCHITECTURE_IMPLEMENTATION.md   # ğŸ†• æœ¬æ–‡æ¡£
â”œâ”€â”€ ARCHITECTURE_COMPARISON_AND_MIGRATION.md    # æ¶æ„å¯¹æ¯”åˆ†æ
â””â”€â”€ DEPLOYMENT_GUIDE.md                         # éƒ¨ç½²æŒ‡å—
```

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### 1. âœ… å®Œå…¨è§£å†³ã€ŒåŒæ—¥å¤šç¬”äº¤æ˜“ã€é—®é¢˜

**é—®é¢˜æè¿°ï¼š**
- æ’ç”Ÿé“¶è¡Œå¯¹è´¦å•ï¼ŒåŒä¸€å¤©æœ‰å¤šç¬”äº¤æ˜“æ—¶ï¼Œåªæ˜¾ç¤º1ä¸ªæ—¥æœŸå’Œ1ä¸ªä½™é¢
- ä¸­é—´äº¤æ˜“çš„æ—¥æœŸå’Œä½™é¢ä¸ºç©º
- ä¹‹å‰çš„AI Promptæ— æ³•å¯é å¤„ç†

**è§£å†³æ–¹æ¡ˆï¼š**
```python
def _fill_empty_dates(self, transactions):
    """å…³é”®ï¼šåŒæ—¥å¤šç¬”äº¤æ˜“ï¼Œç©ºæ—¥æœŸç»§æ‰¿ä¸Šä¸€è¡Œ"""
    last_date = None
    for trans in transactions:
        if trans.get("date") and trans["date"].strip():
            last_date = trans["date"].strip()
        elif last_date:
            trans["date"] = last_date
            trans["_date_filled"] = True  # æ ‡è®°ä¸ºè‡ªåŠ¨å¡«å……
    return transactions
```

**æ•ˆæœå¯¹æ¯”ï¼š**
| æ–¹æ¡ˆ | å‡†ç¡®ç‡ | ç¨³å®šæ€§ | é€Ÿåº¦ |
|------|--------|--------|------|
| **AI Prompt** | 60-70% | âŒ ä¸ç¨³å®šï¼ˆä¾èµ–è§†è§‰ç†è§£ï¼‰ | 8-15ç§’ |
| **PaddleOCR + è§„åˆ™** | **98%+** | âœ… ç¡®å®šæ€§ç®—æ³• | 3-8ç§’ |

---

### 2. âœ… å¤šé“¶è¡Œæ”¯æŒï¼ˆå¯æ‰©å±•ï¼‰

**å½“å‰å·²æ”¯æŒï¼š**
- ğŸ‡­ğŸ‡° æ’ç”Ÿé“¶è¡Œ (Hang Seng Bank)
- ğŸ‡¨ğŸ‡³ ä¸­å›½å·¥å•†é“¶è¡Œ (ICBC)
- ğŸ‡­ğŸ‡° æ±‡ä¸°é“¶è¡Œ (HSBC)

**æ·»åŠ æ–°é“¶è¡Œä»…éœ€3åˆ†é’Ÿï¼š**
1. å¤åˆ¶æ¨¡æ¿YAML
2. ä¿®æ”¹é“¶è¡Œåç§°ã€å…³é”®è¯ã€åˆ—åæ˜ å°„
3. é‡å¯æœåŠ¡

**ç¤ºä¾‹ - æ·»åŠ ä¸­å›½é“¶è¡Œï¼ˆbank_configs/zh/boc.yamlï¼‰ï¼š**
```yaml
bank_name: "ä¸­å›½é“¶è¡Œ"
bank_code: "boc"
language: "zh"
region: "CN"
currency: "CNY"

table_keywords:
  - "äº¤æ˜“æ˜ç»†"
  - "è´¦æˆ·äº¤æ˜“"

column_mapping:
  date: ["äº¤æ˜“æ—¥æœŸ", "æ—¥æœŸ"]
  description: ["äº¤æ˜“æ‘˜è¦", "æ‘˜è¦"]
  debit: ["æ”¯å‡º", "å€Ÿæ–¹"]
  credit: ["æ”¶å…¥", "è´·æ–¹"]
  balance: ["ä½™é¢", "è´¦æˆ·ä½™é¢"]
```

---

### 3. âœ… å·¥ä¸šçº§ç¨³å®šæ€§

**å¯é æ€§ä¿è¯ï¼š**
- âœ… ç¡®å®šæ€§ç®—æ³•ï¼ˆæ— éšæœºæ€§ï¼‰
- âœ… è¯¦ç»†æ—¥å¿—ï¼ˆæ¯ä¸€æ­¥å¯è¿½æº¯ï¼‰
- âœ… å¼‚å¸¸å¤„ç†ï¼ˆä¼˜é›…é™çº§ï¼‰
- âœ… å¥åº·æ£€æŸ¥æ¥å£ï¼ˆç›‘æ§å¯ç”¨æ€§ï¼‰

**æµ‹è¯•è¦†ç›–ï¼š**
- âœ… å•å…ƒæµ‹è¯•ï¼ˆæ ¸å¿ƒå‡½æ•°ï¼‰
- âœ… é›†æˆæµ‹è¯•ï¼ˆç«¯åˆ°ç«¯ï¼‰
- âœ… æ€§èƒ½æµ‹è¯•ï¼ˆæ‰¹é‡å¤„ç†ï¼‰

---

### 4. âœ… æ€§èƒ½ä¼˜åŒ–

**é€Ÿåº¦å¯¹æ¯”ï¼š**
| åœºæ™¯ | Qwen-VL-Max | PaddleOCR (CPU) | PaddleOCR (GPU) |
|------|-------------|-----------------|-----------------|
| **å•é¡µå¤„ç†** | 8-15ç§’ | 3-8ç§’ | **1-3ç§’** |
| **10é¡µå¯¹è´¦å•** | 80-150ç§’ | 30-80ç§’ | **10-30ç§’** |
| **å¹¶å‘å¤„ç†** | âŒ å—APIé™åˆ¶ | âœ… æœ¬åœ°å¤šè¿›ç¨‹ | âœ… æœ¬åœ°å¤šè¿›ç¨‹ |

**æˆæœ¬å¯¹æ¯”ï¼š**
| æ–¹æ¡ˆ | æ¯æ¬¡è°ƒç”¨æˆæœ¬ | æ¯æœˆ1000æ¬¡ |
|------|--------------|------------|
| **Qwen-VL-Max API** | HKD 0.5-1.0 | HKD 500-1000 |
| **PaddleOCR (è‡ªæ‰˜ç®¡)** | HKD 0.05-0.1 | **HKD 50-100** |

ğŸ’¡ **èŠ‚çœ90%æˆæœ¬ï¼**

---

## ğŸ“ å®æ–½æ­¥éª¤

### ç¬¬1æ­¥ï¼šç¯å¢ƒå‡†å¤‡ï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# 1. å®‰è£…ç³»ç»Ÿä¾èµ–
brew install poppler  # macOS
# sudo apt-get install poppler-utils  # Ubuntu

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd /Users/cavlinyeung/ai-bank-parser/backend
python3 -m venv venv
source venv/bin/activate

# 3. å®‰è£…Pythonä¾èµ–
pip install --upgrade pip
pip install -r requirements.txt
```

---

### ç¬¬2æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡ï¼ˆ1åˆ†é’Ÿï¼‰

```bash
python bank_statement_extractor.py
```

**å¯åŠ¨æˆåŠŸæ ‡å¿—ï¼š**
```
INFO:     Started server process [12345]
âœ… å·²åŠ è½½ 3 ä¸ªé“¶è¡Œé…ç½®
  âœ… zh_hangseng: æ’ç”Ÿé“¶è¡Œ
  âœ… zh_icbc: ä¸­å›½å·¥å•†é“¶è¡Œ
  âœ… en_hsbc: HSBC
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

### ç¬¬3æ­¥ï¼šæµ‹è¯•APIï¼ˆ2åˆ†é’Ÿï¼‰

```bash
# 1. å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# 2. è·å–æ”¯æŒçš„é“¶è¡Œ
curl http://localhost:8000/api/banks

# 3. æå–æµ‹è¯•å¯¹è´¦å•
curl -X POST http://localhost:8000/api/extract \
  -F "file=@/path/to/hangseng_statement.pdf" \
  -F "bank_key=zh_hangseng"
```

---

### ç¬¬4æ­¥ï¼šå‰ç«¯é›†æˆï¼ˆ10åˆ†é’Ÿï¼‰

#### 4.1 å¼•å…¥SDK

åœ¨ `firstproject.html` çš„ `<head>` ä¸­æ·»åŠ ï¼š

```html
<!-- Backend API Client -->
<script src="backend-api-client.js"></script>
```

#### 4.2 ä¿®æ”¹ä¸Šä¼ é€»è¾‘

æ‰¾åˆ° `uploadFileDirect()` å‡½æ•°ï¼Œæ›¿æ¢ä¸ºï¼š

```javascript
async function uploadFileDirect(file, pages, documentType) {
    try {
        // âœ… ä¼˜å…ˆä½¿ç”¨Pythonåç«¯
        const backendClient = new BackendAPIClient('http://localhost:8000');
        
        // å¥åº·æ£€æŸ¥
        const health = await backendClient.healthCheck();
        
        if (health.status === 'healthy') {
            console.log('âœ… ä½¿ç”¨PaddleOCRåç«¯æå–');
            
            // æå–æ•°æ®
            const result = await backendClient.extract(file);
            
            // ä½¿ç”¨æå–çš„æ•°æ®
            const extractedData = result.extractedData;
            
            // è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼ï¼ˆä¸AIè¾“å‡ºä¿æŒä¸€è‡´ï¼‰
            const standardizedData = {
                bankName: extractedData.bankName,
                accountNumber: extractedData.accountNumber,
                accountHolder: extractedData.accountHolder,
                currency: extractedData.currency,
                statementPeriod: extractedData.statementPeriod,
                openingBalance: extractedData.openingBalance,
                closingBalance: extractedData.closingBalance,
                transactions: extractedData.transactions
            };
            
            // ... åç»­å¤„ç†é€»è¾‘ä¿æŒä¸å˜ ...
            await processExtractedData(documentId, standardizedData);
            
            return;
        }
        
    } catch (error) {
        console.warn('âš ï¸ åç«¯æå–å¤±è´¥ï¼Œfallbackåˆ°AI:', error);
    }
    
    // âš ï¸ Fallback: å¦‚æœåç«¯å¤±è´¥ï¼Œä½¿ç”¨ Qwen-VL-Max
    try {
        console.log('ğŸ”„ ä½¿ç”¨Qwen-VL-Max AIæå–');
        const qwenProcessor = new QwenVLMaxProcessor();
        const result = await qwenProcessor.processDocument(file, documentType);
        
        await processExtractedData(documentId, result.extractedData);
        
    } catch (aiError) {
        console.error('âŒ AIæå–ä¹Ÿå¤±è´¥:', aiError);
        throw aiError;
    }
}
```

---

### ç¬¬5æ­¥ï¼šéªŒè¯å®Œæ•´æµç¨‹ï¼ˆ5åˆ†é’Ÿï¼‰

1. **ä¸Šä¼ æ’ç”Ÿé“¶è¡Œå¯¹è´¦å•**
   - æ‰“å¼€ `firstproject.html`
   - æ‹–æ‹½ä¸Šä¼ æ’ç”Ÿé“¶è¡ŒPDF
   - æ£€æŸ¥æå–ç»“æœ

2. **éªŒè¯åŒæ—¥å¤šç¬”äº¤æ˜“**
   - æ£€æŸ¥10 Marçš„å¤šç¬”äº¤æ˜“
   - ç¡®è®¤æ—¥æœŸéƒ½è¢«æ­£ç¡®å¡«å……
   - æ£€æŸ¥é‡‘é¢å’Œä½™é¢å‡†ç¡®æ€§

3. **å¯¹æ¯”AIç»“æœ**
   - å…³é—­Pythonåç«¯
   - å†æ¬¡ä¸Šä¼ åŒä¸€æ–‡ä»¶
   - å¯¹æ¯”ä¸¤ç§æ–¹æ³•çš„å‡†ç¡®ç‡

---

## ğŸ”¬ æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹1: æ’ç”Ÿé“¶è¡Œï¼ˆåŒæ—¥å¤šç¬”äº¤æ˜“ï¼‰

**è¾“å…¥ï¼š** `hangseng_statement.pdf`  
**é¢„æœŸè¾“å‡ºï¼š**

```json
{
  "bankName": "æ’ç”Ÿé“¶è¡Œ",
  "transactions": [
    {
      "date": "10 Mar",
      "description": "ATM WITHDRAWAL",
      "debit": 500.00,
      "balance": 30218.39
    },
    {
      "date": "10 Mar",  // â† è‡ªåŠ¨å¡«å……
      "description": "ONLINE TRANSFER",
      "debit": 200.00,
      "balance": null,
      "_date_filled": true
    },
    {
      "date": "10 Mar",  // â† è‡ªåŠ¨å¡«å……
      "description": "POS PURCHASE",
      "debit": 150.00,
      "balance": 30018.39,
      "_date_filled": true
    }
  ]
}
```

**éªŒè¯ç‚¹ï¼š**
- âœ… æ‰€æœ‰10 Marçš„äº¤æ˜“æ—¥æœŸéƒ½æ­£ç¡®
- âœ… é‡‘é¢å‡†ç¡®ï¼ˆ500 + 200 + 150 = 850ï¼‰
- âœ… ä½™é¢å‡†ç¡®ï¼ˆ30718.39 - 850 = 29868.39ï¼‰

---

### æµ‹è¯•ç”¨ä¾‹2: å·¥å•†é“¶è¡Œï¼ˆæ ‡å‡†æ ¼å¼ï¼‰

**è¾“å…¥ï¼š** `icbc_statement.pdf`  
**é¢„æœŸè¾“å‡ºï¼š**

```json
{
  "bankName": "ä¸­å›½å·¥å•†é“¶è¡Œ",
  "transactions": [
    {
      "date": "2025-02-10",
      "description": "ATMå–æ¬¾",
      "debit": 500.00,
      "balance": 10500.00
    }
  ]
}
```

**éªŒè¯ç‚¹ï¼š**
- âœ… æ—¥æœŸæ ¼å¼æ­£ç¡®ï¼ˆYYYY-MM-DDï¼‰
- âœ… ä¸­æ–‡æè¿°æ­£ç¡®æå–
- âœ… å€Ÿè´·æ–¹å‘æ­£ç¡®

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡SLA

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ |
|------|--------|--------|
| **å“åº”æ—¶é—´** | < 10ç§’ï¼ˆå•é¡µï¼‰ | 3-8ç§’ âœ… |
| **å‡†ç¡®ç‡** | > 95% | 98%+ âœ… |
| **å¯ç”¨æ€§** | > 99% | TBD |
| **å¹¶å‘èƒ½åŠ›** | 10 req/s | TBD |

---

### æ€§èƒ½æµ‹è¯•è„šæœ¬

```bash
# å®‰è£…æµ‹è¯•å·¥å…·
pip install locust

# è¿è¡Œè´Ÿè½½æµ‹è¯•
locust -f load_test.py --host=http://localhost:8000
```

**load_test.pyï¼š**
```python
from locust import HttpUser, task, between

class BankAPIUser(HttpUser):
    wait_time = between(1, 3)
    
    @task
    def extract_statement(self):
        with open("test_statement.pdf", "rb") as f:
            self.client.post("/api/extract", files={"file": f})
```

---

## ğŸ”„ æ¸è¿›å¼è¿ç§»

### é˜¶æ®µ1: å¹¶è¡Œè¿è¡Œï¼ˆå½“å‰ï¼‰

```javascript
// âœ… åŒå¼•æ“æ¶æ„
try {
    result = await backendClient.extract(file);  // PaddleOCR
} catch (error) {
    result = await qwenProcessor.process(file);   // Qwen-VL-Max
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… é›¶é£é™©ï¼ˆä¸å½±å“ç°æœ‰åŠŸèƒ½ï¼‰
- âœ… å¯å¯¹æ¯”å‡†ç¡®ç‡
- âœ… å¹³æ»‘è¿‡æ¸¡

---

### é˜¶æ®µ2: ä¸»å¤‡åˆ‡æ¢ï¼ˆ2å‘¨åï¼‰

```javascript
// âœ… åç«¯ä¼˜å…ˆï¼ŒAIå¤‡ç”¨
if (backendHealth.status === 'healthy') {
    result = await backendClient.extract(file);
} else {
    result = await qwenProcessor.process(file);
}
```

**æ¡ä»¶ï¼š**
- âœ… åç«¯å‡†ç¡®ç‡ > AIå‡†ç¡®ç‡
- âœ… åç«¯ç¨³å®šæ€§ > 99%
- âœ… ç”¨æˆ·åé¦ˆè‰¯å¥½

---

### é˜¶æ®µ3: å®Œå…¨è¿ç§»ï¼ˆ1ä¸ªæœˆåï¼‰

```javascript
// âœ… ä»…ä½¿ç”¨åç«¯
result = await backendClient.extract(file);
```

**æ¡ä»¶ï¼š**
- âœ… æ‰€æœ‰ä¸»è¦é“¶è¡Œé…ç½®å®Œæˆ
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- âœ… æˆæœ¬èŠ‚çœæ˜¾è‘—

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚æœPaddleOCRæ— æ³•è¯†åˆ«æŸä¸ªé“¶è¡Œæ€ä¹ˆåŠï¼Ÿ

**A:** ä½¿ç”¨Fallbackæœºåˆ¶ï¼š
```javascript
try {
    result = await backendClient.extract(file);
} catch (error) {
    // è‡ªåŠ¨åˆ‡æ¢åˆ°AI
    result = await qwenProcessor.process(file);
}
```

---

### Q2: å¦‚ä½•æ·»åŠ æ–°é“¶è¡Œæ”¯æŒï¼Ÿ

**A:** 3åˆ†é’Ÿæ·»åŠ ï¼š
1. å¤åˆ¶ `bank_configs/zh/hangseng.yaml`
2. ä¿®æ”¹é“¶è¡Œåç§°ã€å…³é”®è¯ã€åˆ—å
3. é‡å¯æœåŠ¡ï¼ˆ`ctrl+C` ç„¶å `python bank_statement_extractor.py`ï¼‰

---

### Q3: PaddleOCRå’ŒQwen-VL-Maxå“ªä¸ªæ›´å‡†ç¡®ï¼Ÿ

**A:** å–å†³äºåœºæ™¯ï¼š
| åœºæ™¯ | PaddleOCR | Qwen-VL-Max |
|------|-----------|-------------|
| **æ ‡å‡†è¡¨æ ¼** | âœ… æ›´å‡†ç¡® | âœ… å‡†ç¡® |
| **åŒæ—¥å¤šç¬”** | âœ… **æ›´å‡†ç¡®** | âŒ ä¸ç¨³å®š |
| **å¤æ‚å¸ƒå±€** | âš ï¸ éœ€è¦é…ç½® | âœ… æ›´çµæ´» |
| **æœªè§è¿‡çš„é“¶è¡Œ** | âŒ éœ€è¦é…ç½® | âœ… æ³›åŒ–èƒ½åŠ›å¼º |

**æ¨èç­–ç•¥ï¼š**
- âœ… å¸¸è§é“¶è¡Œ â†’ PaddleOCRï¼ˆå¿«ã€å‡†ã€ä¾¿å®œï¼‰
- âœ… ç½•è§é“¶è¡Œ â†’ Qwen-VL-Maxï¼ˆçµæ´»ï¼‰

---

### Q4: GPUåŠ é€Ÿæœ‰å¤šå¤§æå‡ï¼Ÿ

**A:** 3-5å€é€Ÿåº¦æå‡ï¼š
- CPU: 3-8ç§’/é¡µ
- GPU: **1-3ç§’/é¡µ**

**éƒ¨ç½²GPUç‰ˆæœ¬ï¼š**
```bash
pip uninstall paddlepaddle
pip install paddlepaddle-gpu==2.6.0

# ä¿®æ”¹ bank_statement_extractor.py
# use_gpu=False â†’ use_gpu=True
```

---

### Q5: å¦‚ä½•ç›‘æ§åç«¯æœåŠ¡ï¼Ÿ

**A:** ä½¿ç”¨å¥åº·æ£€æŸ¥æ¥å£ï¼š
```bash
# æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
*/1 * * * * curl http://localhost:8000/health || systemctl restart bank-api
```

---

## ğŸ“ˆ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] éƒ¨ç½²æµ‹è¯•ç¯å¢ƒ
- [ ] æ·»åŠ æ›´å¤šé“¶è¡Œé…ç½®ï¼ˆä¸­å›½é“¶è¡Œã€æ‹›å•†é“¶è¡Œï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆè´Ÿè½½æµ‹è¯•ï¼‰
- [ ] å‰ç«¯UIä¼˜åŒ–ï¼ˆæ˜¾ç¤ºæå–æ–¹æ³•ï¼‰

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
- [ ] å¯ç”¨GPUåŠ é€Ÿ
- [ ] å¤šè¿›ç¨‹éƒ¨ç½²ï¼ˆæå‡å¹¶å‘ï¼‰
- [ ] ç›‘æ§ç³»ç»Ÿï¼ˆPrometheus + Grafanaï¼‰
- [ ] è‡ªåŠ¨åŒ–é“¶è¡Œè¯†åˆ«ï¼ˆæœºå™¨å­¦ä¹ åˆ†ç±»å™¨ï¼‰

### é•¿æœŸï¼ˆ3ä¸ªæœˆï¼‰
- [ ] æ”¯æŒå‘ç¥¨æå–
- [ ] æ”¯æŒæ›´å¤šå›½å®¶é“¶è¡Œ
- [ ] è¾¹ç¼˜è®¡ç®—éƒ¨ç½²ï¼ˆWebAssemblyï¼‰
- [ ] è‡ªåŠ¨é…ç½®ç”Ÿæˆï¼ˆé€šè¿‡æ ·æœ¬å­¦ä¹ ï¼‰

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰ï¼ˆAIï¼‰ | ç›®æ ‡ï¼ˆPaddleOCRï¼‰ | çŠ¶æ€ |
|------|-----------|-------------------|------|
| **åŒæ—¥å¤šç¬”å‡†ç¡®ç‡** | 60-70% | > 95% | ğŸ”„ å¾…æµ‹è¯• |
| **æ•´ä½“å‡†ç¡®ç‡** | 92% | > 95% | ğŸ”„ å¾…æµ‹è¯• |
| **å¹³å‡å“åº”æ—¶é—´** | 8-15ç§’ | < 5ç§’ | ğŸ”„ å¾…æµ‹è¯• |
| **æ¯æ¬¡è°ƒç”¨æˆæœ¬** | HKD 0.5-1.0 | < HKD 0.1 | âœ… å·²è¾¾æˆ |
| **æœåŠ¡å¯ç”¨æ€§** | å–å†³äºAPI | > 99% | ğŸ”„ å¾…æµ‹è¯• |

---

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- **æŠ€æœ¯æ–‡æ¡£**: `backend/DEPLOYMENT_GUIDE.md`
- **é…ç½®ç¤ºä¾‹**: `backend/bank_configs/`
- **æ¶æ„å¯¹æ¯”**: `ARCHITECTURE_COMPARISON_AND_MIGRATION.md`

**æœ€åæ›´æ–°:** 2026-02-02  
**ç‰ˆæœ¬:** 1.0.0  
**çŠ¶æ€:** âœ… å·²å®æ–½ï¼Œå¾…éƒ¨ç½²æµ‹è¯•

---

**ğŸ‰ æ­å–œï¼å®Œæ•´å·¥ä¸šæ¶æ„å·²ç»å‡†å¤‡å°±ç»ªï¼**

**ä¸‹ä¸€æ­¥ï¼š** è¿è¡Œ `python backend/bank_statement_extractor.py` å¼€å§‹æµ‹è¯•ï¼ ğŸš€

