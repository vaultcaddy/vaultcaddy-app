<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    
    <!-- üîí pageprotected -->
    <style>
        body.auth-checking { visibility: hidden !important; }
        .auth-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; align-items: center; justify-content: center; z-index: 9999; visibility: visible !important; }
        body.auth-ready .auth-loading { display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <script>
        document.documentElement.classList.add('auth-checking');
        if (document.body) { document.body.classList.add('auth-checking'); } 
        else { document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('auth-checking'); }); }
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="billing_credits">BillingandÁ©çdivide - VaultCaddy</title>
    <meta name="description" content="View and manage your VaultCaddy subscription and billing information">
    <meta property="og:title" content="Billing & Credits - VaultCaddy">
    <meta property="og:description" content="VaultCaddy - Professional document processing with AI technology">
    <meta property="og:url" content="https://vaultcaddy.com/billing">
    <meta property="og:type" content="website">
    <link rel="canonical" href="https://vaultcaddy.com/billing">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../pages.css">
    <link rel="stylesheet" href="../dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script defer src="../config.js"></script>
    <script defer src="../translations.js"></script>
    
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-functions-compat.js"></script>
    
    <!-- Firebase SettingsandDatamanager -->
    <script defer src="../firebase-config.js?v=20251105-force-init"></script>
    <!-- üî• newsimplified system -->
    <script defer src="../simple-auth.js?v=20251105-force-init"></script>
    <script defer src="../user-profile-manager.js?v=20251120"></script>
    <script defer src="../simple-data-manager.js?v=20251105-force-init"></script>
    
    <!-- Email Verification check -->
    <script defer src="../email-verification-check.js"></script>
    
    <!-- Navigation bar interactionFeatures -->
    <script defer src="../navbar-interactions.js?v=20251108"></script>
    
    <!-- ‚úÖ LanguagemanagerÔºàmustmustinnavigationcolumn‰πãfrontLoadÔºâ-->
    <script defer src="language-manager.js?v=20251120"></script>
    
    <!-- ‚úÖ unifiednavigationcolumnsystemÔºöstatic HTML + navbar-component.js -->
    <script defer src="../navbar-component.js?v=20251120-unified"></script>
    <script defer src="../sidebar-component.js?v=20251107-rebuild"></script>
    <style>
        body {
            background: #ffffff;
            color: #1f2937;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .account-container {
            display: flex;
            min-height: calc(100vh - 60px);
            padding-top: 60px;
        }
        
        .sidebar {
            width: 280px;
            background: #f8fafc;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            top: 60px;
            bottom: 0;
            left: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 1.5rem 1rem 1rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .sidebar-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }
        
        .sidebar-section {
            padding: 1rem 0;
            border-top: 1px solid #e2e8f0;
        }
        
        .sidebar-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: 0 0 0.5rem 1rem;
        }
        
        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            background: #ffffff;
            margin-top: auto;
        }
        
        .sidebar-stats {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .stat-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 1rem 0;
        }
        
        .sidebar-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .sidebar-nav .nav-item {
            margin: 0;
        }
        
        .sidebar-nav .nav-item a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: #6b7280;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-nav .nav-item.active a {
            background: #eff6ff;
            color: #2563eb;
            border-left-color: #2563eb;
        }
        
        .sidebar-nav .nav-item a:hover {
            background: #f1f5f9;
            color: #374151;
        }
        
        .sidebar-nav .nav-item a i {
            width: 20px;
            margin-right: 0.75rem;
            font-size: 1rem;
        }
        
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem 3rem;
            overflow-y: auto;
            min-height: calc(100vh - 60px);
            background: #ffffff;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .page-subtitle {
            color: #6b7280;
            margin: 0;
            font-size: 1rem;
        }
        
        .billing-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .billing-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .card-subtitle {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            width: 100%;
            justify-content: center;
        }
        
        .btn-primary {
            background: #7c3aed;
            color: white;
        }
        
        .btn-primary:hover {
            background: #6d28d9;
        }
        
        .btn-secondary {
            background: transparent;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            background: #f3f4f6;
            color: #1f2937;
        }
        
        .plans-section {
            margin-bottom: 3rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0 0 2rem 0;
            color: #1f2937;
        }
        
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .plan-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .plan-card.featured {
            border-color: #7c3aed;
            background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.15);
        }
        
        .plan-card {
            transition: all 0.3s ease;
        }
        
        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .plan-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.25);
        }
        
        .plan-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .plan-description {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .plan-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 1.5rem 0;
        }
        
        .plan-price span {
            font-size: 1rem;
            font-weight: 400;
            color: #6b7280;
        }
        
        .plan-features {
            list-style: none;
            margin: 0 0 2rem 0;
            padding: 0;
        }
        
        .plan-features li {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .plan-features li i {
            color: #10b981;
            margin-right: 0.75rem;
            width: 16px;
        }
        
        .current-plan-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #10b981;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .pricing-toggle {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card:nth-child(1) {
            animation-delay: 0.1s;
        }
        
        .plan-card:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .plan-card:nth-child(3) {
            animation-delay: 0.3s;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .credit-option {
            transition: all 0.2s ease;
        }
        
        .credit-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
            border-color: #7c3aed !important;
        }
        
        .credit-option.popular {
            animation: pulse-border 2s infinite;
        }
        
        @keyframes pulse-border {
            0% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.7);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(124, 58, 237, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0);
            }
        }
        
        .cta-btn {
            width: 100%;
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.4);
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .cta-btn:hover::before {
            left: 100%;
        }
        
        /* üß™ testmodeSwitchButtonStyle */
        #test-mode-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.15);
        }
        
        #test-mode-info code {
            background: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 600;
            color: #dc2626;
        }
        
        @media (max-width: 1024px) {
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .billing-overview {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            /* üß™ testmodeButtoninmobileupÁöÑStyle */
            #test-mode-toggle {
                flex-direction: column;
                gap: 0.5rem !important;
                padding: 0.75rem !important;
            }
            
            #test-mode-toggle label {
                font-size: 0.75rem !important;
            }
            
            #test-mode-info {
                padding: 0.75rem !important;
                font-size: 0.75rem !important;
            }
        }
    
        @media (max-width: 768px) {
            /* navigationcolumn */
            .vaultcaddy-navbar {
                padding: 0 0.75rem !important;
            }
            
            /* ShowHamburger menuButton */
            #mobile-menu-btn {
                display: block !important;
            }
            
            /* MobileShow logoÔºåHideText */
            .desktop-logo {
                display: flex !important; /* ‚úÖ Show V icon */
            }
            
            .desktop-logo-text {
                display: none !important; /* ‚úÖ Hide "VaultCaddy" Text */
            }
            
            /* pricingcardMobileÔºömodifyasupdownarrangecolumnÔºåannual feeinup */
            #pricing-container {
                grid-template-columns: 1fr !important;
                gap: 1.5rem !important;
                padding: 0 !important; /* üî• RemoveinnerË∑ùÔºåËÆìcardHasemptybetweenextension */
                max-width: 100% !important;
            }
            
            /* üî• plans-section Mobile‰πüneedadjust */
            .plans-section {
                padding: 0.5rem !important; /* leftrightÂêÑÁïô 0.5rem ËæπË∑ù */
            }
            
            /* annual feePlanmovetoNo.one‰Ωç */
            #yearly-plan {
                order: 1 !important;
            }
            
            /* monthly feePlanmovetoNo.‰∫å‰Ωç */
            #monthly-plan {
                order: 2 !important;
            }
            
            /* üî• pricingcardFeaturesListÔºömodifyas 2 columnShow */
            .pricing-card div[style*="grid-template-columns: repeat(3, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.5rem 0.75rem !important;
            }
            
            /* üî• forceRemoveleftrightWidthlimitÔºåËÆìcard‰ΩîfullContainer */
            html body .pricing-card[style],
            html body #monthly-plan[style],
            html body #yearly-plan[style],
            html body div[id="monthly-plan"],
            html body div[id="yearly-plan"] {
                max-width: none !important;
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                box-sizing: border-box !important;
            }
        
        /* Mobile UI optimizeStyle */
/* suitableuseat dashboard.html, firstproject.html, account.html, billing.html */

@media (max-width: 768px) {
    /* ==================== generalStyle ==================== */
    
    /* mainContainer */
    body {
        padding-top: 60px !important;
    }
    
    .main-container,
    .content-wrapper {
        padding: 0.75rem !important;
        margin: 0 !important;
    }
    
    /* ÊâÄHascard */
    .card,
    div[style*="border-radius"][style*="padding"] {
        padding: 1rem !important;
        margin-bottom: 1rem !important;
    }
    
    /* Title */
    h1 {
        font-size: 1.5rem !important;
    }
    
    h2 {
        font-size: 1.25rem !important;
    }
    
    h3 {
        font-size: 1.125rem !important;
    }
    
    /* Button */
    button,
    .btn {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
    }
    
    /* Input box */
    input,
    select,
    textarea {
        font-size: 1rem !important;
        padding: 0.75rem !important;
    }
    
    /* ==================== Dashboard Dedicated ==================== */
    
    /* ProjectList */
    .projects-header {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .projects-header > div {
        width: 100% !important;
    }
    
    /* Table */
    table {
        font-size: 0.875rem !important;
    }
    
    table th,
    table td {
        padding: 0.5rem !important;
    }
    
    /* HideColumn sectionÔºàMobileÔºâ */
    table th:nth-child(3),
    table td:nth-child(3) {
        display: none !important; /* Hide CREATED column */
    }
    
    /* ==================== First Project Dedicated ==================== */
    
    /* DocumentTypeSelector */
    .document-type-selector {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
    }
    
    /* Upload area */
    .upload-area {
        padding: 2rem 1rem !important;
    }
    
    /* ExportButton group */
    .export-buttons {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .export-buttons button {
        width: 100% !important;
    }
    
    /* DocumentTable */
    #team-project-tbody tr {
        font-size: 0.8125rem !important;
    }
    
    /* HideColumn section */
    .document-table th:nth-child(4),
    .document-table td:nth-child(4),
    .document-table th:nth-child(5),
    .document-table td:nth-child(5) {
        display: none !important; /* HideAmountandDatecolumn */
    }
    
    /* ==================== Account Dedicated ==================== */
    
    /* Profilecard */
    .profile-card {
        flex-direction: column !important;
        text-align: center !important;
    }
    
    .profile-avatar {
        margin: 0 auto 1rem !important;
    }
    
    /* Credits Usage */
    .credits-usage {
        flex-direction: column !important;
    }
    
    .credits-bar {
        width: 100% !important;
    }
    
    /* form */
    .form-group {
        margin-bottom: 1rem !important;
    }
    
    .form-row {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    /* ==================== Billing Dedicated ==================== */
    
    /* Pricingcard */
    .pricing-cards {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    /* transactionrecordTable */
    .transaction-table {
        font-size: 0.8125rem !important;
    }
    
    .transaction-table th:nth-child(2),
    .transaction-table td:nth-child(2) {
        display: none !important; /* HideDescriptioncolumn */
    }
    
    /* ==================== Modal ==================== */
    
    .modal-content {
        width: 95% !important;
        max-width: 95% !important;
        margin: 1rem !important;
        padding: 1rem !important;
    }
    
    .modal-header {
        padding: 1rem !important;
    }
    
    .modal-body {
        padding: 1rem !important;
    }
    
    .modal-footer {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .modal-footer button {
        width: 100% !important;
    }
    
    /* ==================== Sidebar ==================== */
    
    .sidebar {
        width: 100% !important;
        position: fixed !important;
        top: 60px !important;
        left: -100% !important;
        height: calc(100vh - 60px) !important;
        transition: left 0.3s ease !important;
        z-index: 999 !important;
    }
    
    .sidebar.active {
        left: 0 !important;
    }
    
    /* ==================== Otheroptimize ==================== */
    
    /* HidenotmustneedÁöÑElement */
    .desktop-only {
        display: none !important;
    }
    
    /* ShowMobileElement */
    .mobile-only {
        display: block !important;
    }
    
    /* spacingadjust */
    section {
        padding: 1.5rem 0 !important;
    }
    
    /* Button group */
    .button-group {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .button-group button,
    .button-group a {
        width: 100% !important;
    }
}

        /* Billing specificStyle */
        @media (max-width: 768px) {
            .billing-header {
                flex-direction: column !important;
            }
            
            .plan-selector {
                width: 100% !important;
            }
            
            .payment-method {
                flex-direction: column !important;
            }
        }
        
        /* ==================== ModalStyle ==================== */
        .modal-overlay {
            display: none !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            background: rgba(0, 0, 0, 0.5) !important;
            z-index: 9999 !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .modal-overlay.active {
            display: flex !important;
        }

        .modal-content {
            background: #ffffff !important;
            border-radius: 12px !important;
            padding: 2rem !important;
            width: 90% !important;
            max-width: 500px !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
            position: relative !important;
            z-index: 10000 !important;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #1f2937;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .btn-cancel {
            background: #ffffff;
            border: 1px solid #d1d5db;
            color: #374151;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-cancel:hover {
            background: #f9fafb;
        }

        .btn-create {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-create:hover {
            opacity: 0.9;
        }
        
        </style>
    
    <script>
        // Execute immediatelyÔºöensurepagecansee
        (function() {
            console.log('üöÄ BillingpageimmediatelyInitialize...');
            
            // ensurebodycansee
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            
            // ensuredashboardContainercansee
            const dashboardContainer = document.querySelector('.dashboard-container');
            if (dashboardContainer) {
                dashboardContainer.style.display = 'flex';
                dashboardContainer.style.visibility = 'visible';
            }
            
            // ensureSidebarcansee
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.style.display = 'block';
                sidebar.style.visibility = 'visible';
            }
            
            // ensuremainContentcansee
            const mainContent = document.querySelector('.main-content');
            if (mainContent) {
                mainContent.style.display = 'block';
                mainContent.style.visibility = 'visible';
            }
            
            console.log('‚úÖ BillingpageimmediatelyInitializeComplete');
        })();
    </script>
    
    <!-- Stripe Manager -->
    <script defer src="../stripe-manager.js"></script>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="mobile-responsive.css">

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LWPEKNC7RQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LWPEKNC7RQ');
    </script>


    <!-- resourcesTips - optimize loading speed -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
        <script src="/multilingual-data-sync.js"></script>
</head>
<body class="auth-checking">
    <!-- üîí Auth LoadAnimation -->
    <div class="auth-loading">
        <div style="text-align: center;">
            <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
            <p style="color: #6b7280; font-size: 0.875rem;">Verifying identity...</p>
        </div>
    </div>
    
    <!-- navigationcolumn -->
    <!-- Unified static navbar -->
    <!-- ‚úÖ Unified static navbar -->
    <!-- ‚úÖ Unified static navbarÔºàand firstproject.html completelyconsistentÔºâ-->
    <nav class="vaultcaddy-navbar" id="main-navbar" style="position: fixed; top: 0; left: 0; right: 0; height: 60px; background: #ffffff; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; justify-content: space-between; padding: 0 2rem; z-index: 1000; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);">
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <!-- Hamburger menuButtonÔºàmobile onlyShowÔºâ-->
            <button id="mobile-menu-btn" onclick="openMobileSidebar()" style="display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; color: #1f2937; font-size: 1.5rem;">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="index.html" style="display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: #1f2937; font-weight: 600; font-size: 1.125rem;">
                <div class="desktop-logo" style="width: 32px; height: 32px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.25rem;">
                    V
                </div>
                <div class="desktop-logo-text">
                    <div>VaultCaddy</div>
                    <div style="font-size: 0.75rem; color: #6b7280; font-weight: 400; text-transform: uppercase; letter-spacing: 0.05em;">AI DOCUMENT PROCESSING</div>
                </div>
            </a>
        </div>
        <div style="display: flex; align-items: center; gap: 2rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
                <a href="index.html#features" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Features</a>
                <a href="index.html#pricing" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Pricing</a>
                <a href="/blog/" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Learning Center</a>
                <a href="dashboard.html" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Dashboard</a>
            </div>
            
            <div id="language-switcher" style="display: inline-block; margin-right: 1rem;"></div>
                <div id="user-menu" style="position: relative; display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s;">
                <div id="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem;">Y</div>
            </div>
        </div>
    </nav>
    
    <!-- mobileSidebarMenu -->
    <div id="mobile-sidebar" style="position: fixed; top: 0; left: -100%; width: 280px; height: 100vh; background: white; z-index: 2000; transition: left 0.3s ease; box-shadow: 2px 0 10px rgba(0,0,0,0.1); overflow-y: auto;">
        <div style="padding: 1.5rem;">
            <!-- Menuitem -->
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                <a href="index.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-home" style="width: 20px; color: #667eea;"></i>
                    <span>Home</span>
                </a>
                <a href="index.html#features" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-star" style="width: 20px; color: #667eea;"></i>
                    <span>Features</span>
                </a>
                <a href="index.html#pricing" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-dollar-sign" style="width: 20px; color: #667eea;"></i>
                    <span>Pricing</span>
                </a>
                <a href="/blog/" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-graduation-cap" style="width: 20px; color: #667eea;"></i>
                    <span>Learning Center</span>
                </a>
                <a href="dashboard.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-th-large" style="width: 20px; color: #667eea;"></i>
                    <span>Dashboard</span>
                </a>
                
                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>

                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>
                
                <a href="privacy.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-shield-alt" style="width: 20px; color: #6b7280;"></i>
                    <span>Privacy Policy</span>
                </a>
                <a href="terms.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-file-contract" style="width: 20px; color: #6b7280;"></i>
                    <span>Terms of Service</span>
                </a>
            </div>
        </div>
    </div>
    </div>
    
    <!-- SidebarMask -->
    <div id="mobile-sidebar-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1999; display: none;" onclick="closeMobileSidebar()"></div>
    
    <div id="user-dropdown" style="display: none; position: fixed; top: 70px; right: 2rem; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); padding: 1rem; min-width: 220px; z-index: 2000; border: 1px solid #e5e7eb;">
        <div style="padding: 0.75rem; border-bottom: 1px solid #f3f4f6;">
            <div style="font-weight: 600; font-size: 1rem; color: #1f2937; margin-bottom: 0.25rem;"><span>Credits</span>: <span id="dropdown-credits">0</span></div>
            <div style="font-size: 0.875rem; color: #6b7280;" id="dropdown-email">user@example.com</div>
        </div>
        <div style="padding: 0.5rem 0;">
            <a href="account.html" style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 6px; transition: background 0.2s; font-size: 0.9375rem;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                <span><i class="fas fa-user" style="margin-right: 0.75rem; color: #6b7280; width: 16px;"></i><span>Account</span></span>
                <span style="color: #9ca3af; font-size: 0.875rem;">‚åòA</span>
            </a>
            <a href="billing.html" style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 6px; transition: background 0.2s; font-size: 0.9375rem;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                <span><i class="fas fa-credit-card" style="margin-right: 0.75rem; color: #6b7280; width: 16px;"></i><span>Billing</span></span>
                <span style="color: #9ca3af; font-size: 0.875rem;">‚åòB</span>
            </a>
        </div>
        <div style="border-top: 1px solid #f3f4f6; padding-top: 0.5rem;">
            <button onclick="handleLogout()" style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; color: #ef4444; background: transparent; border: none; border-radius: 6px; cursor: pointer; transition: background 0.2s; font-size: 0.9375rem; text-align: left;" onmouseover="this.style.background='#fee2e2'" onmouseout="this.style.background='transparent'">
                <span><i class="fas fa-sign-out-alt" style="margin-right: 0.75rem; width: 16px;"></i><span>Logout</span></span>
                <span style="color: #fca5a5; font-size: 0.875rem;">‚åòQ</span>
            </button>
        </div>
    </div>
    
    <!-- ‚úÖ index.html dynamicUpdateUserStatus -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ index.html Initialize');
            
            let userCredits = 0;
            let userEmail = '';
            let userDisplayName = '';
            
            // GetUserFirst letter
            function getUserInitial() {
                // priorityUse displayName First letter of
                if (userDisplayName && userDisplayName.trim()) {
                    return userDisplayName.charAt(0).toUpperCase();
                }
                // ElseUse email First letter of
                if (userEmail && userEmail.trim()) {
                    return userEmail.charAt(0).toUpperCase();
                }
                return 'U';
            }
            
            // üî• Hamburger menuFeaturesÔºàExecute immediatelyÔºånotWait DOMContentLoadedÔºâ
            (function() {
                console.log('üîµ InitializeHamburger menu...');
                
                // OpenSidebar
                window.openMobileSidebar = function() {
                    console.log('üîµ openMobileSidebar Called');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    console.log('üîµ sidebar:', sidebar);
                    console.log('üîµ overlay:', overlay);
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '0';
                        overlay.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                        console.log('‚úÖ SidebarOpened');
                    } else {
                        console.error('‚ùå Not foundSidebarorMask element');
                    }
                };
                
                // CloseSidebar
                window.closeMobileSidebar = function() {
                    console.log('üîµ closeMobileSidebar Called');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '-100%';
                        overlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        console.log('‚úÖ SidebaralreadyClose');
                    }
                };
                
                // Hamburger menuButtonUse onclickÔºåNoneneedamountouterbind
                console.log('‚úÖ Hamburger menuFeaturesalreadyreadyÔºàUse onclickÔºâ');
            })();
                
                // MobileautocarouselÔºàonlyinMobileEnableÔºâ
                if (window.innerWidth <= 768) {
                    // reviewcarousel
                    const testimonialsContainer = document.getElementById('testimonials-container');
                    if (testimonialsContainer) {
                        let testimonialIndex = 0;
                        const testimonialCards = testimonialsContainer.children;
                        
                        setInterval(() => {
                            testimonialIndex = (testimonialIndex + 1) % testimonialCards.length;
                            const scrollAmount = testimonialCards[testimonialIndex].offsetLeft - testimonialsContainer.offsetLeft;
                            testimonialsContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 4000); // per4Second toggle
                    }
                    
                    // Learning Centercarousel
                    const learningContainer = document.getElementById('learning-center-container');
                    if (learningContainer) {
                        let learningIndex = 0;
                        const learningCards = learningContainer.children;
                        
                        setInterval(() => {
                            learningIndex = (learningIndex + 1) % learningCards.length;
                            const scrollAmount = learningCards[learningIndex].offsetLeft - learningContainer.offsetLeft;
                            learningContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 5000); // per5Second toggle
                    }
                }
            });
            
            // SwitchDropdown menu
            async function toggleDropdown() {
                const dropdown = document.getElementById('user-dropdown');
                if (dropdown.style.display === 'none') {
                    dropdown.style.display = 'block';
                    
                    // üî• instantfrom SimpleDataManager Getmostnew Credits
                    if (window.simpleDataManager && window.simpleDataManager.initialized) {
                        try {
                            userCredits = await window.simpleDataManager.getUserCredits();
                            console.log('‚úÖ Fetch immediately Credits:', userCredits);
                        } catch (error) {
                            console.error('‚ùå Failed to fetch Credits:', error);
                        }
                    }
                    
                    // UpdateDropdown menuContent
                    document.getElementById('dropdown-credits').textContent = userCredits.toLocaleString();
                    document.getElementById('dropdown-email').textContent = userEmail;
                } else {
                    dropdown.style.display = 'none';
                }
            }
            
            // clickouterpartCloseDropdown menu
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('user-dropdown');
                const userMenu = document.getElementById('user-menu');
                
                if (dropdown && userMenu && 
                    !dropdown.contains(event.target) && 
                    !userMenu.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
            
            // LogoutFeatures
            window.handleLogout = async function() {
                try {
                    if (window.simpleAuth) {
                        await window.simpleAuth.logout();
                        window.location.href = 'index.html';
                    }
                } catch (error) {
                    console.error('LogoutFailed:', error);
                    alert('LogoutFailedÔºåpleaseRetry');
                }
            };
            
            // Wait Firebase and simpleAuth Load
            async function updateUserMenu() {
                const userMenu = document.getElementById('user-menu');
                if (!userMenu) return;
                
                try {
                    const isLoggedIn = window.simpleAuth && window.simpleAuth.isLoggedIn();
                    
                    if (isLoggedIn) {
                        // ‚úÖ alreadyLoginÔºöShowUseravatar
                        const currentUser = window.simpleAuth.getCurrentUser();
                        userEmail = currentUser.email || '';
                        userDisplayName = currentUser.displayName || '';
                        
                        // üî• from Firestore Get displayName and credits
                        if (window.simpleDataManager && window.simpleDataManager.initialized) {
                            try {
                                const userDoc = await window.simpleDataManager.getUserDocument();
                                if (userDoc) {
                                    userDisplayName = userDoc.displayName || userDisplayName;
                                    userCredits = userDoc.credits || 0;
                                    console.log('‚úÖ index.html Get Credits:', userCredits);
                                }
                            } catch (error) {
                                console.log('‚ö†Ô∏è NoneÊ≥ïfrom Firestore GetUserdata:', error);
                            }
                        } else {
                            console.log('‚è≥ SimpleDataManager yetnotInitializeÔºåWaitmiddle...');
                            // DelayRetry
                            setTimeout(async () => {
                                if (window.simpleDataManager && window.simpleDataManager.initialized) {
                                    try {
                                        userCredits = await window.simpleDataManager.getUserCredits();
                                        console.log('‚úÖ Delayed fetch Credits:', userCredits);
                                    } catch (error) {
                                        console.error('‚ùå Delayed fetchFailed:', error);
                                    }
                                }
                            }, 1000);
                        }
                        
                        const userInitial = getUserInitial();
                        console.log(`üë§ UserFirst letter: "${userInitial}" (displayName: "${userDisplayName}")`);
                        
                        userMenu.innerHTML = `
                            <div onclick="toggleDropdown()" style="cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                                <div style="width: 32px; height: 32px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem; opacity: 1; transition: opacity 0.3s;">${userInitial}</div>
                            </div>
                        `;
                        console.log('‚úÖ UseralreadyLoginÔºåShowavatar');
                    } else {
                        // ‚úÖ notLoginÔºöShowLoginButton
                        userMenu.innerHTML = `
                            <button onclick="window.location.href='auth.html'" style="padding: 0.5rem 1rem; background: #8b5cf6; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.2s; font-size: 0.875rem;" onmouseover="this.style.background='#7c3aed'" onmouseout="this.style.background='#8b5cf6'">Login</button>
                        `;
                        console.log('‚úÖ UsernotLoginÔºåShowLoginButton');
                    }
                } catch (e) {
                    console.log('‚ùå NoneÊ≥ïUpdateUserMenu:', e);
                }
            }
            
            // immediatelyTryUpdate
            updateUserMenu();
            
            // Listen Firebase and Auth Event
            window.addEventListener('firebase-ready', updateUserMenu);
            window.addEventListener('user-logged-in', updateUserMenu);
            window.addEventListener('user-logged-out', updateUserMenu);
            
            // DelayagaintimesCheckÔºàin caseEventalreadyTriggerÔºâ
            setTimeout(updateUserMenu, 1000);
            setTimeout(updateUserMenu, 2000);
            
            // expose toggleDropdown toallbureau
            window.toggleDropdown = toggleDropdown;
        });
    </script>

    <!-- mainneedContent area -->
    <main style="padding-top: 10px;">
    <!-- Dashboard Container -->
    <div class="dashboard-container" style="display: flex; min-height: calc(100vh - 10px); background: #ffffff; padding-top: 10px;">
        <!-- leftSidebar (by sidebar-component.js Dynamically generated) -->
        <aside class="sidebar"></aside>

        <!-- mainneedContent area -->
        <main class="main-content" style="flex: 1; background: #ffffff; margin-left: 280px; overflow-y: auto; min-height: calc(100vh - 60px); display: block !important; visibility: visible !important;">
            <!-- subscribePlan -->
            <div class="plans-section" id="subscription-plans" style="padding: 2rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.75rem; color: #1f2937; line-height: 1.3;">No hidden fees, safe and reliable</h2>
                    <p style="font-size: 1rem; color: #6b7280; margin: 0;">Join thousands of businesses saving time on financial data entry.</p>
                </div>
                
                <!-- MonthlyandYearlyandcolumnShowÔºàUse index.html ÁöÑcardStyleÔºâ-->
                <div id="pricing-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 1000px; margin: 2rem auto;">
                    <!-- MonthlyPlan -->
                    <div id="monthly-plan" class="pricing-card" style="border: 2px solid #e5e7eb; border-radius: 16px; padding: 2.5rem; background: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); width: 100%;">
                        <!-- üî• TitleandPricinghorizontaltoarrangecolumn -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.monthly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">Monthly</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">HKD $</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">58</span>
                                <span style="font-size: 1rem; color: #6b7280;">/month</span>
                            </div>
                        </div>
                        
                        <!-- What's Included -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f9fafb; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">What's Included</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>100 Credits per month</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>Then USD $0.06 per page</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Unlimited Batch Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>One-Click Convert All</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSV Export</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooks Integration</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Hybrid AI Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 typeLanguagesupport</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Email Support</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Secure File Upload</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Data Retention</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Image Backup</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA Button -->
                        <button onclick="createCheckoutSession('monthly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">Get Started</button>
                    </div>

                    <!-- YearlyPlan -->
                    <div id="yearly-plan" class="pricing-card" style="border: 2px solid #8b5cf6; border-radius: 16px; padding: 2.5rem; background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%); box-shadow: 0 4px 20px rgba(139, 92, 246, 0.1); width: 100%; position: relative;">
                        <div data-i18n="pricing.save" style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #8b5cf6; color: white; padding: 0.25rem 1rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Save 20%</div>
                        <!-- üî• TitleandPricinghorizontaltoarrangecolumn -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.yearly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">Yearly</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">HKD $</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">46</span>
                                <span style="font-size: 1rem; color: #6b7280;">/month</span>
                            </div>
                        </div>
                        
                        <!-- What's Included -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: transparent; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">What's Included</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>1,200 Credits per year</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>Then USD $0.06 per page</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Unlimited Batch Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>One-Click Convert All</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSV Export</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooks Integration</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Hybrid AI Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 typeLanguagesupport</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Email Support</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Secure File Upload</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Data Retention</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Image Backup</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA Button -->
                        <button onclick="createCheckoutSession('yearly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">Get Started</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // ‚úÖ Á∞°ÂåñÔºödirectUse SimpleAuth
        function checkAuth() {
            return window.simpleAuth && window.simpleAuth.isLoggedIn();
        }
        
        function showAuthNotificationInBilling() {
            console.log('üí° in Billing pageShowË∫´‰ªΩverifyTips');
            
            const notification = document.createElement('div');
            notification.id = 'billing-auth-notification';
            notification.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; background: #f3e8ff; border-bottom: 1px solid #8b5cf6; padding: 0.75rem; z-index: 1000; text-align: center;">
                    <p style="margin: 0; color: #6b21a8;">
                        <i class="fas fa-info-circle"></i> 
                        Â¶ÇneedcompletewholeBillingFeaturesÔºåplease <a href="auth.html" style="color: #7c3aed; text-decoration: underline;">heavynewLogin</a> or 
                        <button onclick="window.location.reload()" style="background: #8b5cf6; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; margin-left: 0.5rem;">heavynewLoadpage</button>
                        <button onclick="document.getElementById('billing-auth-notification').remove()" style="background: transparent; border: none; color: #6b21a8; margin-left: 1rem;">‚úï</button>
                    </p>
                </div>
            `;
            document.body.insertBefore(notification, document.body.firstChild);
            
            // adjustpageContentFlooroffset
            const mainContent = document.querySelector('.billing-container');
            if (mainContent) {
                mainContent.style.marginTop = '60px';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('Billing pageLoading...');
            
            // üî• MobileforcemodifypricingcardWidth
            function forceMobilePricingWidth() {
                if (window.innerWidth <= 768) {
                    const monthlyPlan = document.getElementById('monthly-plan');
                    const yearlyPlan = document.getElementById('yearly-plan');
                    const pricingContainer = document.getElementById('pricing-container');
                    
                    if (monthlyPlan) {
                        monthlyPlan.style.maxWidth = 'none';
                        monthlyPlan.style.width = '100%';
                        monthlyPlan.style.marginLeft = '0';
                        monthlyPlan.style.marginRight = '0';
                        console.log('‚úÖ MonthlycardWidthalreadyforcesetas 100%');
                    }
                    
                    if (yearlyPlan) {
                        yearlyPlan.style.maxWidth = 'none';
                        yearlyPlan.style.width = '100%';
                        yearlyPlan.style.marginLeft = '0';
                        yearlyPlan.style.marginRight = '0';
                        console.log('‚úÖ YearlycardWidthalreadyforcesetas 100%');
                    }
                    
                    if (pricingContainer) {
                        pricingContainer.style.padding = '0';
                        pricingContainer.style.maxWidth = '100%';
                        console.log('‚úÖ pricingContainerinnerË∑ùalreadyadjust');
                    }
                    
                    // adjust plans-section ÁöÑ padding
                    const plansSection = document.querySelector('.plans-section');
                    if (plansSection) {
                        plansSection.style.padding = '0.25rem'; // leftrightÂêÑÁïô 0.25rem ËæπË∑ù
                        console.log('‚úÖ plans-section innerË∑ùalreadyadjustas 0.25rem');
                    }
                }
            }
            
            // Execute immediately + Ë¶ñÁ™óadjusttimeexecuteline
            forceMobilePricingWidth();
            window.addEventListener('resize', forceMobilePricingWidth);

            // InitializeunifiedSidebar
            window.billingSidebar = new VaultCaddySidebar('billing');

            // Initializepage
            initBillingPage();
            
            // Process Stripe paymentCallback
            handlePaymentSuccess();
            
            // Check Credits YesNoexpired
            checkCreditsExpiry();
            
            // ListenLanguagechangeupdateEvent
            window.addEventListener('languageChanged', function(e) {
                console.log('Billing: Languagealreadychangeupdateas', e.detail.language);
                // heavynewApplyÁøªË≠Ø
                if (window.languageManager) {
                    window.languageManager.loadLanguage(e.detail.language);
                }
            });
        });

        function initBillingPage() {
            console.log('Billing page initialized');
        }

        // managementPlan
        function managePlan() {
            window.VaultCaddyNavbar.showNotification('Plan management coming soon!', 'info');
        }

        // Purchase Credits
        function purchaseCredits(credits, price) {
            console.log(`Ë≥ºË≤∑ ${credits} creditsÔºåPricing $${price}`);
            
            // Use StripeManager ProcessË≥ºË≤∑
            if (window.StripeManager) {
                window.StripeManager.purchaseCredits(credits);
            } else {
                alert('Stripe managernotLoadÔºåpleaseRefreshpageRetry');
            }
        }

        // Initialize Stripe payment
        function initializeStripePayment(credits, price) {
            // herewill‰æÜwillwholecombine Stripe Checkout
            window.VaultCaddyNavbar.showNotification(`correctinInitialize ${credits} Credits Ë≥ºË≤∑ÊµÅÁ®ã...`, 'info');
            
            // Ê®°Êì¨paymentSuccess
            setTimeout(() => {
                simulatePaymentSuccess(credits);
            }, 2000);
        }

        // Ê®°Êì¨paymentSuccessandUpdate Credits
        function simulatePaymentSuccess(credits) {
            // Updatelocal Credits QuantityÔºàactualinternationalupshouldshouldfrom‰º∫ÊúçdeviceGetÔºâ
            const currentCredits = parseInt(document.querySelector('.stat-value').textContent) || 0;
            const newCredits = currentCredits + credits;
            
            // Update UI Show
            document.querySelector('.stat-value').textContent = newCredits;
            
            window.VaultCaddyNavbar.showNotification(`SuccessË≥ºË≤∑ ${credits} CreditsÔºÅWhenfrontBalanceÔºö${newCredits} Credits`, 'success');
        }

        // ‚úÖ unifiedÁöÑsubscribePlanFunctionÔºà2025-11-22 UpdateÔºâ
        function subscribeToPlan(planType) {
            console.log(`Start ${planType} PlansubscribeÊµÅÁ®ã`);
            
            // Use StripeManager Processsubscribe
            if (window.StripeManager && window.StripeManager.subscribeToPlan) {
                window.StripeManager.subscribeToPlan(planType);
            } else {
                console.error('‚ùå StripeManager notLoad');
                alert('systemInitializemiddleÔºåpleaseÁ®çbackagainË©¶');
            }
            
            return;
            
            // === todownYesoldlogicÔºàreserve‰ΩúasÂèÉËÄÉÔºâ===
            
            // ‚úÖ newpricingPlanÔºà2025-12-09 UpdateÔºâ
            // monthly fee: HKD $58/monthÔºåContains 100 Credits + exceedexitback HKD $0.5/page
            // annual fee: HKD $46/monthÔºà$552/yearÔºâÔºåContains 1,200 Credits + exceedexitback HKD $0.5/page
            
            // ‚úÖ Stripe Áî¢ÂìÅMapÔºà2025-12-09 UpdateÔºâ
            // monthly fee: prod_TSmKnHeaQVxZXC - HKD $58/month + UseÈáèBilling
            // annual fee: prod_TSsEWI5bv9pSkz - HKD $552/year + UseÈáèBilling
            const stripeProductIds = {
                'monthly': 'prod_TSmKnHeaQVxZXC',  // VaultCaddy monthly fee
                'yearly': 'prod_TSsEWI5bv9pSkz'     // VaultCaddy annual fee
            };
            
            // Credits Map - RootÊìötimebetweenÈÄ±period
            const creditsMap = {
                'monthly': { 
                    credits: 100, 
                    duration: '1ÂÄãmonth',
                    price: 'HKD $58',
                    displayPrice: 'HKD $58/month'
                },
                'yearly': { 
                    credits: 1200, 
                    duration: '12ÂÄãmonth',
                    price: 'HKD $552',
                    displayPrice: 'HKD $46/month (Yearly $552)'
                }
            };
            
            const paymentLink = stripeLinks[planType];
            const creditsInfo = creditsMap[planType];
            
            if (!paymentLink || paymentLink.includes('REPLACE_WITH_YOUR')) {
                console.error('‚ö†Ô∏è Payment link yetnotSettings');
                alert('‰ªòfeeFeaturescorrectinSettingsmiddleÔºåpleaseÁ®çbackagainË©¶orËÅØÁπ´ÂÆ¢Êúç„ÄÇ\n\nTipsÔºömanagementÂì°needneedin Stripe CreatenewÁöÑ Payment Links„ÄÇ');
                return;
            }
            
            console.log('=== subscribedetailsInformation ===');
            console.log('BillingÈÄ±period:', planType === 'yearly' ? 'annual fee' : 'monthly fee');
            console.log('Credits:', creditsInfo.credits);
            console.log('Haseffectperiod:', creditsInfo.duration);
            console.log('Pricing:', creditsInfo.displayPrice);
            console.log('paymentlink:', paymentLink);
            
            // ShowConfirmË®äÊÅØ
            const confirmMessage = `Confirmsubscribe VaultCaddy Pro (${planType === 'yearly' ? 'annual fee' : 'monthly fee'})Ôºü

youwillÁç≤ÂæóÔºö
‚Ä¢ ${creditsInfo.credits} Credits
‚Ä¢ HaseffectperiodÔºö${creditsInfo.duration}
‚Ä¢ Then USD $0.06 per page
‚Ä¢ Unlimited Batch Processing
‚Ä¢ Excel/CSV Export
‚Ä¢ QuickBooks Integration
‚Ä¢ 8 typeLanguagesupport

totalÂÉπÔºö${creditsInfo.displayPrice}

clickConfirmbackwillfrontÂæÄsafeallpaymentpage„ÄÇ`;
            
            if (confirm(confirmMessage)) {
                // ShowProcessË®äÊÅØ
                if (window.VaultCaddyNavbar) {
                    window.VaultCaddyNavbar.showNotification('correctinredirecttosafeallpaymentpage...', 'info');
                }
                
                // SettingssubscribeÂÖÉDatatolocalstorage
                localStorage.setItem('pendingSubscription', JSON.stringify({
                    planType: 'pro',  // unifiedas Pro Plan
                    period: planType,  // monthly or yearly
                    credits: creditsInfo.credits,
                    duration: creditsInfo.duration,
                    price: creditsInfo.price,
                    timestamp: new Date().toISOString()
                }));
                
                // redirectto Stripe Payment Link
                setTimeout(() => {
                    window.open(paymentLink, '_self');
                }, 1000);
            }
        }
        
        // ProcesspaymentSuccessCallback
        function handlePaymentSuccess() {
            // CheckYesNoHasPendingÁöÑsubscribe
            const pendingSubscription = localStorage.getItem('pendingSubscription');
            if (pendingSubscription) {
                try {
                    const subscription = JSON.parse(pendingSubscription);
                    console.log('detecttoPendingÁöÑsubscribe:', subscription);
                    
                    // Êéà‰∫à Credits
                    grantSubscriptionCredits(subscription);
                    
                    // ShowSuccessË®äÊÅØ
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `Successsubscribe ${subscription.planType.toUpperCase()} PlanÔºÅalreadyÁç≤Âæó ${subscription.credits} Credits`, 
                            'success'
                        );
                    }
                    
                    // cleanupPendingÁöÑsubscribeData
                    localStorage.removeItem('pendingSubscription');
                    
                    // UpdateUsersubscribeStatus
                    localStorage.setItem('userPlan', subscription.planType);
                    localStorage.setItem('userPlanPeriod', subscription.period);
                    
                } catch (error) {
                    console.error('ProcesssubscribeCallbackFailed:', error);
                }
            }
        }
        
        // Êéà‰∫àsubscribe Credits
        function grantSubscriptionCredits(subscription) {
            const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const newCredits = currentCredits + subscription.credits;
            
            // Settings Credits toperiodtimebetween
            const expiryDate = new Date();
            if (subscription.period === 'yearly') {
                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
            } else {
                expiryDate.setMonth(expiryDate.getMonth() + 1);
            }
            
            // Updatelocalstorage
            localStorage.setItem('userCredits', newCredits.toString());
            localStorage.setItem('creditsExpiry', expiryDate.toISOString());
            localStorage.setItem('subscriptionCredits', subscription.credits.toString());
            
            console.log(`alreadyÊéà‰∫à ${subscription.credits} CreditsÔºånewBalance: ${newCredits}`);
            console.log(`Credits toperiodtimebetween: ${expiryDate.toLocaleDateString()}`);
            
            // Update UI Show
            const creditsElements = document.querySelectorAll('.stat-value');
            if (creditsElements.length > 0) {
                const creditsElement = creditsElements[creditsElements.length - 1];
                creditsElement.textContent = newCredits;
            }
        }
        
        // Check Credits YesNoexpired
        function checkCreditsExpiry() {
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            
            if (creditsExpiry && subscriptionCredits > 0) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                
                console.log('Credits CheckÔºö');
                console.log('toperiodtimebetween:', expiryDate.toLocaleDateString());
                console.log('Whenfronttimebetween:', now.toLocaleDateString());
                console.log('subscribe Credits:', subscriptionCredits);
                
                if (now > expiryDate) {
                    // Credits ExpiredÔºåRemovesubscribe Credits
                    console.log('Credits ExpiredÔºåcorrectinRemove...');
                    
                    const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
                    const newCredits = Math.max(0, currentCredits - subscriptionCredits);
                    
                    // Updatelocalstorage
                    localStorage.setItem('userCredits', newCredits.toString());
                    localStorage.removeItem('creditsExpiry');
                    localStorage.removeItem('subscriptionCredits');
                    localStorage.removeItem('userPlan');
                    localStorage.removeItem('userPlanPeriod');
                    
                    // Update UI Show
                    const creditsElements = document.querySelectorAll('.stat-value');
                    if (creditsElements.length > 0) {
                        const creditsElement = creditsElements[creditsElements.length - 1];
                        creditsElement.textContent = newCredits;
                    }
                    
                    // ShowexpiredNotifications
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `Yoursubscribe Credits ExpiredandbyRemove„ÄÇÂâ©È§ò ${newCredits} Credits`, 
                            'warning'
                        );
                    }
                    
                    console.log(`alreadyRemove ${subscriptionCredits} expired CreditsÔºånewBalance: ${newCredits}`);
                } else {
                    // Credits yetnotexpiredÔºåShowÂâ©È§òtimebetween
                    const timeLeft = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
                    console.log(`subscribe Credits returnHas ${timeLeft} daytoperiod`);
                }
            }
        }
        
        // Get Credits StatusInformation
        function getCreditsStatus() {
            const userCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const userPlan = localStorage.getItem('userPlan');
            
            let status = {
                totalCredits: userCredits,
                subscriptionCredits: subscriptionCredits,
                purchasedCredits: userCredits - subscriptionCredits,
                plan: userPlan || 'none',
                hasSubscription: subscriptionCredits > 0 && creditsExpiry,
                daysLeft: 0
            };
            
            if (creditsExpiry) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                status.daysLeft = Math.max(0, Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24)));
            }
            
            return status;
        }

        // Switchmonthly fee/annual fee
        function togglePricingPlan(planType) {
            // UpdateButtonStatus
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-plan="${planType}"]`).classList.add('active');
            
            // UpdateButtonStyle
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                if (btn.classList.contains('active')) {
                    btn.style.background = 'white';
                    btn.style.color = '#1f2937';
                } else {
                    btn.style.background = '#f9fafb';
                    btn.style.color = '#6b7280';
                }
            });
            
            if (planType === 'monthly') {
                // Showmonthly feeÔºåHideannual fee
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'none';
                });
            } else {
                // Showannual feeÔºåHidemonthly fee
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
            }
        }
        
        // ==================== Email Verification check ====================
        (async function initEmailVerification() {
            try {
                // Wait Firebase andVerification checkdeviceInitialize
                await new Promise((resolve) => {
                    const checkReady = setInterval(() => {
                        if (window.emailVerificationChecker && firebase.auth) {
                            clearInterval(checkReady);
                            resolve();
                        }
                    }, 100);
                    
                    setTimeout(() => {
                        clearInterval(checkReady);
                        resolve();
                    }, 10000);
                });
                
                // CheckverifyStatusandShowTipsÔºànotÈòªÊìãFeaturesÔºâ
                await checkEmailVerification({ showNotice: true, blockPage: false });
            } catch (error) {
                console.error('‚ùå Email Verification checkFailed:', error);
            }
        })();
    </script>

    <!-- üî• Hamburger menuexceedlevelSimplerepairPlan -->
    <script>
        console.log('üî• StartInitializeHamburger menu...');
        
        // OpenSidebarFunction
        function openSidebar() {
            console.log('üîµ OpenSidebar');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '0';
                overlay.style.display = 'block';
                overlay.style.opacity = '1';
                document.body.style.overflow = 'hidden';
                console.log('‚úÖ SidebarOpened');
            }
        }
        
        // CloseSidebarFunction
        function closeSidebar() {
            console.log('üîµ CloseSidebar');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '-100%';
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 300); // WaitAnimationCompleteÔºàand CSS transition consistentÔºâ
                document.body.style.overflow = 'auto';
                console.log('‚úÖ SidebaralreadyClose');
            }
        }
        
        // exceedlevelSimpleÁöÑInitializeFunction
        function simpleInitMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (!btn || !overlay) {
                console.log('‚è≥ ElementNot foundÔºå200msbackRetry');
                setTimeout(simpleInitMenu, 200);
                return;
            }
            
            console.log('‚úÖ findtoÊâÄHasElementÔºÅ');
            
            // ButtonclickProcess
            btn.addEventListener('click', function() {
                console.log('üîµ ButtonbyclickÔºÅ');
                openSidebar();
            });
            
            // touchProcess
            btn.addEventListener('touchend', function(e) {
                e.preventDefault();
                console.log('üîµ touchEventÔºÅ');
                openSidebar();
            });
            
            // MaskclickClose
            overlay.addEventListener('click', function() {
                console.log('üîµ clickMaskClose');
                closeSidebar();
            });
            
            // MasktouchClose
            overlay.addEventListener('touchend', function(e) {
                e.preventDefault();
                console.log('üîµ touchMaskClose');
                closeSidebar();
            });
            
            console.log('‚úÖ ÊâÄHasEventListendevicealreadybind');
        }
        
        // immediatelyTryInitialize
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', simpleInitMenu);
        } else {
            setTimeout(simpleInitMenu, 100);
        }
        
        // exposeFunctionsupplySidebarinnerlinkUse
        window.closeMobileSidebar = closeSidebar;
    </script>

    <!-- ‚úÖ Stripe Checkout Session CreateFunction -->
    <script>
        /**
         * Create Stripe Checkout Session andJump to
         * @param {string} planType - 'monthly' or 'yearly'
         * @param {Event} event - clickEvent
         * @param {boolean} isTest - YesNoastestmodeÔºàcanselectÔºåDefault falseÔºâ
         */
        async function createCheckoutSession(planType, event, isTest = false) {
            console.log(`üõí Create ${planType} subscribe...`, { isTest });
            
            // CheckUserYesNoÁôªÈåÑ
            if (!window.simpleAuth || !window.simpleAuth.isLoggedIn()) {
                alert('Please firstÁôªÈåÑ');
                window.location.href = 'auth.html';
                return;
            }
            
            // GetButtonElementÔºàin try outerdefinitionÔºåavoid‰ΩúuseÂüüÂïèÈ°åÔºâ
            const button = event?.target || event?.currentTarget;
            const originalText = button?.textContent || 'Get Started';
            
            try {
                // ShowLoadStatus
                if (button) {
                    button.disabled = true;
                    button.textContent = 'correctinJump totopaymentpage...';
                    button.style.opacity = '0.6';
                }
                
                // GetWhenfrontUser
                const currentUser = window.simpleAuth.getCurrentUser();
                const userEmail = currentUser.email;
                const userId = currentUser.uid;
                
                console.log(`üë§ UserInformation:`, { userEmail, userId });
                
                // adjustuse Firebase Function Create Checkout Session
                const createSession = firebase.functions().httpsCallable('createStripeCheckoutSession');
                
                console.log(`üìû adjustuse Firebase Function...`, { planType, userId, email: userEmail, isTest });
                const result = await createSession({
                    planType: planType,
                    userId: userId,
                    email: userEmail,
                    isTest: isTest  // üß™ passtestmodemark
                });
                
                console.log(`‚úÖ Checkout Session CreateSuccess:`, result.data);
                
                // Jump toto Stripe Checkout
                if (result.data && result.data.url) {
                    window.location.href = result.data.url;
                } else {
                    throw new Error('notreceivetopaymentpage URL');
                }
                
            } catch (error) {
                console.error('‚ùå CreatepaymentwillwordFailed:', error);
                console.error('ErrorDetails:', error.code, error.message);
                
                // RestoreButtonStatus
                if (button) {
                    button.disabled = false;
                    button.textContent = originalText;
                    button.style.opacity = '1';
                }
                
                // ShowÂèãÂ•ΩÁöÑErrorInformation
                let errorMsg = 'CreatepaymentwillwordFailedÔºåpleaseRetryorËÅØÁπ´ÂÆ¢Êúç';
                
                if (error.code === 'functions/unauthenticated') {
                    errorMsg = 'Please firstÁôªÈåÑ';
                    alert(errorMsg);
                    window.location.href = 'auth.html';
                } else if (error.code === 'functions/not-found') {
                    errorMsg = 'subscribeplanSettingsErrorÔºåpleaseËÅØÁπ´ÂÆ¢Êúç';
                    alert(errorMsg);
                } else if (error.message) {
                    errorMsg = `CreatepaymentwillwordFailed: ${error.message}`;
                    alert(errorMsg);
                } else {
                    alert(errorMsg);
                }
            }
        }
        
        // exposetoallbureau
        window.createCheckoutSession = createCheckoutSession;
    </script>

    <!-- CreateProjectModal -->
    <div id="createProjectModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 2rem; width: 90%; max-width: 500px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);">
            <h2 style="font-size: 1.5rem; font-weight: 600; color: #1f2937; margin: 0 0 1rem 0;">CreatenewProject</h2>
            <p style="color: #6b7280; font-size: 0.875rem; margin: 0 0 1.5rem 0;">inputProjectNametoCreatenewÁöÑDocumentProject</p>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">ProjectName</label>
                <input 
                    type="text" 
                    id="projectName" 
                    placeholder="for exampleÔºö2025year1monthInvoice"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem; color: #1f2937; box-sizing: border-box;"
                    onkeypress="if(event.key==='Enter') createProject()">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 0.75rem;">
                <button 
                    onclick="closeCreateProjectModal()" 
                    style="background: #ffffff; border: 1px solid #d1d5db; color: #374151; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;">
                    Cancel
                </button>
                <button 
                    onclick="createProject()" 
                    style="background: #3b82f6; border: none; color: white; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;">
                    Create
                </button>
            </div>
        </div>
    </div>

    <script>
        // OpenCreateProjectModal
        function openCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            const input = document.getElementById('projectName');
            modal.style.display = 'flex';
            input.value = '';
            input.focus();
        }

        // CloseCreateProjectModal
        function closeCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            modal.style.display = 'none';
        }

        // CreatenewProject
        async function createProject() {
            const input = document.getElementById('projectName');
            const projectName = input.value.trim();
            
            if (!projectName) {
                alert('Please enter a project name');
                return;
            }
            
            // Saveto Firebase
            try {
                const projectData = await window.simpleDataManager.createProject(projectName);
                console.log('‚úÖ ProjectalreadySaveto Firebase:', projectData);
                
                // CloseModal
                closeCreateProjectModal();
                
                // üî• repairÔºöUse projectData.id ËÄåNot projectData Êú¨Ë∫´
                const projectId = projectData.id;
                console.log('üöÄ Jump totonewProjectpage:', projectId);
                
                // Jump totonewProjectpage
                window.location.href = `firstproject.html?project=${projectId}`;
            } catch (error) {
                console.error('‚ùå Saveto Firebase Failed:', error);
                alert('CreateProjectFailedÔºåpleaseRetry');
                return;
            }
        }

        // clickMaskCloseModal
        document.getElementById('createProjectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCreateProjectModal();
            }
        });
    </script>

</body>
</html>
