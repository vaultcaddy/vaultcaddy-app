<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    
    <!-- ğŸ”’ é é¢ä¿è­· -->
    <style>
        body.auth-checking { visibility: hidden !important; }
        .auth-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; align-items: center; justify-content: center; z-index: 9999; visibility: visible !important; }
        body.auth-ready .auth-loading { display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <script>
        document.documentElement.classList.add('auth-checking');
        if (document.body) { document.body.classList.add('auth-checking'); } 
        else { document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('auth-checking'); }); }
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="billing_credits">Billingèˆ‡ç©åˆ† - VaultCaddy</title>
    <meta name="description" content="View and manage your VaultCaddy subscription and billing information">
    <meta property="og:title" content="Billing & Credits - VaultCaddy">
    <meta property="og:description" content="VaultCaddy - Professional document processing with AI technology">
    <meta property="og:url" content="https://vaultcaddy.com/billing">
    <meta property="og:type" content="website">
    <link rel="canonical" href="https://vaultcaddy.com/billing">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../pages.css">
    <link rel="stylesheet" href="../dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script defer src="../config.js"></script>
    <script defer src="../translations.js"></script>
    
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-functions-compat.js"></script>
    
    <!-- Firebase Settingså’Œæ•¸æ“šç®¡ç†å™¨ -->
    <script defer src="../firebase-config.js?v=20251105-force-init"></script>
    <!-- ğŸ”¥ æ–°çš„ç°¡åŒ–ç³»çµ± -->
    <script defer src="../simple-auth.js?v=20251105-force-init"></script>
    <script defer src="../user-profile-manager.js?v=20251120"></script>
    <script defer src="../simple-data-manager.js?v=20251105-force-init"></script>
    
    <!-- Email é©—è­‰æª¢æŸ¥ -->
    <script defer src="../email-verification-check.js"></script>
    
    <!-- å°èˆªæ¬„äº¤äº’Features -->
    <script defer src="../navbar-interactions.js?v=20251108"></script>
    
    <!-- âœ… Languageç®¡ç†å™¨ï¼ˆå¿…é ˆåœ¨å°èˆªæ¬„ä¹‹å‰è¼‰å…¥ï¼‰-->
    <script defer src="language-manager.js?v=20251120"></script>
    
    <!-- âœ… çµ±ä¸€å°èˆªæ¬„ç³»çµ±ï¼šéœæ…‹ HTML + navbar-component.js -->
    <script defer src="../navbar-component.js?v=20251120-unified"></script>
    <script defer src="../sidebar-component.js?v=20251107-rebuild"></script>
    <style>
        body {
            background: #ffffff;
            color: #1f2937;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .account-container {
            display: flex;
            min-height: calc(100vh - 60px);
            padding-top: 60px;
        }
        
        .sidebar {
            width: 280px;
            background: #f8fafc;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            top: 60px;
            bottom: 0;
            left: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 1.5rem 1rem 1rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .sidebar-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }
        
        .sidebar-section {
            padding: 1rem 0;
            border-top: 1px solid #e2e8f0;
        }
        
        .sidebar-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: 0 0 0.5rem 1rem;
        }
        
        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            background: #ffffff;
            margin-top: auto;
        }
        
        .sidebar-stats {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .stat-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 1rem 0;
        }
        
        .sidebar-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .sidebar-nav .nav-item {
            margin: 0;
        }
        
        .sidebar-nav .nav-item a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: #6b7280;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-nav .nav-item.active a {
            background: #eff6ff;
            color: #2563eb;
            border-left-color: #2563eb;
        }
        
        .sidebar-nav .nav-item a:hover {
            background: #f1f5f9;
            color: #374151;
        }
        
        .sidebar-nav .nav-item a i {
            width: 20px;
            margin-right: 0.75rem;
            font-size: 1rem;
        }
        
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem 3rem;
            overflow-y: auto;
            min-height: calc(100vh - 60px);
            background: #ffffff;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .page-subtitle {
            color: #6b7280;
            margin: 0;
            font-size: 1rem;
        }
        
        .billing-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .billing-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .card-subtitle {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            width: 100%;
            justify-content: center;
        }
        
        .btn-primary {
            background: #7c3aed;
            color: white;
        }
        
        .btn-primary:hover {
            background: #6d28d9;
        }
        
        .btn-secondary {
            background: transparent;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            background: #f3f4f6;
            color: #1f2937;
        }
        
        .plans-section {
            margin-bottom: 3rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0 0 2rem 0;
            color: #1f2937;
        }
        
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .plan-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .plan-card.featured {
            border-color: #7c3aed;
            background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.15);
        }
        
        .plan-card {
            transition: all 0.3s ease;
        }
        
        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .plan-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.25);
        }
        
        .plan-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .plan-description {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .plan-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 1.5rem 0;
        }
        
        .plan-price span {
            font-size: 1rem;
            font-weight: 400;
            color: #6b7280;
        }
        
        .plan-features {
            list-style: none;
            margin: 0 0 2rem 0;
            padding: 0;
        }
        
        .plan-features li {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .plan-features li i {
            color: #10b981;
            margin-right: 0.75rem;
            width: 16px;
        }
        
        .current-plan-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #10b981;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .pricing-toggle {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card:nth-child(1) {
            animation-delay: 0.1s;
        }
        
        .plan-card:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .plan-card:nth-child(3) {
            animation-delay: 0.3s;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .credit-option {
            transition: all 0.2s ease;
        }
        
        .credit-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
            border-color: #7c3aed !important;
        }
        
        .credit-option.popular {
            animation: pulse-border 2s infinite;
        }
        
        @keyframes pulse-border {
            0% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.7);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(124, 58, 237, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0);
            }
        }
        
        .cta-btn {
            width: 100%;
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.4);
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .cta-btn:hover::before {
            left: 100%;
        }
        
        /* ğŸ§ª æ¸¬è©¦æ¨¡å¼åˆ‡æ›æŒ‰éˆ•æ¨£å¼ */
        #test-mode-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.15);
        }
        
        #test-mode-info code {
            background: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 600;
            color: #dc2626;
        }
        
        @media (max-width: 1024px) {
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .billing-overview {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            /* ğŸ§ª æ¸¬è©¦æ¨¡å¼æŒ‰éˆ•åœ¨æ‰‹æ©Ÿä¸Šçš„æ¨£å¼ */
            #test-mode-toggle {
                flex-direction: column;
                gap: 0.5rem !important;
                padding: 0.75rem !important;
            }
            
            #test-mode-toggle label {
                font-size: 0.75rem !important;
            }
            
            #test-mode-info {
                padding: 0.75rem !important;
                font-size: 0.75rem !important;
            }
        }
    
        @media (max-width: 768px) {
            /* å°èˆªæ¬„ */
            .vaultcaddy-navbar {
                padding: 0 0.75rem !important;
            }
            
            /* é¡¯ç¤ºHamburger menuæŒ‰éˆ• */
            #mobile-menu-btn {
                display: block !important;
            }
            
            /* Mobileé¡¯ç¤º logoï¼Œéš±è—æ–‡å­— */
            .desktop-logo {
                display: flex !important; /* âœ… é¡¯ç¤º V åœ–æ¨™ */
            }
            
            .desktop-logo-text {
                display: none !important; /* âœ… éš±è— "VaultCaddy" æ–‡å­— */
            }
            
            /* å®šåƒ¹å¡ç‰‡Mobileï¼šæ”¹ç‚ºä¸Šä¸‹æ’åˆ—ï¼Œå¹´è²»åœ¨ä¸Š */
            #pricing-container {
                grid-template-columns: 1fr !important;
                gap: 1.5rem !important;
                padding: 0 !important; /* ğŸ”¥ ç§»é™¤å…§è·ï¼Œè®“å¡ç‰‡æœ‰ç©ºé–“æ“´å±• */
                max-width: 100% !important;
            }
            
            /* ğŸ”¥ plans-section Mobileä¹Ÿè¦èª¿æ•´ */
            .plans-section {
                padding: 0.5rem !important; /* å·¦å³å„ç•™ 0.5rem è¾¹è· */
            }
            
            /* å¹´è²»æ–¹æ¡ˆç§»åˆ°ç¬¬ä¸€ä½ */
            #yearly-plan {
                order: 1 !important;
            }
            
            /* æœˆè²»æ–¹æ¡ˆç§»åˆ°ç¬¬äºŒä½ */
            #monthly-plan {
                order: 2 !important;
            }
            
            /* ğŸ”¥ å®šåƒ¹å¡ç‰‡Featuresåˆ—è¡¨ï¼šæ”¹ç‚º 2 åˆ—é¡¯ç¤º */
            .pricing-card div[style*="grid-template-columns: repeat(3, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.5rem 0.75rem !important;
            }
            
            /* ğŸ”¥ å¼·åˆ¶ç§»é™¤å·¦å³å¯¬åº¦é™åˆ¶ï¼Œè®“å¡ç‰‡ä½”æ»¿å®¹å™¨ */
            html body .pricing-card[style],
            html body #monthly-plan[style],
            html body #yearly-plan[style],
            html body div[id="monthly-plan"],
            html body div[id="yearly-plan"] {
                max-width: none !important;
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                box-sizing: border-box !important;
            }
        
        /* Mobile UI å„ªåŒ–æ¨£å¼ */
/* é©ç”¨æ–¼ dashboard.html, firstproject.html, account.html, billing.html */

@media (max-width: 768px) {
    /* ==================== é€šç”¨æ¨£å¼ ==================== */
    
    /* ä¸»å®¹å™¨ */
    body {
        padding-top: 60px !important;
    }
    
    .main-container,
    .content-wrapper {
        padding: 0.75rem !important;
        margin: 0 !important;
    }
    
    /* æ‰€æœ‰å¡ç‰‡ */
    .card,
    div[style*="border-radius"][style*="padding"] {
        padding: 1rem !important;
        margin-bottom: 1rem !important;
    }
    
    /* æ¨™é¡Œ */
    h1 {
        font-size: 1.5rem !important;
    }
    
    h2 {
        font-size: 1.25rem !important;
    }
    
    h3 {
        font-size: 1.125rem !important;
    }
    
    /* æŒ‰éˆ• */
    button,
    .btn {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
    }
    
    /* è¼¸å…¥æ¡† */
    input,
    select,
    textarea {
        font-size: 1rem !important;
        padding: 0.75rem !important;
    }
    
    /* ==================== Dashboard å°ˆç”¨ ==================== */
    
    /* Projectåˆ—è¡¨ */
    .projects-header {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .projects-header > div {
        width: 100% !important;
    }
    
    /* è¡¨æ ¼ */
    table {
        font-size: 0.875rem !important;
    }
    
    table th,
    table td {
        padding: 0.5rem !important;
    }
    
    /* éš±è—éƒ¨åˆ†åˆ—ï¼ˆMobileï¼‰ */
    table th:nth-child(3),
    table td:nth-child(3) {
        display: none !important; /* éš±è— CREATED åˆ— */
    }
    
    /* ==================== First Project å°ˆç”¨ ==================== */
    
    /* DocumentTypeSelector */
    .document-type-selector {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
    }
    
    /* Upload area */
    .upload-area {
        padding: 2rem 1rem !important;
    }
    
    /* ExportæŒ‰éˆ•çµ„ */
    .export-buttons {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .export-buttons button {
        width: 100% !important;
    }
    
    /* Documentè¡¨æ ¼ */
    #team-project-tbody tr {
        font-size: 0.8125rem !important;
    }
    
    /* éš±è—éƒ¨åˆ†åˆ— */
    .document-table th:nth-child(4),
    .document-table td:nth-child(4),
    .document-table th:nth-child(5),
    .document-table td:nth-child(5) {
        display: none !important; /* éš±è—Amountå’ŒDateåˆ— */
    }
    
    /* ==================== Account å°ˆç”¨ ==================== */
    
    /* Profileå¡ç‰‡ */
    .profile-card {
        flex-direction: column !important;
        text-align: center !important;
    }
    
    .profile-avatar {
        margin: 0 auto 1rem !important;
    }
    
    /* Credits Usage */
    .credits-usage {
        flex-direction: column !important;
    }
    
    .credits-bar {
        width: 100% !important;
    }
    
    /* è¡¨å–® */
    .form-group {
        margin-bottom: 1rem !important;
    }
    
    .form-row {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    /* ==================== Billing å°ˆç”¨ ==================== */
    
    /* Pricingå¡ç‰‡ */
    .pricing-cards {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    /* äº¤æ˜“è¨˜éŒ„è¡¨æ ¼ */
    .transaction-table {
        font-size: 0.8125rem !important;
    }
    
    .transaction-table th:nth-child(2),
    .transaction-table td:nth-child(2) {
        display: none !important; /* éš±è—Descriptionåˆ— */
    }
    
    /* ==================== Modal ==================== */
    
    .modal-content {
        width: 95% !important;
        max-width: 95% !important;
        margin: 1rem !important;
        padding: 1rem !important;
    }
    
    .modal-header {
        padding: 1rem !important;
    }
    
    .modal-body {
        padding: 1rem !important;
    }
    
    .modal-footer {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .modal-footer button {
        width: 100% !important;
    }
    
    /* ==================== Sidebar ==================== */
    
    .sidebar {
        width: 100% !important;
        position: fixed !important;
        top: 60px !important;
        left: -100% !important;
        height: calc(100vh - 60px) !important;
        transition: left 0.3s ease !important;
        z-index: 999 !important;
    }
    
    .sidebar.active {
        left: 0 !important;
    }
    
    /* ==================== å…¶ä»–å„ªåŒ– ==================== */
    
    /* éš±è—ä¸å¿…è¦çš„å…ƒç´  */
    .desktop-only {
        display: none !important;
    }
    
    /* é¡¯ç¤ºMobileå…ƒç´  */
    .mobile-only {
        display: block !important;
    }
    
    /* é–“è·èª¿æ•´ */
    section {
        padding: 1.5rem 0 !important;
    }
    
    /* æŒ‰éˆ•çµ„ */
    .button-group {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .button-group button,
    .button-group a {
        width: 100% !important;
    }
}

        /* Billing ç‰¹å®šæ¨£å¼ */
        @media (max-width: 768px) {
            .billing-header {
                flex-direction: column !important;
            }
            
            .plan-selector {
                width: 100% !important;
            }
            
            .payment-method {
                flex-direction: column !important;
            }
        }
        
        /* ==================== Modalæ¨£å¼ ==================== */
        .modal-overlay {
            display: none !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            background: rgba(0, 0, 0, 0.5) !important;
            z-index: 9999 !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .modal-overlay.active {
            display: flex !important;
        }

        .modal-content {
            background: #ffffff !important;
            border-radius: 12px !important;
            padding: 2rem !important;
            width: 90% !important;
            max-width: 500px !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
            position: relative !important;
            z-index: 10000 !important;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #1f2937;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .btn-cancel {
            background: #ffffff;
            border: 1px solid #d1d5db;
            color: #374151;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-cancel:hover {
            background: #f9fafb;
        }

        .btn-create {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-create:hover {
            opacity: 0.9;
        }
        
        </style>
    
    <script>
        // ç«‹å³åŸ·è¡Œï¼šç¢ºä¿é é¢å¯è¦‹
        (function() {
            console.log('ğŸš€ Billingé é¢ç«‹å³Initialize...');
            
            // ç¢ºä¿bodyå¯è¦‹
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            
            // ç¢ºä¿dashboardå®¹å™¨å¯è¦‹
            const dashboardContainer = document.querySelector('.dashboard-container');
            if (dashboardContainer) {
                dashboardContainer.style.display = 'flex';
                dashboardContainer.style.visibility = 'visible';
            }
            
            // ç¢ºä¿Sidebarå¯è¦‹
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.style.display = 'block';
                sidebar.style.visibility = 'visible';
            }
            
            // ç¢ºä¿ä¸»å…§å®¹å¯è¦‹
            const mainContent = document.querySelector('.main-content');
            if (mainContent) {
                mainContent.style.display = 'block';
                mainContent.style.visibility = 'visible';
            }
            
            console.log('âœ… Billingé é¢ç«‹å³InitializeComplete');
        })();
    </script>
    
    <!-- Stripe Manager -->
    <script defer src="../stripe-manager.js"></script>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="alternate icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="mobile-responsive.css">

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LWPEKNC7RQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LWPEKNC7RQ');
    </script>


    <!-- èµ„æºTips - ä¼˜åŒ–åŠ è½½é€Ÿåº¦ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
        <script src="/multilingual-data-sync.js"></script>
</head>
<body class="auth-checking">
    <!-- ğŸ”’ Auth åŠ è¼‰å‹•ç•« -->
    <div class="auth-loading">
        <div style="text-align: center;">
            <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
            <p style="color: #6b7280; font-size: 0.875rem;">Verifying identity...</p>
        </div>
    </div>
    
    <!-- å°èˆªæ¬„ -->
    <!-- çµ±ä¸€éœæ…‹å°èˆªæ¬„ -->
    <!-- âœ… çµ±ä¸€éœæ…‹å°èˆªæ¬„ -->
    <!-- âœ… çµ±ä¸€éœæ…‹å°èˆªæ¬„ï¼ˆèˆ‡ firstproject.html å®Œå…¨ä¸€è‡´ï¼‰-->
    <nav class="vaultcaddy-navbar" id="main-navbar" style="position: fixed; top: 0; left: 0; right: 0; height: 60px; background: #ffffff; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; justify-content: space-between; padding: 0 2rem; z-index: 1000; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);">
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <!-- Hamburger menuæŒ‰éˆ•ï¼ˆåƒ…æ‰‹æ©Ÿé¡¯ç¤ºï¼‰-->
            <button id="mobile-menu-btn" onclick="openMobileSidebar()" style="display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; color: #1f2937; font-size: 1.5rem;">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="index.html" style="display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: #1f2937; font-weight: 600; font-size: 1.125rem;">
                <div class="desktop-logo" style="width: 32px; height: 32px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.25rem;">
                    V
                </div>
                <div class="desktop-logo-text">
                    <div>VaultCaddy</div>
                    <div style="font-size: 0.75rem; color: #6b7280; font-weight: 400; text-transform: uppercase; letter-spacing: 0.05em;">AI DOCUMENT PROCESSING</div>
                </div>
            </a>
        </div>
        <div style="display: flex; align-items: center; gap: 2rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
                <a href="index.html#features" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Features</a>
                <a href="index.html#pricing" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Pricing</a>
                <a href="/blog/" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Learning Center</a>
                <a href="dashboard.html" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">Dashboard</a>
            </div>
            
            <div id="language-switcher" style="display: inline-block; margin-right: 1rem;"></div>
                <div id="user-menu" style="position: relative; display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s;">
                <div id="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem;">Y</div>
            </div>
        </div>
    </nav>
    
    <!-- æ‰‹æ©ŸSidebarèœå–® -->
    <div id="mobile-sidebar" style="position: fixed; top: 0; left: -100%; width: 280px; height: 100vh; background: white; z-index: 2000; transition: left 0.3s ease; box-shadow: 2px 0 10px rgba(0,0,0,0.1); overflow-y: auto;">
        <div style="padding: 1.5rem;">
            <!-- èœå–®é … -->
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                <a href="index.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-home" style="width: 20px; color: #667eea;"></i>
                    <span>Home</span>
                </a>
                <a href="index.html#features" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-star" style="width: 20px; color: #667eea;"></i>
                    <span>Features</span>
                </a>
                <a href="index.html#pricing" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-dollar-sign" style="width: 20px; color: #667eea;"></i>
                    <span>Pricing</span>
                </a>
                <a href="/blog/" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-graduation-cap" style="width: 20px; color: #667eea;"></i>
                    <span>Learning Center</span>
                </a>
                <a href="dashboard.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-th-large" style="width: 20px; color: #667eea;"></i>
                    <span>Dashboard</span>
                </a>
                
                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>

                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>
                
                <a href="privacy.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-shield-alt" style="width: 20px; color: #6b7280;"></i>
                    <span>Privacy Policy</span>
                </a>
                <a href="terms.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-file-contract" style="width: 20px; color: #6b7280;"></i>
                    <span>Terms of Service</span>
                </a>
            </div>
        </div>
    </div>
    </div>
    
    <!-- Sidebaré®ç½© -->
    <div id="mobile-sidebar-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1999; display: none;" onclick="closeMobileSidebar()"></div>
    
    <div id="user-dropdown" style="display: none; position: fixed; top: 70px; right: 2rem; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); padding: 1rem; min-width: 220px; z-index: 2000; border: 1px solid #e5e7eb;">
        <div style="padding: 0.75rem; border-bottom: 1px solid #f3f4f6;">
            <div style="font-weight: 600; font-size: 1rem; color: #1f2937; margin-bottom: 0.25rem;"><span>Credits</span>: <span id="dropdown-credits">0</span></div>
            <div style="font-size: 0.875rem; color: #6b7280;" id="dropdown-email">user@example.com</div>
        </div>
        <div style="padding: 0.5rem 0;">
            <a href="account.html" style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 6px; transition: background 0.2s; font-size: 0.9375rem;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                <span><i class="fas fa-user" style="margin-right: 0.75rem; color: #6b7280; width: 16px;"></i><span>Account</span></span>
                <span style="color: #9ca3af; font-size: 0.875rem;">âŒ˜A</span>
            </a>
            <a href="billing.html" style="display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 6px; transition: background 0.2s; font-size: 0.9375rem;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                <span><i class="fas fa-credit-card" style="margin-right: 0.75rem; color: #6b7280; width: 16px;"></i><span>Billing</span></span>
                <span style="color: #9ca3af; font-size: 0.875rem;">âŒ˜B</span>
            </a>
        </div>
        <div style="border-top: 1px solid #f3f4f6; padding-top: 0.5rem;">
            <button onclick="handleLogout()" style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; color: #ef4444; background: transparent; border: none; border-radius: 6px; cursor: pointer; transition: background 0.2s; font-size: 0.9375rem; text-align: left;" onmouseover="this.style.background='#fee2e2'" onmouseout="this.style.background='transparent'">
                <span><i class="fas fa-sign-out-alt" style="margin-right: 0.75rem; width: 16px;"></i><span>Logout</span></span>
                <span style="color: #fca5a5; font-size: 0.875rem;">âŒ˜Q</span>
            </button>
        </div>
    </div>
    
    <!-- âœ… index.html å‹•æ…‹æ›´æ–°UserStatus -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('âœ… index.html Initialize');
            
            let userCredits = 0;
            let userEmail = '';
            let userDisplayName = '';
            
            // ç²å–Useré¦–å­—æ¯
            function getUserInitial() {
                // å„ªå…ˆä½¿ç”¨ displayName çš„ç¬¬ä¸€å€‹å­—æ¯
                if (userDisplayName && userDisplayName.trim()) {
                    return userDisplayName.charAt(0).toUpperCase();
                }
                // å¦å‰‡ä½¿ç”¨ email çš„ç¬¬ä¸€å€‹å­—æ¯
                if (userEmail && userEmail.trim()) {
                    return userEmail.charAt(0).toUpperCase();
                }
                return 'U';
            }
            
            // ğŸ”¥ Hamburger menuFeaturesï¼ˆç«‹å³åŸ·è¡Œï¼Œä¸ç­‰å¾… DOMContentLoadedï¼‰
            (function() {
                console.log('ğŸ”µ InitializeHamburger menu...');
                
                // æ‰“é–‹Sidebar
                window.openMobileSidebar = function() {
                    console.log('ğŸ”µ openMobileSidebar Called');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    console.log('ğŸ”µ sidebar:', sidebar);
                    console.log('ğŸ”µ overlay:', overlay);
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '0';
                        overlay.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                        console.log('âœ… Sidebarå·²æ‰“é–‹');
                    } else {
                        console.error('âŒ Not foundSidebaroré®ç½©å…ƒç´ ');
                    }
                };
                
                // CloseSidebar
                window.closeMobileSidebar = function() {
                    console.log('ğŸ”µ closeMobileSidebar Called');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '-100%';
                        overlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        console.log('âœ… Sidebarå·²Close');
                    }
                };
                
                // Hamburger menuæŒ‰éˆ•ä½¿ç”¨ onclickï¼Œç„¡éœ€é¡å¤–ç¶å®š
                console.log('âœ… Hamburger menuFeatureså·²å°±ç·’ï¼ˆä½¿ç”¨ onclickï¼‰');
            })();
                
                // Mobileè‡ªå‹•è¼ªæ’­ï¼ˆåƒ…åœ¨Mobileå•Ÿç”¨ï¼‰
                if (window.innerWidth <= 768) {
                    // è©•åƒ¹è¼ªæ’­
                    const testimonialsContainer = document.getElementById('testimonials-container');
                    if (testimonialsContainer) {
                        let testimonialIndex = 0;
                        const testimonialCards = testimonialsContainer.children;
                        
                        setInterval(() => {
                            testimonialIndex = (testimonialIndex + 1) % testimonialCards.length;
                            const scrollAmount = testimonialCards[testimonialIndex].offsetLeft - testimonialsContainer.offsetLeft;
                            testimonialsContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 4000); // æ¯4ç§’åˆ‡æ›
                    }
                    
                    // Learning Centerè¼ªæ’­
                    const learningContainer = document.getElementById('learning-center-container');
                    if (learningContainer) {
                        let learningIndex = 0;
                        const learningCards = learningContainer.children;
                        
                        setInterval(() => {
                            learningIndex = (learningIndex + 1) % learningCards.length;
                            const scrollAmount = learningCards[learningIndex].offsetLeft - learningContainer.offsetLeft;
                            learningContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 5000); // æ¯5ç§’åˆ‡æ›
                    }
                }
            });
            
            // åˆ‡æ›ä¸‹æ‹‰èœå–®
            async function toggleDropdown() {
                const dropdown = document.getElementById('user-dropdown');
                if (dropdown.style.display === 'none') {
                    dropdown.style.display = 'block';
                    
                    // ğŸ”¥ å³æ™‚å¾ SimpleDataManager ç²å–æœ€æ–° Credits
                    if (window.simpleDataManager && window.simpleDataManager.initialized) {
                        try {
                            userCredits = await window.simpleDataManager.getUserCredits();
                            console.log('âœ… å³æ™‚ç²å– Credits:', userCredits);
                        } catch (error) {
                            console.error('âŒ ç„¡æ³•ç²å– Credits:', error);
                        }
                    }
                    
                    // æ›´æ–°ä¸‹æ‹‰èœå–®å…§å®¹
                    document.getElementById('dropdown-credits').textContent = userCredits.toLocaleString();
                    document.getElementById('dropdown-email').textContent = userEmail;
                } else {
                    dropdown.style.display = 'none';
                }
            }
            
            // é»æ“Šå¤–éƒ¨Closeä¸‹æ‹‰èœå–®
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('user-dropdown');
                const userMenu = document.getElementById('user-menu');
                
                if (dropdown && userMenu && 
                    !dropdown.contains(event.target) && 
                    !userMenu.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
            
            // LogoutFeatures
            window.handleLogout = async function() {
                try {
                    if (window.simpleAuth) {
                        await window.simpleAuth.logout();
                        window.location.href = 'index.html';
                    }
                } catch (error) {
                    console.error('LogoutFailed:', error);
                    alert('LogoutFailedï¼Œè«‹Retry');
                }
            };
            
            // ç­‰å¾… Firebase å’Œ simpleAuth åŠ è¼‰
            async function updateUserMenu() {
                const userMenu = document.getElementById('user-menu');
                if (!userMenu) return;
                
                try {
                    const isLoggedIn = window.simpleAuth && window.simpleAuth.isLoggedIn();
                    
                    if (isLoggedIn) {
                        // âœ… å·²Loginï¼šé¡¯ç¤ºUseré ­åƒ
                        const currentUser = window.simpleAuth.getCurrentUser();
                        userEmail = currentUser.email || '';
                        userDisplayName = currentUser.displayName || '';
                        
                        // ğŸ”¥ å¾ Firestore ç²å– displayName å’Œ credits
                        if (window.simpleDataManager && window.simpleDataManager.initialized) {
                            try {
                                const userDoc = await window.simpleDataManager.getUserDocument();
                                if (userDoc) {
                                    userDisplayName = userDoc.displayName || userDisplayName;
                                    userCredits = userDoc.credits || 0;
                                    console.log('âœ… index.html ç²å– Credits:', userCredits);
                                }
                            } catch (error) {
                                console.log('âš ï¸ ç„¡æ³•å¾ Firestore ç²å–Userè³‡æ–™:', error);
                            }
                        } else {
                            console.log('â³ SimpleDataManager å°šæœªInitializeï¼Œç­‰å¾…ä¸­...');
                            // å»¶é²Retry
                            setTimeout(async () => {
                                if (window.simpleDataManager && window.simpleDataManager.initialized) {
                                    try {
                                        userCredits = await window.simpleDataManager.getUserCredits();
                                        console.log('âœ… å»¶é²ç²å– Credits:', userCredits);
                                    } catch (error) {
                                        console.error('âŒ å»¶é²ç²å–Failed:', error);
                                    }
                                }
                            }, 1000);
                        }
                        
                        const userInitial = getUserInitial();
                        console.log(`ğŸ‘¤ Useré¦–å­—æ¯: "${userInitial}" (displayName: "${userDisplayName}")`);
                        
                        userMenu.innerHTML = `
                            <div onclick="toggleDropdown()" style="cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='transparent'">
                                <div style="width: 32px; height: 32px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem; opacity: 1; transition: opacity 0.3s;">${userInitial}</div>
                            </div>
                        `;
                        console.log('âœ… Userå·²Loginï¼Œé¡¯ç¤ºé ­åƒ');
                    } else {
                        // âœ… æœªLoginï¼šé¡¯ç¤ºLoginæŒ‰éˆ•
                        userMenu.innerHTML = `
                            <button onclick="window.location.href='auth.html'" style="padding: 0.5rem 1rem; background: #8b5cf6; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.2s; font-size: 0.875rem;" onmouseover="this.style.background='#7c3aed'" onmouseout="this.style.background='#8b5cf6'">Login</button>
                        `;
                        console.log('âœ… UseræœªLoginï¼Œé¡¯ç¤ºLoginæŒ‰éˆ•');
                    }
                } catch (e) {
                    console.log('âŒ ç„¡æ³•æ›´æ–°Userèœå–®:', e);
                }
            }
            
            // ç«‹å³å˜—è©¦æ›´æ–°
            updateUserMenu();
            
            // ç›£è½ Firebase å’Œ Auth äº‹ä»¶
            window.addEventListener('firebase-ready', updateUserMenu);
            window.addEventListener('user-logged-in', updateUserMenu);
            window.addEventListener('user-logged-out', updateUserMenu);
            
            // å»¶é²å†æ¬¡æª¢æŸ¥ï¼ˆä»¥é˜²äº‹ä»¶å·²ç¶“è§¸ç™¼ï¼‰
            setTimeout(updateUserMenu, 1000);
            setTimeout(updateUserMenu, 2000);
            
            // æš´éœ² toggleDropdown åˆ°å…¨å±€
            window.toggleDropdown = toggleDropdown;
        });
    </script>

    <!-- ä¸»è¦Content area -->
    <main style="padding-top: 10px;">
    <!-- Dashboard å®¹å™¨ -->
    <div class="dashboard-container" style="display: flex; min-height: calc(100vh - 10px); background: #ffffff; padding-top: 10px;">
        <!-- å·¦Sidebar (ç”± sidebar-component.js å‹•æ…‹ç”Ÿæˆ) -->
        <aside class="sidebar"></aside>

        <!-- ä¸»è¦Content area -->
        <main class="main-content" style="flex: 1; background: #ffffff; margin-left: 280px; overflow-y: auto; min-height: calc(100vh - 60px); display: block !important; visibility: visible !important;">
            <!-- è¨‚é–±æ–¹æ¡ˆ -->
            <div class="plans-section" id="subscription-plans" style="padding: 2rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.75rem; color: #1f2937; line-height: 1.3;">No hidden fees, safe and reliable</h2>
                    <p style="font-size: 1rem; color: #6b7280; margin: 0;">Join thousands of businesses saving time on financial data entry.</p>
                </div>
                
                <!-- Monthlyå’ŒYearlyä¸¦åˆ—é¡¯ç¤ºï¼ˆä½¿ç”¨ index.html çš„å¡ç‰‡æ¨£å¼ï¼‰-->
                <div id="pricing-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 1000px; margin: 2rem auto;">
                    <!-- Monthlyæ–¹æ¡ˆ -->
                    <div id="monthly-plan" class="pricing-card" style="border: 2px solid #e5e7eb; border-radius: 16px; padding: 2.5rem; background: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); width: 100%;">
                        <!-- ğŸ”¥ æ¨™é¡Œå’ŒPricingæ©«å‘æ’åˆ— -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.monthly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">Monthly</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">HKD $</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">58</span>
                                <span style="font-size: 1rem; color: #6b7280;">/æœˆ</span>
                            </div>
                        </div>
                        
                        <!-- What's Included -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f9fafb; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">What's Included</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>100 Credits per month</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>Then USD $0.06 per page</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Unlimited Batch Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>One-Click Convert All</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSV Export</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooks Integration</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Hybrid AI Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 ç¨®Languageæ”¯æ´</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Email Support</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Secure File Upload</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>365-day Data Retention</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>30-day Image Backup</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA æŒ‰éˆ• -->
                        <button onclick="createCheckoutSession('monthly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">Get Started</button>
                    </div>

                    <!-- Yearlyæ–¹æ¡ˆ -->
                    <div id="yearly-plan" class="pricing-card" style="border: 2px solid #8b5cf6; border-radius: 16px; padding: 2.5rem; background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%); box-shadow: 0 4px 20px rgba(139, 92, 246, 0.1); width: 100%; position: relative;">
                        <div data-i18n="pricing.save" style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #8b5cf6; color: white; padding: 0.25rem 1rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">Save 20%</div>
                        <!-- ğŸ”¥ æ¨™é¡Œå’ŒPricingæ©«å‘æ’åˆ— -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.yearly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">Yearly</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">HKD $</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">46</span>
                                <span style="font-size: 1rem; color: #6b7280;">/æœˆ</span>
                            </div>
                        </div>
                        
                        <!-- What's Included -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: transparent; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">What's Included</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>1,200 Credits per year</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>Then USD $0.06 per page</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Unlimited Batch Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>One-Click Convert All</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSV Export</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooks Integration</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Hybrid AI Processing</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 ç¨®Languageæ”¯æ´</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Email Support</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Secure File Upload</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>365-day Data Retention</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>30-day Image Backup</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA æŒ‰éˆ• -->
                        <button onclick="createCheckoutSession('yearly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">Get Started</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // âœ… ç°¡åŒ–ï¼šç›´æ¥ä½¿ç”¨ SimpleAuth
        function checkAuth() {
            return window.simpleAuth && window.simpleAuth.isLoggedIn();
        }
        
        function showAuthNotificationInBilling() {
            console.log('ğŸ’¡ åœ¨ Billing é é¢é¡¯ç¤ºèº«ä»½é©—è­‰Tips');
            
            const notification = document.createElement('div');
            notification.id = 'billing-auth-notification';
            notification.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; background: #f3e8ff; border-bottom: 1px solid #8b5cf6; padding: 0.75rem; z-index: 1000; text-align: center;">
                    <p style="margin: 0; color: #6b21a8;">
                        <i class="fas fa-info-circle"></i> 
                        å¦‚éœ€å®Œæ•´BillingFeaturesï¼Œè«‹ <a href="auth.html" style="color: #7c3aed; text-decoration: underline;">é‡æ–°Login</a> or 
                        <button onclick="window.location.reload()" style="background: #8b5cf6; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; margin-left: 0.5rem;">é‡æ–°è¼‰å…¥é é¢</button>
                        <button onclick="document.getElementById('billing-auth-notification').remove()" style="background: transparent; border: none; color: #6b21a8; margin-left: 1rem;">âœ•</button>
                    </p>
                </div>
            `;
            document.body.insertBefore(notification, document.body.firstChild);
            
            // èª¿æ•´é é¢å…§å®¹å‘ä¸‹åç§»
            const mainContent = document.querySelector('.billing-container');
            if (mainContent) {
                mainContent.style.marginTop = '60px';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('Billing é é¢Loading...');
            
            // ğŸ”¥ Mobileå¼·åˆ¶ä¿®æ”¹å®šåƒ¹å¡ç‰‡å¯¬åº¦
            function forceMobilePricingWidth() {
                if (window.innerWidth <= 768) {
                    const monthlyPlan = document.getElementById('monthly-plan');
                    const yearlyPlan = document.getElementById('yearly-plan');
                    const pricingContainer = document.getElementById('pricing-container');
                    
                    if (monthlyPlan) {
                        monthlyPlan.style.maxWidth = 'none';
                        monthlyPlan.style.width = '100%';
                        monthlyPlan.style.marginLeft = '0';
                        monthlyPlan.style.marginRight = '0';
                        console.log('âœ… Monthlyå¡ç‰‡å¯¬åº¦å·²å¼·åˆ¶è¨­ç‚º 100%');
                    }
                    
                    if (yearlyPlan) {
                        yearlyPlan.style.maxWidth = 'none';
                        yearlyPlan.style.width = '100%';
                        yearlyPlan.style.marginLeft = '0';
                        yearlyPlan.style.marginRight = '0';
                        console.log('âœ… Yearlyå¡ç‰‡å¯¬åº¦å·²å¼·åˆ¶è¨­ç‚º 100%');
                    }
                    
                    if (pricingContainer) {
                        pricingContainer.style.padding = '0';
                        pricingContainer.style.maxWidth = '100%';
                        console.log('âœ… å®šåƒ¹å®¹å™¨å…§è·å·²èª¿æ•´');
                    }
                    
                    // èª¿æ•´ plans-section çš„ padding
                    const plansSection = document.querySelector('.plans-section');
                    if (plansSection) {
                        plansSection.style.padding = '0.25rem'; // å·¦å³å„ç•™ 0.25rem è¾¹è·
                        console.log('âœ… plans-section å…§è·å·²èª¿æ•´ç‚º 0.25rem');
                    }
                }
            }
            
            // ç«‹å³åŸ·è¡Œ + è¦–çª—èª¿æ•´æ™‚åŸ·è¡Œ
            forceMobilePricingWidth();
            window.addEventListener('resize', forceMobilePricingWidth);

            // Initializeçµ±ä¸€Sidebar
            window.billingSidebar = new VaultCaddySidebar('billing');

            // Initializeé é¢
            initBillingPage();
            
            // è™•ç† Stripe æ”¯ä»˜å›èª¿
            handlePaymentSuccess();
            
            // æª¢æŸ¥ Credits æ˜¯å¦éæœŸ
            checkCreditsExpiry();
            
            // ç›£è½Languageè®Šæ›´äº‹ä»¶
            window.addEventListener('languageChanged', function(e) {
                console.log('Billing: Languageå·²è®Šæ›´ç‚º', e.detail.language);
                // é‡æ–°Applyç¿»è­¯
                if (window.languageManager) {
                    window.languageManager.loadLanguage(e.detail.language);
                }
            });
        });

        function initBillingPage() {
            console.log('Billing page initialized');
        }

        // ç®¡ç†æ–¹æ¡ˆ
        function managePlan() {
            window.VaultCaddyNavbar.showNotification('Plan management coming soon!', 'info');
        }

        // Purchase Credits
        function purchaseCredits(credits, price) {
            console.log(`è³¼è²· ${credits} creditsï¼ŒPricing $${price}`);
            
            // ä½¿ç”¨ StripeManager è™•ç†è³¼è²·
            if (window.StripeManager) {
                window.StripeManager.purchaseCredits(credits);
            } else {
                alert('Stripe ç®¡ç†å™¨æœªè¼‰å…¥ï¼Œè«‹Refreshé é¢Retry');
            }
        }

        // Initialize Stripe æ”¯ä»˜
        function initializeStripePayment(credits, price) {
            // é€™è£¡å°‡ä¾†æœƒæ•´åˆ Stripe Checkout
            window.VaultCaddyNavbar.showNotification(`æ­£åœ¨Initialize ${credits} Credits è³¼è²·æµç¨‹...`, 'info');
            
            // æ¨¡æ“¬æ”¯ä»˜Success
            setTimeout(() => {
                simulatePaymentSuccess(credits);
            }, 2000);
        }

        // æ¨¡æ“¬æ”¯ä»˜Successä¸¦æ›´æ–° Credits
        function simulatePaymentSuccess(credits) {
            // æ›´æ–°æœ¬åœ° Credits æ•¸é‡ï¼ˆå¯¦éš›ä¸Šæ‡‰è©²å¾ä¼ºæœå™¨ç²å–ï¼‰
            const currentCredits = parseInt(document.querySelector('.stat-value').textContent) || 0;
            const newCredits = currentCredits + credits;
            
            // æ›´æ–° UI é¡¯ç¤º
            document.querySelector('.stat-value').textContent = newCredits;
            
            window.VaultCaddyNavbar.showNotification(`Successè³¼è²· ${credits} Creditsï¼ç•¶å‰Balanceï¼š${newCredits} Credits`, 'success');
        }

        // âœ… çµ±ä¸€çš„è¨‚é–±æ–¹æ¡ˆå‡½æ•¸ï¼ˆ2025-11-22 æ›´æ–°ï¼‰
        function subscribeToPlan(planType) {
            console.log(`Start ${planType} æ–¹æ¡ˆè¨‚é–±æµç¨‹`);
            
            // ä½¿ç”¨ StripeManager è™•ç†è¨‚é–±
            if (window.StripeManager && window.StripeManager.subscribeToPlan) {
                window.StripeManager.subscribeToPlan(planType);
            } else {
                console.error('âŒ StripeManager æœªè¼‰å…¥');
                alert('ç³»çµ±Initializeä¸­ï¼Œè«‹ç¨å¾Œå†è©¦');
            }
            
            return;
            
            // === ä»¥ä¸‹æ˜¯èˆŠé‚è¼¯ï¼ˆä¿ç•™ä½œç‚ºåƒè€ƒï¼‰===
            
            // âœ… æ–°å®šåƒ¹æ–¹æ¡ˆï¼ˆ2025-12-09 æ›´æ–°ï¼‰
            // æœˆè²»: HKD $58/æœˆï¼ŒåŒ…å« 100 Credits + è¶…å‡ºå¾Œ HKD $0.5/é 
            // å¹´è²»: HKD $46/æœˆï¼ˆ$552/å¹´ï¼‰ï¼ŒåŒ…å« 1,200 Credits + è¶…å‡ºå¾Œ HKD $0.5/é 
            
            // âœ… Stripe ç”¢å“æ˜ å°„ï¼ˆ2025-12-09 æ›´æ–°ï¼‰
            // æœˆè²»: prod_TSmKnHeaQVxZXC - HKD $58/æœˆ + ä½¿ç”¨é‡Billing
            // å¹´è²»: prod_TSsEWI5bv9pSkz - HKD $552/å¹´ + ä½¿ç”¨é‡Billing
            const stripeProductIds = {
                'monthly': 'prod_TSmKnHeaQVxZXC',  // VaultCaddy æœˆè²»
                'yearly': 'prod_TSsEWI5bv9pSkz'     // VaultCaddy å¹´è²»
            };
            
            // Credits æ˜ å°„ - æ ¹æ“šæ™‚é–“é€±æœŸ
            const creditsMap = {
                'monthly': { 
                    credits: 100, 
                    duration: '1å€‹æœˆ',
                    price: 'HKD $58',
                    displayPrice: 'HKD $58/æœˆ'
                },
                'yearly': { 
                    credits: 1200, 
                    duration: '12å€‹æœˆ',
                    price: 'HKD $552',
                    displayPrice: 'HKD $46/æœˆ (Yearly $552)'
                }
            };
            
            const paymentLink = stripeLinks[planType];
            const creditsInfo = creditsMap[planType];
            
            if (!paymentLink || paymentLink.includes('REPLACE_WITH_YOUR')) {
                console.error('âš ï¸ Payment link å°šæœªSettings');
                alert('ä»˜è²»Featuresæ­£åœ¨Settingsä¸­ï¼Œè«‹ç¨å¾Œå†è©¦orè¯ç¹«å®¢æœã€‚\n\nTipsï¼šç®¡ç†å“¡éœ€è¦åœ¨ Stripe Createæ–°çš„ Payment Linksã€‚');
                return;
            }
            
            console.log('=== è¨‚é–±è©³ç´°Information ===');
            console.log('Billingé€±æœŸ:', planType === 'yearly' ? 'å¹´è²»' : 'æœˆè²»');
            console.log('Credits:', creditsInfo.credits);
            console.log('æœ‰æ•ˆæœŸ:', creditsInfo.duration);
            console.log('Pricing:', creditsInfo.displayPrice);
            console.log('æ”¯ä»˜é€£çµ:', paymentLink);
            
            // é¡¯ç¤ºConfirmè¨Šæ¯
            const confirmMessage = `Confirmè¨‚é–± VaultCaddy Pro (${planType === 'yearly' ? 'å¹´è²»' : 'æœˆè²»'})ï¼Ÿ

æ‚¨å°‡ç²å¾—ï¼š
â€¢ ${creditsInfo.credits} Credits
â€¢ æœ‰æ•ˆæœŸï¼š${creditsInfo.duration}
â€¢ Then USD $0.06 per page
â€¢ Unlimited Batch Processing
â€¢ Excel/CSV Export
â€¢ QuickBooks Integration
â€¢ 8 ç¨®Languageæ”¯æ´

ç¸½åƒ¹ï¼š${creditsInfo.displayPrice}

é»æ“ŠConfirmå¾Œå°‡å‰å¾€å®‰å…¨æ”¯ä»˜é é¢ã€‚`;
            
            if (confirm(confirmMessage)) {
                // é¡¯ç¤ºè™•ç†è¨Šæ¯
                if (window.VaultCaddyNavbar) {
                    window.VaultCaddyNavbar.showNotification('æ­£åœ¨é‡å®šå‘åˆ°å®‰å…¨æ”¯ä»˜é é¢...', 'info');
                }
                
                // Settingsè¨‚é–±å…ƒæ•¸æ“šåˆ°æœ¬åœ°å­˜å„²
                localStorage.setItem('pendingSubscription', JSON.stringify({
                    planType: 'pro',  // çµ±ä¸€ç‚º Pro æ–¹æ¡ˆ
                    period: planType,  // monthly or yearly
                    credits: creditsInfo.credits,
                    duration: creditsInfo.duration,
                    price: creditsInfo.price,
                    timestamp: new Date().toISOString()
                }));
                
                // é‡å®šå‘åˆ° Stripe Payment Link
                setTimeout(() => {
                    window.open(paymentLink, '_self');
                }, 1000);
            }
        }
        
        // è™•ç†æ”¯ä»˜Successå›èª¿
        function handlePaymentSuccess() {
            // æª¢æŸ¥æ˜¯å¦æœ‰Pendingçš„è¨‚é–±
            const pendingSubscription = localStorage.getItem('pendingSubscription');
            if (pendingSubscription) {
                try {
                    const subscription = JSON.parse(pendingSubscription);
                    console.log('æª¢æ¸¬åˆ°Pendingçš„è¨‚é–±:', subscription);
                    
                    // æˆäºˆ Credits
                    grantSubscriptionCredits(subscription);
                    
                    // é¡¯ç¤ºSuccessè¨Šæ¯
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `Successè¨‚é–± ${subscription.planType.toUpperCase()} æ–¹æ¡ˆï¼å·²ç²å¾— ${subscription.credits} Credits`, 
                            'success'
                        );
                    }
                    
                    // æ¸…ç†Pendingçš„è¨‚é–±æ•¸æ“š
                    localStorage.removeItem('pendingSubscription');
                    
                    // æ›´æ–°Userè¨‚é–±Status
                    localStorage.setItem('userPlan', subscription.planType);
                    localStorage.setItem('userPlanPeriod', subscription.period);
                    
                } catch (error) {
                    console.error('è™•ç†è¨‚é–±å›èª¿Failed:', error);
                }
            }
        }
        
        // æˆäºˆè¨‚é–± Credits
        function grantSubscriptionCredits(subscription) {
            const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const newCredits = currentCredits + subscription.credits;
            
            // Settings Credits åˆ°æœŸæ™‚é–“
            const expiryDate = new Date();
            if (subscription.period === 'yearly') {
                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
            } else {
                expiryDate.setMonth(expiryDate.getMonth() + 1);
            }
            
            // æ›´æ–°æœ¬åœ°å­˜å„²
            localStorage.setItem('userCredits', newCredits.toString());
            localStorage.setItem('creditsExpiry', expiryDate.toISOString());
            localStorage.setItem('subscriptionCredits', subscription.credits.toString());
            
            console.log(`å·²æˆäºˆ ${subscription.credits} Creditsï¼Œæ–°Balance: ${newCredits}`);
            console.log(`Credits åˆ°æœŸæ™‚é–“: ${expiryDate.toLocaleDateString()}`);
            
            // æ›´æ–° UI é¡¯ç¤º
            const creditsElements = document.querySelectorAll('.stat-value');
            if (creditsElements.length > 0) {
                const creditsElement = creditsElements[creditsElements.length - 1];
                creditsElement.textContent = newCredits;
            }
        }
        
        // æª¢æŸ¥ Credits æ˜¯å¦éæœŸ
        function checkCreditsExpiry() {
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            
            if (creditsExpiry && subscriptionCredits > 0) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                
                console.log('Credits æª¢æŸ¥ï¼š');
                console.log('åˆ°æœŸæ™‚é–“:', expiryDate.toLocaleDateString());
                console.log('ç•¶å‰æ™‚é–“:', now.toLocaleDateString());
                console.log('è¨‚é–± Credits:', subscriptionCredits);
                
                if (now > expiryDate) {
                    // Credits å·²éæœŸï¼Œç§»é™¤è¨‚é–± Credits
                    console.log('Credits å·²éæœŸï¼Œæ­£åœ¨ç§»é™¤...');
                    
                    const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
                    const newCredits = Math.max(0, currentCredits - subscriptionCredits);
                    
                    // æ›´æ–°æœ¬åœ°å­˜å„²
                    localStorage.setItem('userCredits', newCredits.toString());
                    localStorage.removeItem('creditsExpiry');
                    localStorage.removeItem('subscriptionCredits');
                    localStorage.removeItem('userPlan');
                    localStorage.removeItem('userPlanPeriod');
                    
                    // æ›´æ–° UI é¡¯ç¤º
                    const creditsElements = document.querySelectorAll('.stat-value');
                    if (creditsElements.length > 0) {
                        const creditsElement = creditsElements[creditsElements.length - 1];
                        creditsElement.textContent = newCredits;
                    }
                    
                    // é¡¯ç¤ºéæœŸNotifications
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `æ‚¨çš„è¨‚é–± Credits å·²éæœŸä¸¦è¢«ç§»é™¤ã€‚å‰©é¤˜ ${newCredits} Credits`, 
                            'warning'
                        );
                    }
                    
                    console.log(`å·²ç§»é™¤ ${subscriptionCredits} éæœŸ Creditsï¼Œæ–°Balance: ${newCredits}`);
                } else {
                    // Credits å°šæœªéæœŸï¼Œé¡¯ç¤ºå‰©é¤˜æ™‚é–“
                    const timeLeft = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
                    console.log(`è¨‚é–± Credits é‚„æœ‰ ${timeLeft} å¤©åˆ°æœŸ`);
                }
            }
        }
        
        // ç²å– Credits StatusInformation
        function getCreditsStatus() {
            const userCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const userPlan = localStorage.getItem('userPlan');
            
            let status = {
                totalCredits: userCredits,
                subscriptionCredits: subscriptionCredits,
                purchasedCredits: userCredits - subscriptionCredits,
                plan: userPlan || 'none',
                hasSubscription: subscriptionCredits > 0 && creditsExpiry,
                daysLeft: 0
            };
            
            if (creditsExpiry) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                status.daysLeft = Math.max(0, Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24)));
            }
            
            return status;
        }

        // åˆ‡æ›æœˆè²»/å¹´è²»
        function togglePricingPlan(planType) {
            // æ›´æ–°æŒ‰éˆ•Status
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-plan="${planType}"]`).classList.add('active');
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                if (btn.classList.contains('active')) {
                    btn.style.background = 'white';
                    btn.style.color = '#1f2937';
                } else {
                    btn.style.background = '#f9fafb';
                    btn.style.color = '#6b7280';
                }
            });
            
            if (planType === 'monthly') {
                // é¡¯ç¤ºæœˆè²»ï¼Œéš±è—å¹´è²»
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'none';
                });
            } else {
                // é¡¯ç¤ºå¹´è²»ï¼Œéš±è—æœˆè²»
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
            }
        }
        
        // ==================== Email é©—è­‰æª¢æŸ¥ ====================
        (async function initEmailVerification() {
            try {
                // ç­‰å¾… Firebase å’Œé©—è­‰æª¢æŸ¥å™¨Initialize
                await new Promise((resolve) => {
                    const checkReady = setInterval(() => {
                        if (window.emailVerificationChecker && firebase.auth) {
                            clearInterval(checkReady);
                            resolve();
                        }
                    }, 100);
                    
                    setTimeout(() => {
                        clearInterval(checkReady);
                        resolve();
                    }, 10000);
                });
                
                // æª¢æŸ¥é©—è­‰Statusä¸¦é¡¯ç¤ºTipsï¼ˆä¸é˜»æ“‹Featuresï¼‰
                await checkEmailVerification({ showNotice: true, blockPage: false });
            } catch (error) {
                console.error('âŒ Email é©—è­‰æª¢æŸ¥Failed:', error);
            }
        })();
    </script>

    <!-- ğŸ”¥ Hamburger menuè¶…ç´šSimpleä¿®å¾©æ–¹æ¡ˆ -->
    <script>
        console.log('ğŸ”¥ StartInitializeHamburger menu...');
        
        // æ‰“é–‹Sidebarå‡½æ•¸
        function openSidebar() {
            console.log('ğŸ”µ æ‰“é–‹Sidebar');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '0';
                overlay.style.display = 'block';
                overlay.style.opacity = '1';
                document.body.style.overflow = 'hidden';
                console.log('âœ… Sidebarå·²æ‰“é–‹');
            }
        }
        
        // CloseSidebarå‡½æ•¸
        function closeSidebar() {
            console.log('ğŸ”µ CloseSidebar');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '-100%';
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 300); // ç­‰å¾…å‹•ç•«Completeï¼ˆèˆ‡ CSS transition ä¸€è‡´ï¼‰
                document.body.style.overflow = 'auto';
                console.log('âœ… Sidebarå·²Close');
            }
        }
        
        // è¶…ç´šSimpleçš„Initializeå‡½æ•¸
        function simpleInitMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (!btn || !overlay) {
                console.log('â³ å…ƒç´ æœªæ‰¾åˆ°ï¼Œ200mså¾ŒRetry');
                setTimeout(simpleInitMenu, 200);
                return;
            }
            
            console.log('âœ… æ‰¾åˆ°æ‰€æœ‰å…ƒç´ ï¼');
            
            // æŒ‰éˆ•é»æ“Šè™•ç†
            btn.addEventListener('click', function() {
                console.log('ğŸ”µ æŒ‰éˆ•è¢«é»æ“Šï¼');
                openSidebar();
            });
            
            // è§¸æ‘¸è™•ç†
            btn.addEventListener('touchend', function(e) {
                e.preventDefault();
                console.log('ğŸ”µ è§¸æ‘¸äº‹ä»¶ï¼');
                openSidebar();
            });
            
            // é®ç½©é»æ“ŠClose
            overlay.addEventListener('click', function() {
                console.log('ğŸ”µ é»æ“Šé®ç½©Close');
                closeSidebar();
            });
            
            // é®ç½©è§¸æ‘¸Close
            overlay.addEventListener('touchend', function(e) {
                e.preventDefault();
                console.log('ğŸ”µ è§¸æ‘¸é®ç½©Close');
                closeSidebar();
            });
            
            console.log('âœ… æ‰€æœ‰äº‹ä»¶ç›£è½å™¨å·²ç¶å®š');
        }
        
        // ç«‹å³å˜—è©¦Initialize
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', simpleInitMenu);
        } else {
            setTimeout(simpleInitMenu, 100);
        }
        
        // æš´éœ²å‡½æ•¸ä¾›Sidebarå…§çš„é€£çµä½¿ç”¨
        window.closeMobileSidebar = closeSidebar;
    </script>

    <!-- âœ… Stripe Checkout Session Createå‡½æ•¸ -->
    <script>
        /**
         * Create Stripe Checkout Session ä¸¦Jump to
         * @param {string} planType - 'monthly' or 'yearly'
         * @param {Event} event - é»æ“Šäº‹ä»¶
         * @param {boolean} isTest - æ˜¯å¦ç‚ºæ¸¬è©¦æ¨¡å¼ï¼ˆå¯é¸ï¼ŒDefault falseï¼‰
         */
        async function createCheckoutSession(planType, event, isTest = false) {
            console.log(`ğŸ›’ Create ${planType} è¨‚é–±...`, { isTest });
            
            // æª¢æŸ¥Useræ˜¯å¦ç™»éŒ„
            if (!window.simpleAuth || !window.simpleAuth.isLoggedIn()) {
                alert('è«‹å…ˆç™»éŒ„');
                window.location.href = 'auth.html';
                return;
            }
            
            // ç²å–æŒ‰éˆ•å…ƒç´ ï¼ˆåœ¨ try å¤–å®šç¾©ï¼Œé¿å…ä½œç”¨åŸŸå•é¡Œï¼‰
            const button = event?.target || event?.currentTarget;
            const originalText = button?.textContent || 'Get Started';
            
            try {
                // é¡¯ç¤ºåŠ è¼‰Status
                if (button) {
                    button.disabled = true;
                    button.textContent = 'æ­£åœ¨Jump toåˆ°æ”¯ä»˜é é¢...';
                    button.style.opacity = '0.6';
                }
                
                // ç²å–ç•¶å‰User
                const currentUser = window.simpleAuth.getCurrentUser();
                const userEmail = currentUser.email;
                const userId = currentUser.uid;
                
                console.log(`ğŸ‘¤ UserInformation:`, { userEmail, userId });
                
                // èª¿ç”¨ Firebase Function Create Checkout Session
                const createSession = firebase.functions().httpsCallable('createStripeCheckoutSession');
                
                console.log(`ğŸ“ èª¿ç”¨ Firebase Function...`, { planType, userId, email: userEmail, isTest });
                const result = await createSession({
                    planType: planType,
                    userId: userId,
                    email: userEmail,
                    isTest: isTest  // ğŸ§ª å‚³éæ¸¬è©¦æ¨¡å¼æ¨™è¨˜
                });
                
                console.log(`âœ… Checkout Session CreateSuccess:`, result.data);
                
                // Jump toåˆ° Stripe Checkout
                if (result.data && result.data.url) {
                    window.location.href = result.data.url;
                } else {
                    throw new Error('æœªæ”¶åˆ°æ”¯ä»˜é é¢ URL');
                }
                
            } catch (error) {
                console.error('âŒ Createæ”¯ä»˜æœƒè©±Failed:', error);
                console.error('ErrorDetails:', error.code, error.message);
                
                // RestoreæŒ‰éˆ•Status
                if (button) {
                    button.disabled = false;
                    button.textContent = originalText;
                    button.style.opacity = '1';
                }
                
                // é¡¯ç¤ºå‹å¥½çš„ErrorInformation
                let errorMsg = 'Createæ”¯ä»˜æœƒè©±Failedï¼Œè«‹Retryorè¯ç¹«å®¢æœ';
                
                if (error.code === 'functions/unauthenticated') {
                    errorMsg = 'è«‹å…ˆç™»éŒ„';
                    alert(errorMsg);
                    window.location.href = 'auth.html';
                } else if (error.code === 'functions/not-found') {
                    errorMsg = 'è¨‚é–±è¨ˆåŠƒSettingsErrorï¼Œè«‹è¯ç¹«å®¢æœ';
                    alert(errorMsg);
                } else if (error.message) {
                    errorMsg = `Createæ”¯ä»˜æœƒè©±Failed: ${error.message}`;
                    alert(errorMsg);
                } else {
                    alert(errorMsg);
                }
            }
        }
        
        // æš´éœ²åˆ°å…¨å±€
        window.createCheckoutSession = createCheckoutSession;
    </script>

    <!-- CreateProjectModal -->
    <div id="createProjectModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 2rem; width: 90%; max-width: 500px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);">
            <h2 style="font-size: 1.5rem; font-weight: 600; color: #1f2937; margin: 0 0 1rem 0;">Createæ–°Project</h2>
            <p style="color: #6b7280; font-size: 0.875rem; margin: 0 0 1.5rem 0;">è¼¸å…¥Projectåç¨±ä»¥Createæ–°çš„DocumentProject</p>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">Projectåç¨±</label>
                <input 
                    type="text" 
                    id="projectName" 
                    placeholder="ä¾‹å¦‚ï¼š2025å¹´1æœˆInvoice"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem; color: #1f2937; box-sizing: border-box;"
                    onkeypress="if(event.key==='Enter') createProject()">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 0.75rem;">
                <button 
                    onclick="closeCreateProjectModal()" 
                    style="background: #ffffff; border: 1px solid #d1d5db; color: #374151; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;">
                    Cancel
                </button>
                <button 
                    onclick="createProject()" 
                    style="background: #3b82f6; border: none; color: white; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;">
                    Create
                </button>
            </div>
        </div>
    </div>

    <script>
        // æ‰“é–‹CreateProjectModal
        function openCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            const input = document.getElementById('projectName');
            modal.style.display = 'flex';
            input.value = '';
            input.focus();
        }

        // CloseCreateProjectModal
        function closeCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            modal.style.display = 'none';
        }

        // Createæ–°Project
        async function createProject() {
            const input = document.getElementById('projectName');
            const projectName = input.value.trim();
            
            if (!projectName) {
                alert('Please enter a project name');
                return;
            }
            
            // Saveåˆ° Firebase
            try {
                const projectData = await window.simpleDataManager.createProject(projectName);
                console.log('âœ… Projectå·²Saveåˆ° Firebase:', projectData);
                
                // CloseModal
                closeCreateProjectModal();
                
                // ğŸ”¥ ä¿®å¾©ï¼šä½¿ç”¨ projectData.id è€Œé projectData æœ¬èº«
                const projectId = projectData.id;
                console.log('ğŸš€ Jump toåˆ°æ–°Projecté é¢:', projectId);
                
                // Jump toåˆ°æ–°Projecté é¢
                window.location.href = `firstproject.html?project=${projectId}`;
            } catch (error) {
                console.error('âŒ Saveåˆ° Firebase Failed:', error);
                alert('CreateProjectFailedï¼Œè«‹Retry');
                return;
            }
        }

        // é»æ“Šé®ç½©CloseModal
        document.getElementById('createProjectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCreateProjectModal();
            }
        });
    </script>

</body>
</html>
