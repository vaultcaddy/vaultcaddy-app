<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    
    <!-- ğŸ”’ é é¢ä¿è­· -->
    <style>
        body.auth-checking { visibility: hidden !important; }
        .auth-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; align-items: center; justify-content: center; z-index: 10000; visibility: visible !important; }
        body.auth-ready .auth-loading { display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <script>
        document.documentElement.classList.add('auth-checking');
        if (document.body) { document.body.classList.add('auth-checking'); } 
        else { document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('auth-checking'); }); }
        
                // ğŸ”¥ Export åŠŸèƒ½ - å·¥ä½œç‰ˆæœ¬ï¼ˆä» firstproject.htmlï¼‰
        
        // å…³é—­èœå•
        window.closeExportMenu = function() {
            const menu = document.getElementById('exportMenu');
            const overlay = document.getElementById('exportMenuOverlay');
            if (menu) {
                menu.style.display = 'none';
                menu.classList.remove('active');
            }
            if (overlay) {
                overlay.style.display = 'none';
            }
            console.log('ğŸ”’ èœå•å·²å…³é—­');
        };
        
        // åˆ‡æ¢èœå•æ˜¾ç¤º
        window.toggleExportMenu = function() {
            console.log('ğŸ” toggleExportMenu Called');
            const menu = document.getElementById('exportMenu');
            const overlay = document.getElementById('exportMenuOverlay');
            console.log('ğŸ“‹ èœå•å…ƒç´ :', menu);
            
            if (!menu) {
                console.error('âŒ æœªæ‰¾åˆ° #exportMenu å…ƒç´ ');
                return;
            }
            
            // å¦‚æœèœå•å·²æ˜¾ç¤ºï¼Œåˆ™å…³é—­
            if (menu.style.display === 'block') {
                closeExportMenu();
                return;
            }
            
            // ä½¿ç”¨å½“å‰æ–‡æ¡£ï¼ˆdocument-detail åœºæ™¯ï¼‰
            if (!window.currentDocument) {
                console.warn('âš ï¸ window.currentDocument ä¸å­˜åœ¨');
            }
            
            // æ›´æ–°èœå•å†…å®¹
            console.log('ğŸ”„ æ›´æ–°èœå•å†…å®¹...');
            updateExportMenuContent();
            
            // æ ¹æ®å±å¹•å¤§å°è®¾ç½®èœå•æ ·å¼
            if (window.innerWidth <= 768) {
                // ç§»åŠ¨ç«¯ï¼šå±…ä¸­æ˜¾ç¤º
                menu.style.position = 'fixed';
                menu.style.top = '50%';
                menu.style.left = '50%';
                menu.style.transform = 'translate(-50%, -50%)';
                menu.style.right = 'auto';
                menu.style.width = '90%';
                menu.style.maxWidth = '400px';
                menu.style.backgroundColor = '#ffffff';
                menu.style.border = 'none';
                menu.style.boxShadow = 'none';
                menu.style.borderRadius = '12px';
                console.log('ğŸ“± ç§»åŠ¨ç«¯ï¼šèœå•å±…ä¸­æ˜¾ç¤º');
                
                // æ˜¾ç¤ºé®ç½©
                if (overlay) {
                    overlay.style.display = 'block';
                }
            } else {
                // æ¡Œé¢ç«¯ï¼šåœ¨ Export æŒ‰é’®ä¸‹æ–¹
                const exportBtn = document.querySelector('button[onclick*="toggleExportMenu"]');
                if (exportBtn) {
                    const rect = exportBtn.getBoundingClientRect();
                    menu.style.position = 'fixed';
                    menu.style.top = (rect.bottom + 8) + 'px';
                    menu.style.right = (window.innerWidth - rect.right) + 'px';
                    menu.style.left = 'auto';
                    menu.style.transform = 'none';
                    menu.style.width = 'auto';
                    menu.style.minWidth = '280px';
                    menu.style.maxWidth = '400px';
                }
                console.log('ğŸ’» æ¡Œé¢ç«¯ï¼šèœå•åœ¨æŒ‰é’®ä¸‹æ–¹');
                
                // ä¸æ˜¾ç¤ºé®ç½©
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }
            
            menu.style.display = 'block';
            menu.classList.add('active');
            
            console.log('âœ… èœå•å·²æ˜¾ç¤º');
        };
        
        console.log('âœ… Export åŠŸèƒ½å·²åŠ è½½ï¼ˆå·¥ä½œç‰ˆæœ¬ï¼‰');

        
        // ç­‰å¾…2ç§’åæ‰§è¡Œï¼Œç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½


    </script>
    
    <style>
        /* Export Menu æ ·å¼ */
        .export-menu-item:hover {
            background: #f3f4f6 !important;
        }
        
        /* ç§»åŠ¨ç«¯æ ·å¼ */
        @media (max-width: 768px) {
            #exportMenu {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                right: auto !important;
                width: 90% !important;
                max-width: 400px !important;
                background-color: #ffffff !important;
                box-shadow: none !important;
                border: none !important;
                border-radius: 12px !important;
                padding: 1.5rem !important;
                overflow: hidden !important;
            }
        }
    </style>

</body>
</html>
