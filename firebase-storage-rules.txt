// Firebase Storage å®‰å…¨è¦å‰‡
// è¤‡è£½æ­¤å…§å®¹åˆ° Firebase Console â†’ Storage â†’ Rules

rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // å…è¨±å·²ç™»å…¥ç”¨æˆ¶è®€å–å’Œå¯«å…¥è‡ªå·±çš„æ–‡æª”
    match /documents/{userId}/{projectId}/{fileName} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // å‘å¾Œå…¼å®¹ï¼šå…è¨±å…¶ä»–å¯èƒ½çš„è·¯å¾‘
    match /users/{userId}/projects/{projectId}/{fileName} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    match /projects/{projectId}/documents/{fileName} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // å…è¨±è®€å–é …ç›®ç´šåˆ¥çš„æ–‡ä»¶
    match /{projectId}/{fileName} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // å…è¨±è®€å–æ ¹ç´šåˆ¥çš„æ–‡ä»¶ï¼ˆå‘å¾Œå…¼å®¹ï¼‰
    match /{fileName} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
  }
}

// ğŸ“ ä½¿ç”¨èªªæ˜ï¼š
// 1. æ‰“é–‹ Firebase Console (https://console.firebase.google.com)
// 2. é¸æ“‡æ‚¨çš„é …ç›®
// 3. å·¦å´èœå–®é¸æ“‡ "Storage"
// 4. é»æ“Šé ‚éƒ¨çš„ "Rules" æ¨™ç±¤
// 5. å°‡ä¸Šé¢çš„è¦å‰‡è¤‡è£½ä¸¦ç²˜è²¼åˆ°ç·¨è¼¯å™¨ä¸­
// 6. é»æ“Š "Publish" ç™¼å¸ƒè¦å‰‡
//
// âš ï¸ æ³¨æ„ï¼šé€™äº›è¦å‰‡å…è¨±å·²ç™»å…¥ç”¨æˆ¶è¨ªå•æ–‡ä»¶
// å¦‚æœéœ€è¦æ›´åš´æ ¼çš„æ¬Šé™æ§åˆ¶ï¼Œè«‹æ ¹æ“šéœ€æ±‚èª¿æ•´

