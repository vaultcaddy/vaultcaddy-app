# âœ… æœ€ç»ˆä»·æ ¼æ›´æ–°å®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¶é—´**: 2026-01-08  
**çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆå¹¶å·²éƒ¨ç½²

---

## ğŸ“‹ æœ¬æ¬¡æ›´æ–°å†…å®¹

### 1ï¸âƒ£ å¹´ä»˜æ–¹æ¡ˆæè¿°æ›´æ–° âœ…

å°†æ‰€æœ‰4ä¸ªè¯­è¨€ç‰ˆæœ¬çš„å¹´ä»˜æ–¹æ¡ˆæè¿°ä»"æ¯æœˆ 100 Credits"æ”¹ä¸º"1å¹´ 1,200 Credits"ï¼š

| è¯­è¨€ | åŸæ–‡æœ¬ | æ–°æ–‡æœ¬ | çŠ¶æ€ |
|------|--------|--------|------|
| ğŸ‡¨ğŸ‡³ ä¸­æ–‡ | æ¯æœˆ 100 Credits | **1å¹´ 1,200 Credits** | âœ… |
| ğŸ‡ºğŸ‡¸ è‹±æ–‡ | 1,200 Credits per year | **1,200 Credits per year** | âœ… |
| ğŸ‡¯ğŸ‡µ æ—¥æ–‡ | æœˆé–“100ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ | **å¹´é–“1,200ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ** | âœ… |
| ğŸ‡°ğŸ‡· éŸ©æ–‡ | ì›” 100 í¬ë ˆë”§ | **ì—°ê°„ 1,200 í¬ë ˆë”§** | âœ… |

### 2ï¸âƒ£ Firebase Functions ä»·æ ¼é…ç½®æ›´æ–° âœ…

æ›´æ–°äº† `createStripeCheckoutSession` å‡½æ•°ï¼Œä½¿ç”¨æ–°çš„ä»·æ ¼IDå’Œè¶…é¢è®¡è´¹é…ç½®ï¼š

#### ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼š

**Monthlyï¼ˆæœˆä»˜ï¼‰**:
- **åŸºç¡€ä»·æ ¼**: `price_1SnF6hJmiQ31C0GT0QSOiXVI`
  - HKD $28/æœˆï¼ˆæ”¯æŒ HKD/USD/JPY/KRW/EUR/GBPï¼‰
- **è¶…é¢è®¡è´¹**: `price_1SfZQQJmiQ31C0GTeUu6TSXE`
  - å’Œä¹‹å‰ä¸€æ ·

**Yearlyï¼ˆå¹´ä»˜ï¼‰**:
- **åŸºç¡€ä»·æ ¼**: `price_1SnF6hJmiQ31C0GT8SvegPzM`
  - HKD $264/å¹´ï¼ˆæ”¯æŒ HKD/USD/JPY/KRW/EUR/GBPï¼‰
- **è¶…é¢è®¡è´¹**: `price_1SfZQVJmiQ31C0GTOYgabmaJ`
  - å’Œä¹‹å‰ä¸€æ ·

---

## ğŸ¯ æœ€ç»ˆå®šä»·ç³»ç»Ÿ

### æ–¹æ¡ˆç‰¹ç‚¹
âœ… **å•å±‚å®šä»·**: åªæœ‰ Starter å…¥é—¨ç‰ˆ  
âœ… **ä¸¤ç§å‘¨æœŸ**: æœˆä»˜å’Œå¹´ä»˜  
âœ… **å…­ç§è´§å¸**: HKD, USD, JPY, KRW, EUR, GBP  
âœ… **è¶…é¢è®¡è´¹**: ä¿ç•™åŸæœ‰çš„ Billing Meter ç³»ç»Ÿ

### å®šä»·è¯¦æƒ…

#### æœˆä»˜æ–¹æ¡ˆ
- **åŸºç¡€è´¹ç”¨**: 
  - HKD $28/æœˆ
  - USD $3.88/æœˆ
  - JPY Â¥599/æœˆ
  - KRW â‚©5,588/ì›”
  - EUR â‚¬3.28/æœˆ
  - GBP Â£2.88/æœˆ
- **åŒ…å«ç§¯åˆ†**: 100 Credits per month
- **è¶…é¢ä»·æ ¼**: æŒ‰é¡µè®¡è´¹ï¼ˆHKD $0.3/é¡µï¼‰

#### å¹´ä»˜æ–¹æ¡ˆï¼ˆèŠ‚çœ 20%ï¼‰
- **åŸºç¡€è´¹ç”¨**:
  - HKD $264/å¹´ï¼ˆæ¯æœˆ $22ï¼‰
  - USD $34.56/å¹´ï¼ˆæ¯æœˆ $2.88ï¼‰
  - JPY Â¥5,748/å¹´ï¼ˆæ¯æœˆ Â¥479ï¼‰
  - KRW â‚©53,616/ë…„ï¼ˆæ¯æœˆ â‚©4,468ï¼‰
  - EUR â‚¬29.76/å¹´ï¼ˆæ¯æœˆ â‚¬2.48ï¼‰
  - GBP Â£22.56/å¹´ï¼ˆæ¯æœˆ Â£1.88ï¼‰
- **åŒ…å«ç§¯åˆ†**: 1,200 Credits per year
- **è¶…é¢ä»·æ ¼**: æŒ‰é¡µè®¡è´¹ï¼ˆHKD $0.3/é¡µï¼‰

---

## ğŸ“‚ æ›´æ–°çš„æ–‡ä»¶

### å‰ç«¯æ–‡ä»¶ âœ…
1. `/Users/cavlinyeung/ai-bank-parser/billing.html`
   - å¹´ä»˜æè¿°ï¼šæ¯æœˆ 100 Credits â†’ **1å¹´ 1,200 Credits**
   
2. `/Users/cavlinyeung/ai-bank-parser/en/billing.html`
   - å·²ç¡®è®¤ï¼š1,200 Credits per year âœ…
   
3. `/Users/cavlinyeung/ai-bank-parser/jp/billing.html`
   - å¹´ä»˜æè¿°ï¼šæœˆé–“100ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ â†’ **å¹´é–“1,200ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ**
   
4. `/Users/cavlinyeung/ai-bank-parser/kr/billing.html`
   - å¹´ä»˜æè¿°ï¼šì›” 100 í¬ë ˆë”§ â†’ **ì—°ê°„ 1,200 í¬ë ˆë”§**

### åç«¯æ–‡ä»¶ âœ…
5. `/Users/cavlinyeung/ai-bank-parser/firebase-functions/index.js`
   - æ›´æ–°ä¸ºåŒä»·æ ¼ç³»ç»Ÿï¼ˆåŸºç¡€ä»·æ ¼ + è¶…é¢è®¡è´¹ä»·æ ¼ï¼‰
   - ä½¿ç”¨æ–°çš„å¤šè´§å¸ Price ID
   - ä¿ç•™åŸæœ‰çš„è¶…é¢è®¡è´¹æœºåˆ¶

---

## ğŸš€ éƒ¨ç½²çŠ¶æ€

### âœ… å·²éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**éƒ¨ç½²æ—¶é—´**: 2026-01-08  
**éƒ¨ç½²å†…å®¹**:
- âœ… å‰ç«¯æ–‡ä»¶ï¼š7,582 ä¸ªæ–‡ä»¶
- âœ… Firebase Functionsï¼š19 ä¸ªå‡½æ•°
- âœ… `createStripeCheckoutSession`: å·²æ›´æ–°

**éƒ¨ç½²ç»“æœ**:
```
âœ” functions[createStripeCheckoutSession(us-central1)] Successful update operation.
âœ” hosting[vaultcaddy-production-cbbe2]: release complete
```

---

## ğŸ§ª æµ‹è¯•è¦ç‚¹

### é¡µé¢æ˜¾ç¤ºæµ‹è¯•
- [ ] ä¸­æ–‡ç‰ˆå¹´ä»˜æ˜¾ç¤º"1å¹´ 1,200 Credits"
- [ ] è‹±æ–‡ç‰ˆå¹´ä»˜æ˜¾ç¤º"1,200 Credits per year"
- [ ] æ—¥æ–‡ç‰ˆå¹´ä»˜æ˜¾ç¤º"å¹´é–“1,200ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ"
- [ ] éŸ©æ–‡ç‰ˆå¹´ä»˜æ˜¾ç¤º"ì—°ê°„ 1,200 í¬ë ˆë”§"

### æ”¯ä»˜æµç¨‹æµ‹è¯•
- [ ] ç‚¹å‡»æœˆä»˜"ç«‹å³å¼€å§‹"æŒ‰é’®
  - åº”è·³è½¬åˆ° Stripe Checkout
  - æ˜¾ç¤ºæ­£ç¡®çš„æœˆä»˜ä»·æ ¼
  
- [ ] ç‚¹å‡»å¹´ä»˜"ç«‹å³å¼€å§‹"æŒ‰é’®
  - åº”è·³è½¬åˆ° Stripe Checkout
  - æ˜¾ç¤ºæ­£ç¡®çš„å¹´ä»˜ä»·æ ¼
  
- [ ] è¶…é¢è®¡è´¹æµ‹è¯•
  - ç”¨æˆ·ä½¿ç”¨è¶…è¿‡ 100/1,200 Credits å
  - åº”æ­£ç¡®è§¦å‘è¶…é¢è®¡è´¹

---

## ğŸ“Š æŠ€æœ¯æ¶æ„

### ä»·æ ¼ç³»ç»Ÿæ¶æ„

```
è®¢é˜…åˆ›å»ºæµç¨‹ï¼š
1. ç”¨æˆ·ç‚¹å‡»"ç«‹å³å¼€å§‹" â†’ createCheckoutSession('monthly'/'yearly')
2. Firebase Function åˆ›å»º Stripe Checkout Session
3. ä½¿ç”¨ basePriceId åˆ›å»ºè®¢é˜…ï¼ˆåŒ…å«6ç§è´§å¸é€‰é¡¹ï¼‰
4. Stripe è‡ªåŠ¨å…³è” usagePriceIdï¼ˆé€šè¿‡ Billing Meterï¼‰
5. ç”¨æˆ·å®Œæˆæ”¯ä»˜
6. Webhook è§¦å‘ï¼Œæ›´æ–° Firestore ç”¨æˆ·æ•°æ®

è¶…é¢è®¡è´¹æµç¨‹ï¼š
1. ç”¨æˆ·ä½¿ç”¨è¶…è¿‡ç§¯åˆ†é™é¢
2. reportStripeUsage function æŠ¥å‘Šä½¿ç”¨é‡
3. Stripe æ ¹æ® usagePriceId è®¡ç®—è¶…é¢è´¹ç”¨
4. åœ¨ä¸‹æ¬¡è´¦å•å‘¨æœŸæ”¶å–
```

### Firebase Functions é…ç½®

```javascript
const productionPriceMapping = {
    monthly: {
        basePriceId: 'price_1SnF6hJmiQ31C0GT0QSOiXVI',  // å¤šè´§å¸æœˆä»˜
        usagePriceId: 'price_1SfZQQJmiQ31C0GTeUu6TSXE'  // è¶…é¢è®¡è´¹
    },
    yearly: {
        basePriceId: 'price_1SnF6hJmiQ31C0GT8SvegPzM',   // å¤šè´§å¸å¹´ä»˜
        usagePriceId: 'price_1SfZQVJmiQ31C0GTOYgabmaJ'   // è¶…é¢è®¡è´¹
    }
};
```

---

## âœ… å®Œæˆæ€»ç»“

### å·²å®Œæˆçš„å…¨éƒ¨å·¥ä½œ

1. âœ… **Stripe ä»·æ ¼é…ç½®**
   - åˆ›å»ºäº† 2 ä¸ªå¤šè´§å¸ä»·æ ¼å¯¹è±¡
   - ä¿ç•™äº†åŸæœ‰çš„è¶…é¢è®¡è´¹ç³»ç»Ÿ
   
2. âœ… **å‰ç«¯é¡µé¢æ›´æ–°**
   - 4 ä¸ªè¯­è¨€ç‰ˆæœ¬çš„ billing.html å…¨éƒ¨æ›´æ–°
   - æ ‡é¢˜æ”¹ä¸º"æœˆä»˜/å¹´ä»˜"
   - å¹´ä»˜æè¿°æ”¹ä¸º"1å¹´ 1,200 Credits"
   
3. âœ… **åç«¯ Functions æ›´æ–°**
   - ä½¿ç”¨æ–°çš„ä»·æ ¼ ID
   - ä¿ç•™è¶…é¢è®¡è´¹æœºåˆ¶
   - æ”¯æŒ 6 ç§è´§å¸
   
4. âœ… **éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**
   - å‰ç«¯å’Œåç«¯å…¨éƒ¨éƒ¨ç½²å®Œæˆ
   - æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ

---

## ğŸ‰ é¡¹ç›®çŠ¶æ€

**å½“å‰çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª  
**ä¸‹ä¸€æ­¥**: ç›‘æ§å’Œæµ‹è¯•

### ç›‘æ§è¦ç‚¹

1. **æ”¯ä»˜æˆåŠŸç‡**
   - ç›‘æ§ Stripe Checkout çš„è½¬åŒ–ç‡
   - æ£€æŸ¥å„è´§å¸çš„æ”¯ä»˜æˆåŠŸç‡
   
2. **è¶…é¢è®¡è´¹**
   - ç›‘æ§è¶…é¢ç”¨æˆ·çš„è®¡è´¹æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥ Billing Meter æ•°æ®æ˜¯å¦å‡†ç¡®
   
3. **ç”¨æˆ·åé¦ˆ**
   - æ”¶é›†ç”¨æˆ·å¯¹æ–°å®šä»·çš„åé¦ˆ
   - ç›‘æ§æ”¯ä»˜ç›¸å…³çš„å®¢æœè¯¢é—®

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥ Firebase Console**
   - Functions æ—¥å¿—
   - Firestore æ•°æ®
   
2. **æ£€æŸ¥ Stripe Dashboard**
   - Checkout Sessions
   - Subscriptions
   - Events æ—¥å¿—
   
3. **æµè§ˆå™¨æ§åˆ¶å°**
   - æ£€æŸ¥ JavaScript é”™è¯¯
   - æŸ¥çœ‹ Network è¯·æ±‚

---

**æŠ¥å‘Šå®Œæˆæ—¶é—´**: 2026-01-08  
**æœ€ç»ˆçŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆå¹¶å·²ä¸Šçº¿  
**ç³»ç»Ÿç‰ˆæœ¬**: v2026.01.08 - å¤šè´§å¸å•å±‚å®šä»·

