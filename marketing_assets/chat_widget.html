<!-- Live Chat Widget - åœ¨çº¿å®¢æœ -->
<div id="chat-widget" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999;">
    <!-- Chat Button -->
    <button 
        id="chat-button" 
        onclick="toggleChat()"
        style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4); transition: transform 0.2s;"
        onmouseover="this.style.transform='scale(1.1)'"
        onmouseout="this.style.transform='scale(1)'"
    >
        ğŸ’¬
    </button>
    
    <!-- Chat Window -->
    <div 
        id="chat-window" 
        style="display: none; position: absolute; bottom: 80px; right: 0; width: 350px; height: 500px; background: white; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); overflow: hidden; flex-direction: column;"
    >
        <!-- Chat Header -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="margin: 0; font-size: 1.125rem; font-weight: 700;">VaultCaddy å®¢æœ</h3>
                <p style="margin: 0; font-size: 0.875rem; opacity: 0.9;">é€šå¸¸åœ¨1åˆ†é’Ÿå†…å›å¤</p>
            </div>
            <button onclick="toggleChat()" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">&times;</button>
        </div>
        
        <!-- Chat Messages -->
        <div id="chat-messages" style="flex: 1; padding: 1rem; overflow-y: auto; background: #f9fafb;">
            <!-- æ¬¢è¿æ¶ˆæ¯ -->
            <div style="margin-bottom: 1rem;">
                <div style="background: white; padding: 1rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <p style="margin: 0; color: #1f2937; font-size: 0.9375rem;">
                        ğŸ‘‹ æ‚¨å¥½ï¼æˆ‘æ˜¯VaultCaddyå®¢æœåŠ©æ‰‹ã€‚
                        <br><br>
                        æˆ‘å¯ä»¥å¸®æ‚¨ï¼š
                        <br>â€¢ äº†è§£äº§å“åŠŸèƒ½
                        <br>â€¢ æŸ¥çœ‹å®šä»·æ–¹æ¡ˆ
                        <br>â€¢ è§£ç­”æŠ€æœ¯é—®é¢˜
                        <br><br>
                        æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ
                    </p>
                </div>
            </div>
            
            <!-- å¿«é€Ÿé—®é¢˜æŒ‰é’® -->
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                <button onclick="sendQuickQuestion('ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ')" style="background: white; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; text-align: left; font-size: 0.875rem; transition: background 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='white'">
                    ğŸ’° ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ
                </button>
                <button onclick="sendQuickQuestion('å¦‚ä½•å¼€å§‹å…è´¹è¯•ç”¨ï¼Ÿ')" style="background: white; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; text-align: left; font-size: 0.875rem; transition: background 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='white'">
                    ğŸ å¦‚ä½•å¼€å§‹å…è´¹è¯•ç”¨ï¼Ÿ
                </button>
                <button onclick="sendQuickQuestion('æ”¯æŒå“ªäº›é“¶è¡Œï¼Ÿ')" style="background: white; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; text-align: left; font-size: 0.875rem; transition: background 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='white'">
                    ğŸ¦ æ”¯æŒå“ªäº›é“¶è¡Œï¼Ÿ
                </button>
                <button onclick="sendQuickQuestion('æ•°æ®å®‰å…¨å—ï¼Ÿ')" style="background: white; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer; text-align: left; font-size: 0.875rem; transition: background 0.2s;" onmouseover="this.style.background='#f3f4f6'" onmouseout="this.style.background='white'">
                    ğŸ”’ æ•°æ®å®‰å…¨å—ï¼Ÿ
                </button>
            </div>
        </div>
        
        <!-- Chat Input -->
        <div style="padding: 1rem; border-top: 1px solid #e5e7eb; background: white;">
            <form id="chat-form" onsubmit="sendChatMessage(event)" style="display: flex; gap: 0.5rem;">
                <input 
                    type="text" 
                    id="chat-input" 
                    placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..."
                    style="flex: 1; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 8px; font-size: 0.9375rem;"
                >
                <button 
                    type="submit"
                    style="padding: 0.75rem 1.25rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;"
                >
                    å‘é€
                </button>
            </form>
        </div>
    </div>
</div>

<script>
// Chat Widget Functions
function toggleChat() {
    const window = document.getElementById('chat-window');
    const button = document.getElementById('chat-button');
    
    if (window.style.display === 'none' || !window.style.display) {
        window.style.display = 'flex';
        button.textContent = 'âœ•';
        
        // Google Analytics
        if (typeof gtag !== 'undefined') {
            gtag('event', 'chat_opened', {
                'event_category': 'engagement'
            });
        }
    } else {
        window.style.display = 'none';
        button.textContent = 'ğŸ’¬';
    }
}

function sendQuickQuestion(question) {
    addUserMessage(question);
    
    // æ¨¡æ‹ŸAIå›å¤
    setTimeout(() => {
        let answer = '';
        if (question.includes('ä»·æ ¼')) {
            answer = 'æˆ‘ä»¬æä¾›æå…·ç«äº‰åŠ›çš„ä»·æ ¼ï¼š\nâ€¢ é¦™æ¸¯ï¼šHK$0.5/é¡µ\nâ€¢ æœˆä»˜æ–¹æ¡ˆï¼šHK$58èµ·\nâ€¢ å…è´¹è¯•ç”¨20é¡µ\n\n<a href="#pricing" style="color: #667eea; text-decoration: underline;">æŸ¥çœ‹è¯¦ç»†ä»·æ ¼</a>';
        } else if (question.includes('å…è´¹è¯•ç”¨')) {
            answer = 'å¾ˆç®€å•ï¼åªéœ€3æ­¥ï¼š\n1. ç‚¹å‡»"ç«‹å³å¼€å§‹"æ³¨å†Œ\n2. éªŒè¯é‚®ç®±è·å¾—20 Credits\n3. ä¸Šä¼ æ–‡æ¡£å¼€å§‹ä½“éªŒ\n\n<a href="auth.html" style="color: #667eea; text-decoration: underline;">ç«‹å³æ³¨å†Œ</a>';
        } else if (question.includes('é“¶è¡Œ')) {
            answer = 'æˆ‘ä»¬æ”¯æŒæ‰€æœ‰ä¸»è¦é“¶è¡Œï¼š\nâ€¢ é¦™æ¸¯ï¼šåŒ¯è±ã€æ†ç”Ÿã€ä¸­éŠ€ã€æ¸£æ‰“\nâ€¢ ç¾å›½ï¼šBank of Americaã€Chase\nâ€¢ æ—¥æœ¬ï¼šä¸‰è±UFJã€ã¿ãšã»\nâ€¢ éŸ©å›½ï¼šêµ­ë¯¼ì€í–‰ã€ì‹ í•œì€í–‰';
        } else if (question.includes('å®‰å…¨')) {
            answer = 'æ‚¨çš„æ•°æ®å®‰å…¨æ˜¯æˆ‘ä»¬çš„é¦–è¦ä»»åŠ¡ï¼š\nâœ… 256ä½SSLåŠ å¯†\nâœ… SOC 2è®¤è¯\nâœ… é“¶è¡Œçº§å®‰å…¨æ ‡å‡†\nâœ… 365å¤©æ•°æ®ä¿ç•™\n\nå®Œå…¨å®‰å…¨å¯é ï¼';
        }
        
        addBotMessage(answer);
    }, 1000);
    
    // Google Analytics
    if (typeof gtag !== 'undefined') {
        gtag('event', 'chat_question', {
            'event_category': 'engagement',
            'event_label': question
        });
    }
}

function addUserMessage(text) {
    const messages = document.getElementById('chat-messages');
    const div = document.createElement('div');
    div.style.cssText = 'margin-bottom: 1rem; display: flex; justify-content: flex-end;';
    div.innerHTML = `
        <div style="background: #667eea; color: white; padding: 0.75rem 1rem; border-radius: 12px; max-width: 70%; font-size: 0.9375rem;">
            ${text}
        </div>
    `;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

function addBotMessage(text) {
    const messages = document.getElementById('chat-messages');
    const div = document.createElement('div');
    div.style.cssText = 'margin-bottom: 1rem;';
    div.innerHTML = `
        <div style="background: white; padding: 1rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); font-size: 0.9375rem; color: #1f2937;">
            ${text.replace(/\n/g, '<br>')}
        </div>
    `;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
}

function sendChatMessage(e) {
    e.preventDefault();
    const input = document.getElementById('chat-input');
    const message = input.value.trim();
    
    if (message) {
        addUserMessage(message);
        input.value = '';
        
        // æ¨¡æ‹Ÿå›å¤
        setTimeout(() => {
            addBotMessage('æ„Ÿè°¢æ‚¨çš„æé—®ï¼æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿä¼šå°½å¿«å›å¤ã€‚æ‚¨ä¹Ÿå¯ä»¥ï¼š\n\nâ€¢ <a href="auth.html" style="color: #667eea;">æ³¨å†Œå…è´¹è¯•ç”¨</a>\nâ€¢ <a href="blog/" style="color: #667eea;">æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£</a>\nâ€¢ å‘é€é‚®ä»¶è‡³ support@vaultcaddy.com');
        }, 1000);
    }
}
</script>