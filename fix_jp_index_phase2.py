#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ—¥æ–‡ç‰ˆé¦–é¡µPhase 2ï¼šç¿»è¯‘JavaScriptä»£ç ä¸­çš„ä¸­æ–‡æ³¨é‡Šå’Œconsole.log
"""

import re

def fix_jp_index_phase2():
    """Phase 2: ç¿»è¯‘JavaScriptä¸­çš„æ‰€æœ‰ä¸­æ–‡"""
    
    file_path = 'jp/index.html'
    
    print("ğŸ” Phase 2: ç¿»è¯‘JavaScriptå†…å®¹...")
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    chinese_chars_before = len(re.findall(r'[ä¸€-é¾¥]', content))
    print(f"ğŸ“Š å‘ç° {chinese_chars_before} ä¸ªä¸­æ–‡å­—ç¬¦")
    
    # ============================================
    # JavaScript æ³¨é‡Šå’Œ console.log ç¿»è¯‘
    # ============================================
    
    js_translations = {
        # ç”¨æˆ·èœå•ç›¸å…³
        'æ›´æ–°ä¸‹æ‹‰èœå–®å…§å®¹': 'ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…å®¹ã‚’æ›´æ–°',
        'é»æ“Šå¤–éƒ¨é—œé–‰ä¸‹æ‹‰èœå–®': 'å¤–éƒ¨ã‚¯ãƒªãƒƒã‚¯ã§ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹',
        'LogoutåŠŸèƒ½': 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½',
        'Logoutå¤±æ•—': 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¤±æ•—',
        'ğŸ”¥ èˆ‡ dashboard.html å®Œå…¨ç›¸åŒçš„æ›´æ–°æ–¹å¼': 'ğŸ”¥ dashboard.htmlã¨å…¨ãåŒã˜æ›´æ–°æ–¹æ³•',
        'âœ… å·²ç™»å…¥ï¼šé¡¯ç¤ºç”¨æˆ¶é ­åƒ': 'âœ… ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒã‚¿ãƒ¼ã‚’è¡¨ç¤º',
        'ğŸ”¥ å¾ Firestore ç²å– displayName å’Œ credits': 'ğŸ”¥ Firestoreã‹ã‚‰displayNameã¨creditsã‚’å–å¾—',
        'âœ… index.html ç²å– Credits': 'âœ… index.html Creditsã‚’å–å¾—',
        'âš ï¸ ç„¡æ³•å¾ Firestore ç²å–ç”¨æˆ¶è³‡æ–™': 'âš ï¸ Firestoreã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã›ã‚“',
        'â³ SimpleDataManager å°šæœªåˆå§‹åŒ–, ç­‰å¾…ä¸­...': 'â³ SimpleDataManagerã¾ã åˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€å¾…æ©Ÿä¸­...',
        'å»¶é²é‡è©¦': 'é…å»¶å†è©¦è¡Œ',
        'âœ… å»¶é²ç²å– Credits': 'âœ… é…å»¶å–å¾— Credits',
        'âŒ å»¶é²ç²å–å¤±æ•—': 'âŒ é…å»¶å–å¾—å¤±æ•—',
        'ğŸ‘¤ ç”¨æˆ¶é¦–å­—æ¯': 'ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ‹ã‚·ãƒ£ãƒ«',
        'ğŸ”¥ å·²ç™»å…¥ï¼šé¡¯ç¤ºé ­åƒå’Œä¸‹æ‹‰èœå–®': 'ğŸ”¥ ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ï¼šã‚¢ãƒã‚¿ãƒ¼ã¨ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º',
        'âœ… Not logged inï¼šé¡¯ç¤ºç™»å…¥æŒ‰éˆ•': 'âœ… ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¾ã›ã‚“ï¼šãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º',
        'ç™»å…¥': 'ãƒ­ã‚°ã‚¤ãƒ³',
        
        # åˆå§‹åŒ–ç›¸é—œ
        'ğŸ”¥ å„ªåŒ–ï¼šåªåœ¨ SimpleAuth åˆå§‹åŒ–å¾Œæ‰æ›´æ–°ï¼ˆåˆªé™¤ç«‹å³èª¿ç”¨ï¼‰': 'ğŸ”¥ æœ€é©åŒ–ï¼šSimpleAuthåˆæœŸåŒ–å¾Œã®ã¿æ›´æ–°ï¼ˆå³åº§å‘¼ã³å‡ºã—ã‚’å‰Šé™¤ï¼‰',
        'SimpleAuth å°šæœªåˆå§‹åŒ–': 'SimpleAuthã¾ã åˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“',
        'ç›£è½ Firebase å’Œ Auth äº‹ä»¶': 'Firebaseã¨Authã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–',
        'å»¶é²æª¢æŸ¥ï¼ˆç­‰å¾… SimpleAuth åˆå§‹åŒ–å®Œæˆï¼‰': 'é…å»¶ãƒã‚§ãƒƒã‚¯ï¼ˆSimpleAuthåˆæœŸåŒ–å®Œäº†ã‚’å¾…ã¤ï¼‰',
        '0.5så¾Œé¦–æ¬¡æª¢æŸ¥': '0.5ç§’å¾Œã«åˆå›ãƒã‚§ãƒƒã‚¯',
        '1så¾Œå†æ¬¡æª¢æŸ¥': '1ç§’å¾Œã«å†ãƒã‚§ãƒƒã‚¯',
        '2så¾Œæœ€çµ‚ç¢ºèª': '2ç§’å¾Œã«æœ€çµ‚ç¢ºèª',
        'æš´éœ² toggleDropdown åˆ°å…¨å±€': 'toggleDropdownã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹',
        
        # æ‰‹æœºç‰ˆæ ·å¼ç›¸å…³
        'ğŸ”¥ æ‰‹æ©Ÿç‰ˆå¼·åˆ¶ä¿®æ”¹æ¨£å¼ï¼ˆè§£æ±ºCSSç„¡æ³•è¦†è“‹å…§è¯æ¨£å¼çš„å•é¡Œï¼‰': 'ğŸ”¥ ãƒ¢ãƒã‚¤ãƒ«ç‰ˆå¼·åˆ¶ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´ï¼ˆCSSã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ä¸Šæ›¸ãå•é¡Œã‚’è§£æ±ºï¼‰',
        'åƒ…åœ¨æ‰‹æ©Ÿç‰ˆåŸ·è¡Œ': 'ãƒ¢ãƒã‚¤ãƒ«ç‰ˆã§ã®ã¿å®Ÿè¡Œ',
        'ğŸ”¥ å¼·åˆ¶æ‡‰ç”¨æ‰‹æ©Ÿç‰ˆæ¨£å¼': 'ğŸ”¥ ãƒ¢ãƒã‚¤ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¼·åˆ¶é©ç”¨',
        'åƒ¹å€¼å¡ç‰‡ï¼ˆUltra-Fast Processingã€è¶…é«˜æº–ç¢ºç‡ã€æ€§åƒ¹æ¯”æœ€é«˜ï¼‰': 'ä¾¡å€¤ã‚«ãƒ¼ãƒ‰ï¼ˆè¶…é«˜é€Ÿå‡¦ç†ã€æœ€é«˜ç²¾åº¦ã€æœ€é«˜ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰',
        'ä¿®æ”¹åœ–æ¨™å®¹å™¨': 'ã‚¢ã‚¤ã‚³ãƒ³ã‚³ãƒ³ãƒ†ãƒŠã‚’å¤‰æ›´',
        'ä¿®æ”¹æ¨™é¡Œ': 'ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´',
        'ä¿®æ”¹æ®µè½': 'æ®µè½ã‚’å¤‰æ›´',
        'åŠŸèƒ½çµ„å„ªåŒ–ï¼ˆæ‰‹æ©Ÿç‰ˆï¼‰- ä½¿ç”¨æ›´ç²¾ç¢ºçš„é¸æ“‡å™¨': 'æ©Ÿèƒ½ã‚°ãƒ«ãƒ¼ãƒ—æœ€é©åŒ–ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰- ã‚ˆã‚Šæ­£ç¢ºãªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ç”¨',
        'ğŸ” æ‰¾åˆ°': 'ğŸ” ç™ºè¦‹',
        'å€‹åŠŸèƒ½çµ„å®¹å™¨': 'å€‹ã®æ©Ÿèƒ½ã‚°ãƒ«ãƒ¼ãƒ—ã‚³ãƒ³ãƒ†ãƒŠ',
        'æ‰¾åˆ° grid å®¹å™¨ä¸¦æ”¹ç‚ºå‚ç›´æ’åˆ—': 'gridã‚³ãƒ³ãƒ†ãƒŠã‚’ç™ºè¦‹ã—å‚ç›´é…ç½®ã«å¤‰æ›´',
        'âœ… åŠŸèƒ½çµ„': 'âœ… æ©Ÿèƒ½ã‚°ãƒ«ãƒ¼ãƒ—',
        'grid å·²æ”¹ç‚ºå‚ç›´æ’åˆ—': 'gridã‚’å‚ç›´é…ç½®ã«å¤‰æ›´',
        'å¾½ç« ç½®ä¸­ï¼ˆæ‰¾åˆ°æ‰€æœ‰å¸¶æœ‰ feature-badge é¡çš„å…ƒç´ ï¼‰': 'ãƒãƒƒã‚¸ã‚’ä¸­å¤®é…ç½®ï¼ˆfeature-badgeã‚¯ãƒ©ã‚¹ã‚’æŒã¤å…¨è¦ç´ ã‚’ç™ºè¦‹ï¼‰',
        'æ‰¾åˆ°': 'ç™ºè¦‹',
        'å€‹å¾½ç« ': 'å€‹ã®ãƒãƒƒã‚¸',
        'æ¢å¾©åŸå§‹å¤§å°': 'å…ƒã®ã‚µã‚¤ã‚ºã«æˆ»ã™',
        'æ¢å¾©åŸå§‹å…§è·': 'å…ƒã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã«æˆ»ã™',
        'æ¨™é¡Œç½®ä¸­': 'ã‚¿ã‚¤ãƒˆãƒ«ã‚’ä¸­å¤®é…ç½®',
        'å€‹æ¨™é¡Œ': 'å€‹ã®ã‚¿ã‚¤ãƒˆãƒ«',
        'æ¸›å°‘æ‰€æœ‰ flex å®¹å™¨çš„é–“è·ï¼ˆOCRã€æ™ºèƒ½åˆ†é¡ã€å³æ™‚åŒæ­¥ç­‰ï¼‰': 'å…¨flexã‚³ãƒ³ãƒ†ãƒŠã®é–“éš”ã‚’å‰Šæ¸›ï¼ˆOCRã€ã‚¹ãƒãƒ¼ãƒˆåˆ†é¡ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸç­‰ï¼‰',
        'å€‹æè¿° flex å®¹å™¨': 'å€‹ã®èª¬æ˜flexã‚³ãƒ³ãƒ†ãƒŠ',
        'æ‰€æœ‰æè¿°æ®µè½é–“è·éƒ½æ¸›å°‘ 30ptï¼ˆå†æ¸›å° 10ptï¼‰': 'å…¨èª¬æ˜æ®µè½ã®é–“éš”ã‚’30ptå‰Šæ¸›ï¼ˆã•ã‚‰ã«10ptå‰Šæ¸›ï¼‰',
        'å·²å„ªåŒ–å®Œæˆ': 'æœ€é©åŒ–å®Œäº†',
        'å¡ç‰‡èˆ‡ä¸Šæ–¹æ–‡å­—é–“è·æ¸›å°‘ 20pt': 'ã‚«ãƒ¼ãƒ‰ä¸Šéƒ¨ãƒãƒ¼ã‚¸ãƒ³ã‚’20ptå‰Šæ¸›',
    }
    
    print(f"ğŸ”„ ç¿»è¯‘ {len(js_translations)} ä¸ªå¸¸è§è¯ç»„...")
    
    # æŒ‰é•¿åº¦æ’åºï¼Œå…ˆæ›¿æ¢é•¿çš„ï¼Œé¿å…éƒ¨åˆ†åŒ¹é…
    sorted_translations = sorted(js_translations.items(), key=lambda x: len(x[0]), reverse=True)
    
    for chinese, japanese in sorted_translations:
        content = content.replace(chinese, japanese)
    
    # ç»Ÿè®¡ç¿»è¯‘åçš„ä¸­æ–‡å­—ç¬¦æ•°
    chinese_chars_after = len(re.findall(r'[ä¸€-é¾¥]', content))
    
    print(f"\nğŸ“Š Phase 2 ç¿»è¯‘è¿›åº¦:")
    print(f"  ç¿»è¯‘å‰: {chinese_chars_before} ä¸ªä¸­æ–‡å­—ç¬¦")
    print(f"  ç¿»è¯‘å: {chinese_chars_after} ä¸ªä¸­æ–‡å­—ç¬¦")
    print(f"  å·²ç¿»è¯‘: {chinese_chars_before - chinese_chars_after} ä¸ªå­—ç¬¦")
    print(f"  å‰©ä½™: {chinese_chars_after} ä¸ªå­—ç¬¦")
    
    # ä¿å­˜æ–‡ä»¶
    print(f"\nğŸ’¾ ä¿å­˜æ–‡ä»¶...")
    with open(file_path, 'w', encoding='utf-8') as f:
        f.write(content)
    
    if chinese_chars_after > 0:
        print(f"âš ï¸  è¿˜éœ€è¦ç»§ç»­ç¿»è¯‘å‰©ä½™çš„ {chinese_chars_after} ä¸ªä¸­æ–‡å­—ç¬¦")
        return chinese_chars_after
    else:
        print(f"ğŸ‰ Phase 2 å®Œæˆï¼")
        return 0

if __name__ == '__main__':
    remaining = fix_jp_index_phase2()
    print(f"\n{'='*60}")
    if remaining > 0:
        print(f"ğŸ”„ éœ€è¦Phase 3ç»§ç»­ç¿»è¯‘...")
    else:
        print(f"âœ… æ‰€æœ‰JavaScriptç¿»è¯‘å®Œæˆï¼")

