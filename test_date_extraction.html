<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Statement Date æå–æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-case { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .test-case.pass { background: #d1fae5; border-color: #10b981; }
        .test-case.fail { background: #fee2e2; border-color: #ef4444; }
        .label { font-weight: bold; color: #666; }
        .value { font-family: monospace; color: #333; }
        h1 { color: #1f2937; }
        h2 { color: #4b5563; margin-top: 30px; }
        .status { font-weight: bold; font-size: 1.2em; }
        .status.pass { color: #10b981; }
        .status.fail { color: #ef4444; }
    </style>
</head>
<body>
    <h1>ğŸ“… Statement Date æå–æµ‹è¯•å·¥å…·</h1>
    <p>æµ‹è¯•å¤šç§æ—¥æœŸæ ¼å¼çš„æå–é€»è¾‘</p>
    
    <div id="testResults"></div>
    
    <script>
        // ğŸ”¥ å¤åˆ¶è‡ª document-detail-new.js çš„æ—¥æœŸæå–é€»è¾‘
        function extractStatementDate(period) {
            console.log('ğŸ“… å˜—è©¦å¾ period æå–æ—¥æœŸ:', period);
            
            let extractedDate = null;
            
            // æ ¼å¼1: "to MM/DD/YYYY" æˆ– "to DD/MM/YYYY"
            let match = period.match(/to\s+(\d{1,2}[\/\-]\d{1,2}[\/\-]\d{4})/i);
            if (match) {
                const dateStr = match[1];
                const parts = dateStr.split(/[\/\-]/);
                
                if (parseInt(parts[0]) > 12) {
                    extractedDate = `${parts[2]}-${parts[1].padStart(2, '0')}-${parts[0].padStart(2, '0')}`;
                } else {
                    extractedDate = `${parts[2]}-${parts[0].padStart(2, '0')}-${parts[1].padStart(2, '0')}`;
                }
                console.log('âœ… å¾ "to MM/DD/YYYY" æå–:', extractedDate);
            }
            
            // æ ¼å¼2: "è‡³ YYYY-MM-DD"
            if (!extractedDate) {
                match = period.match(/[è‡³to]\s+(\d{4}[\-\/]\d{1,2}[\-\/]\d{1,2})/i);
                if (match) {
                    extractedDate = match[1].replace(/\//g, '-');
                    const parts = extractedDate.split('-');
                    extractedDate = `${parts[0]}-${parts[1].padStart(2, '0')}-${parts[2].padStart(2, '0')}`;
                    console.log('âœ… å¾ "è‡³ YYYY-MM-DD" æå–:', extractedDate);
                }
            }
            
            // æ ¼å¼3: "2018-12-03 to 2019-01-01"ï¼ˆå®Œæ•´æ ¼å¼ï¼‰
            if (!extractedDate) {
                match = period.match(/(\d{4}[\-\/]\d{1,2}[\-\/]\d{1,2})\s+to\s+(\d{4}[\-\/]\d{1,2}[\-\/]\d{1,2})/i);
                if (match) {
                    extractedDate = match[2].replace(/\//g, '-');
                    const parts = extractedDate.split('-');
                    extractedDate = `${parts[0]}-${parts[1].padStart(2, '0')}-${parts[2].padStart(2, '0')}`;
                    console.log('âœ… å¾å®Œæ•´æ—¥æœŸç¯„åœæå–çµæŸæ—¥æœŸ:', extractedDate);
                }
            }
            
            // æ ¼å¼4: åªæœ‰ä¸€å€‹æ—¥æœŸ
            if (!extractedDate) {
                match = period.match(/(\d{4}[\-\/]\d{1,2}[\-\/]\d{1,2})/);
                if (match) {
                    extractedDate = match[1].replace(/\//g, '-');
                    const parts = extractedDate.split('-');
                    if (parts[0].length === 4) {
                        extractedDate = `${parts[0]}-${parts[1].padStart(2, '0')}-${parts[2].padStart(2, '0')}`;
                    }
                    console.log('âœ… å¾å–®å€‹æ—¥æœŸæå–:', extractedDate);
                }
            }
            
            return extractedDate || null;
        }
        
        // æµ‹è¯•ç”¨ä¾‹
        const testCases = [
            {
                name: 'ç”¨æˆ·å®é™…æ•°æ®ï¼ˆChase Bankï¼‰',
                input: '2018-12-03 to 2019-01-01',
                expected: '2019-01-01',
                priority: 'HIGH'
            },
            {
                name: 'MM/DD/YYYY æ ¼å¼',
                input: '12/03/2018 to 01/25/2019',
                expected: '2019-01-25',
                priority: 'MEDIUM'
            },
            {
                name: 'DD/MM/YYYY æ ¼å¼',
                input: '03/12/2018 to 25/01/2019',
                expected: '2019-01-25',
                priority: 'MEDIUM'
            },
            {
                name: 'ä¸­æ–‡æ ¼å¼',
                input: '2018-12-03 è‡³ 2019-01-25',
                expected: '2019-01-25',
                priority: 'MEDIUM'
            },
            {
                name: 'å•ä¸ªæ—¥æœŸ',
                input: '2019-01-25',
                expected: '2019-01-25',
                priority: 'LOW'
            },
            {
                name: 'çŸ­æ ¼å¼ï¼ˆæœˆ/æ—¥ä¸è¡¥é›¶ï¼‰',
                input: '2018-12-3 to 2019-1-5',
                expected: '2019-01-05',
                priority: 'LOW'
            }
        ];
        
        // è¿è¡Œæµ‹è¯•
        let passCount = 0;
        let failCount = 0;
        const resultsContainer = document.getElementById('testResults');
        
        testCases.forEach((testCase, index) => {
            const result = extractStatementDate(testCase.input);
            const pass = result === testCase.expected;
            
            if (pass) passCount++;
            else failCount++;
            
            const div = document.createElement('div');
            div.className = `test-case ${pass ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <h3>æµ‹è¯• ${index + 1}: ${testCase.name} ${testCase.priority === 'HIGH' ? 'â­â­â­' : testCase.priority === 'MEDIUM' ? 'â­â­' : 'â­'}</h3>
                <p><span class="label">è¾“å…¥:</span> <span class="value">${testCase.input}</span></p>
                <p><span class="label">é¢„æœŸ:</span> <span class="value">${testCase.expected}</span></p>
                <p><span class="label">å®é™…:</span> <span class="value">${result || 'null'}</span></p>
                <p class="status ${pass ? 'pass' : 'fail'}">${pass ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}</p>
            `;
            resultsContainer.appendChild(div);
        });
        
        // æ€»ç»“
        const summary = document.createElement('div');
        summary.innerHTML = `
            <h2>ğŸ“Š æµ‹è¯•æ€»ç»“</h2>
            <p><span class="label">é€šè¿‡:</span> <span class="status pass">${passCount}/${testCases.length}</span></p>
            <p><span class="label">å¤±è´¥:</span> <span class="status fail">${failCount}/${testCases.length}</span></p>
            <p><span class="label">æˆåŠŸç‡:</span> <span class="status ${passCount === testCases.length ? 'pass' : 'fail'}">${Math.round(passCount / testCases.length * 100)}%</span></p>
        `;
        resultsContainer.insertBefore(summary, resultsContainer.firstChild);
        
        console.log(`\nğŸ“Š æµ‹è¯•å®Œæˆ: ${passCount}/${testCases.length} é€šè¿‡`);
    </script>
</body>
</html>
