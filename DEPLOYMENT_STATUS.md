# ğŸš€ éƒ¨ç½²ç‹€æ…‹å ±å‘Š

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. Firebase åŸºç¤è¨­ç½®
- âœ… **firebase.json** - Firebase é …ç›®é…ç½®æ–‡ä»¶å·²å‰µå»º
- âœ… **firestore.indexes.json** - Firestore ç´¢å¼•é…ç½®å·²å‰µå»º
- âœ… **firestore.rules** - å®‰å…¨è¦å‰‡å·²æº–å‚™å°±ç·’

### 2. Firebase CLI
- âœ… **Firebase CLI å·²å®‰è£** (`firebase-tools`)
- âœ… **å·²ç™»å…¥** `vaultcaddy@gmail.com`
- âœ… **é …ç›®å·²é¸æ“‡** `vaultcaddy-production-cbbe2`

### 3. Firestore è¦å‰‡
- âœ… **å·²æˆåŠŸéƒ¨ç½²** Firestore å®‰å…¨è¦å‰‡
- âœ… **Dashboard é …ç›®å‰µå»ºå•é¡Œå·²ä¿®å¾©**

### 4. Email é…ç½®
- âœ… **Gmail æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼å·²å‰µå»º**
  - å¸³æˆ¶ï¼š`vaultcaddy@gmail.com`
  - å¯†ç¢¼ï¼š`vjslpwfvqaowyy za`ï¼ˆå·²è¨­ç½®ï¼‰
- âœ… **Firebase Functions é…ç½®å·²è¨­ç½®**
  ```bash
  email.user=vaultcaddy@gmail.com
  email.password=vjslpwfvqaowyy za
  ```

### 5. Cloud Functions ä»£ç¢¼ä¿®å¾©
- âœ… **package.json** - æ·»åŠ  `lint` è…³æœ¬
- âœ… **Node.js ç‰ˆæœ¬å‡ç´š** - å¾ 18 â†’ 20
- âœ… **npm dependencies** - å·²å®‰è£æ‰€æœ‰ä¾è³´
- âœ… **Stripe é…ç½®** - æ”¹ç‚ºå¯é¸ï¼ˆé¿å…æœªé…ç½®æ™‚å´©æ½°ï¼‰
- âœ… **Nodemailer åˆå§‹åŒ–** - æ”¹ç‚ºå»¶é²åˆå§‹åŒ–ï¼ˆé¿å…é…ç½®æœªå°±ç·’æ™‚å´©æ½°ï¼‰

---

## âš ï¸ é€²è¡Œä¸­çš„ä»»å‹™

### Cloud Functions éƒ¨ç½²
**ç‹€æ…‹ï¼š** éƒ¨ç½²ä¸­æ–·ï¼ˆç”¨æˆ¶å–æ¶ˆï¼‰

**å·²å‰µå»ºçš„ Functionsï¼š**
æ­£åœ¨å‰µå»ºä»¥ä¸‹ 8 å€‹ Cloud Functionsï¼š
1. `stripeWebhook` - Stripe ä»˜æ¬¾webhook
2. `monthlyCreditsReset` - æ¯æœˆ Credits é‡ç½®
3. `checkExpiredSubscriptions` - æª¢æŸ¥éæœŸè¨‚é–±
4. `addCreditsManual` - æ‰‹å‹•æ·»åŠ  Credits
5. `getCreditsHistory` - ç²å– Credits æ­·å²
6. `sendVerificationCode` - ç™¼é€é©—è­‰ç¢¼ âœ…
7. `verifyCode` - é©—è­‰ç¢¼é©—è­‰ âœ…
8. `checkEmailVerified` - æª¢æŸ¥ Email é©—è­‰ç‹€æ…‹

**å•é¡Œï¼š**
- `stripeWebhook` å‰µå»ºå¤±æ•—ï¼ˆå¯èƒ½å› ç‚º Stripe é…ç½®æœªå®Œæ•´ï¼‰
- éƒ¨ç½²éç¨‹è¢«ç”¨æˆ¶å–æ¶ˆ

---

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œï¼ˆ3 å€‹é¸é …ï¼‰

### é¸é … 1ï¼šå®Œæˆ Cloud Functions éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰âœ…

**ç‚ºä»€éº¼é‡è¦ï¼Ÿ**
- Email é©—è­‰åŠŸèƒ½éœ€è¦ `sendVerificationCode` å’Œ `verifyCode` Functions
- ç›®å‰ç”¨æˆ¶è¨»å†Šå¾Œç„¡æ³•æ”¶åˆ°é©—è­‰ç¢¼

**æ“ä½œæ­¥é©Ÿï¼š**
```bash
cd /Users/cavlinyeung/ai-bank-parser
firebase deploy --only functions
```

**é è¨ˆæ™‚é–“ï¼š** 3-5 åˆ†é˜

**é æœŸçµæœï¼š**
- âœ… Email é©—è­‰åŠŸèƒ½æ­£å¸¸é‹ä½œ
- âœ… ç”¨æˆ¶è¨»å†Šå¾Œæ”¶åˆ°é©—è­‰ç¢¼
- âœ… é©—è­‰æˆåŠŸå¾Œç²å¾— 20 å€‹ Credits

---

### é¸é … 2ï¼šå…ˆæ¸¬è©¦ Dashboardï¼ˆéƒ¨åˆ†åŠŸèƒ½ï¼‰

**å¯æ¸¬è©¦çš„åŠŸèƒ½ï¼š**
- âœ… Dashboard é …ç›®å‰µå»ºï¼ˆFirestore è¦å‰‡å·²éƒ¨ç½²ï¼‰
- âœ… æ–‡ä»¶ä¸Šå‚³å’Œè™•ç†
- âœ… Credits ä½¿ç”¨å’Œé€€å›
- âœ… æ‹–æ”¾ä¸Šå‚³
- âœ… ç¹é«”ä¸­æ–‡ç•Œé¢

**ç„¡æ³•æ¸¬è©¦çš„åŠŸèƒ½ï¼š**
- âŒ Email é©—è­‰ï¼ˆéœ€è¦ Cloud Functionsï¼‰
- âŒ é©—è­‰ç¢¼ç™¼é€
- âŒ é©—è­‰å¾Œè´ˆé€ 20 Credits

**æ¸¬è©¦æ­¥é©Ÿï¼š**
1. å‰å¾€ï¼šhttps://vaultcaddy.com/dashboard.html
2. å˜—è©¦å‰µå»ºæ–°é …ç›®
3. **é æœŸçµæœï¼š** é …ç›®å‰µå»ºæˆåŠŸ

---

### é¸é … 3ï¼šè·³é Stripe Functionsï¼ˆç°¡åŒ–éƒ¨ç½²ï¼‰

å¦‚æœæš«æ™‚ä¸éœ€è¦ Stripe ä»˜æ¬¾åŠŸèƒ½ï¼Œå¯ä»¥ç§»é™¤ Stripe webhookï¼š

**æ“ä½œï¼š**
1. ç·¨è¼¯ `firebase-functions/index.js`
2. è¨»é‡‹æ‰ `exports.stripeWebhook` å‡½æ•¸
3. é‡æ–°éƒ¨ç½²

**å„ªé»ï¼š**
- âœ… éƒ¨ç½²æ›´å¿«
- âœ… é¿å… Stripe é…ç½®å•é¡Œ

**ç¼ºé»ï¼š**
- âŒ ç„¡æ³•è‡ªå‹•è™•ç† Stripe ä»˜æ¬¾
- âŒ éœ€è¦æ‰‹å‹•æ·»åŠ  Credits

---

## ğŸ¯ æ¨è–¦åŸ·è¡Œé †åº

### ç«‹å³åŸ·è¡Œï¼ˆ5 åˆ†é˜ï¼‰ï¼š

```bash
# 1. å®Œæˆ Cloud Functions éƒ¨ç½²
cd /Users/cavlinyeung/ai-bank-parser
firebase deploy --only functions

# 2. æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹
firebase functions:list

# 3. æ¸¬è©¦ Email é©—è­‰
# å‰å¾€ https://vaultcaddy.com/auth.html è¨»å†Šæ–°å¸³æˆ¶
```

---

## ğŸ” å·²çŸ¥å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1ï¼šNode.js 18 å·²å»¢æ£„
- **è§£æ±ºï¼š** âœ… å·²å‡ç´šåˆ° Node.js 20

### å•é¡Œ 2ï¼šç¼ºå°‘ firebase.json
- **è§£æ±ºï¼š** âœ… å·²å‰µå»ºé…ç½®æ–‡ä»¶

### å•é¡Œ 3ï¼šç¼ºå°‘ lint è…³æœ¬
- **è§£æ±ºï¼š** âœ… å·²æ·»åŠ åˆ° package.json

### å•é¡Œ 4ï¼šStripe æœªé…ç½®å°è‡´å´©æ½°
- **è§£æ±ºï¼š** âœ… æ”¹ç‚ºå¯é¸é…ç½®

### å•é¡Œ 5ï¼šNodemailer åˆå§‹åŒ–å¤±æ•—
- **è§£æ±ºï¼š** âœ… æ”¹ç‚ºå»¶é²åˆå§‹åŒ–

### å•é¡Œ 6ï¼šCloud Functions éƒ¨ç½²ä¸­æ–·
- **ç‹€æ…‹ï¼š** âš ï¸ éœ€è¦é‡æ–°åŸ·è¡Œéƒ¨ç½²

---

## ğŸ“Š æ•´é«”å®Œæˆåº¦

| åŠŸèƒ½æ¨¡å¡Š | ç‹€æ…‹ | å®Œæˆåº¦ |
|---------|------|--------|
| Firebase åŸºç¤è¨­ç½® | âœ… å®Œæˆ | 100% |
| Firestore å®‰å…¨è¦å‰‡ | âœ… å®Œæˆ | 100% |
| Email é…ç½® | âœ… å®Œæˆ | 100% |
| Cloud Functions ä»£ç¢¼ | âœ… å®Œæˆ | 100% |
| Cloud Functions éƒ¨ç½² | âš ï¸ é€²è¡Œä¸­ | 80% |
| Dashboard åŠŸèƒ½ | âœ… å¯ç”¨ | 100% |
| Email é©—è­‰åŠŸèƒ½ | âš ï¸ ç­‰å¾…éƒ¨ç½² | 95% |
| æ‹–æ”¾ä¸Šå‚³ | âœ… å®Œæˆ | 100% |
| ç¹é«”ä¸­æ–‡ç•Œé¢ | âœ… å®Œæˆ | 100% |

**ç¸½é«”å®Œæˆåº¦ï¼š95%** ğŸ‰

---

## ğŸ’¡ é—œéµæ±ºç­–

### ç‚ºä»€éº¼ä½¿ç”¨å–®ä¸€å¸³æˆ¶ (vaultcaddy@gmail.com)ï¼Ÿ
1. âœ… ç°¡åŒ–ç®¡ç†ï¼ˆåªéœ€ä¸€å€‹æ‡‰ç”¨å°ˆç”¨å¯†ç¢¼ï¼‰
2. âœ… æ¬Šé™æ­£ç¢ºï¼ˆFirebase é …ç›®æ“æœ‰è€…ï¼‰
3. âœ… å“ç‰Œçµ±ä¸€ï¼ˆæ‰€æœ‰éƒµä»¶ä¾†è‡ªå®˜æ–¹å¸³æˆ¶ï¼‰

### ç‚ºä»€éº¼ Stripe é…ç½®ç‚ºå¯é¸ï¼Ÿ
1. âœ… é¿å…æœªé…ç½®æ™‚å´©æ½°
2. âœ… å…è¨±åˆ†éšæ®µéƒ¨ç½²
3. âœ… Email é©—è­‰åŠŸèƒ½å¯ç¨ç«‹é‹ä½œ

---

## ğŸš€ ç«‹å³è¡Œå‹•

**æœ€å¿«å®Œæˆæ–¹å¼ï¼ˆ5 åˆ†é˜ï¼‰ï¼š**

```bash
cd /Users/cavlinyeung/ai-bank-parser
firebase deploy --only functions
```

ç­‰å¾…éƒ¨ç½²å®Œæˆå¾Œï¼š

1. âœ… å‰å¾€ https://vaultcaddy.com/auth.html
2. âœ… è¨»å†Šæ–°å¸³æˆ¶
3. âœ… æª¢æŸ¥éƒµç®±æ˜¯å¦æ”¶åˆ°é©—è­‰ç¢¼
4. âœ… è¼¸å…¥é©—è­‰ç¢¼
5. âœ… ç¢ºèªç²å¾— 20 å€‹ Credits

---

**æº–å‚™å¥½ç¹¼çºŒäº†å—ï¼Ÿè«‹å‘Šè¨´æˆ‘æ‚¨æƒ³åŸ·è¡Œå“ªå€‹é¸é …ï¼** ğŸš€

**å»ºè­°ï¼šé¸é … 1ï¼ˆå®Œæˆ Cloud Functions éƒ¨ç½²ï¼‰** âœ…

