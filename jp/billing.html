<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <!-- èµ„æºé¢„è¿æ¥ - æ€§èƒ½ä¼˜åŒ– -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://www.gstatic.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">

    <meta charset="UTF-8">
    <!-- æ€§èƒ½ä¼˜åŒ–ï¼šå…³é”®CSSå†…è” -->
    <style>
        /* å…³é”®CSS - é¦–å±æ¸²æŸ“å¿…éœ€ */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;line-height:1.6;color:#1f2937}
        .vaultcaddy-navbar{position:fixed;top:0;width:100%;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.1);z-index:1000}
        .hero-section{min-height:100vh;display:flex;align-items:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}
        .container{max-width:1200px;margin:0 auto;padding:0 1rem}
        .loading{opacity:0.5}
    </style>

    
    <!-- ğŸ”’ ãƒšãƒ¼ã‚¸ä¿è­· -->
    <style>
        body.auth-checking { visibility: hidden !important; }
        .auth-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; align-items: center; justify-content: center; z-index: 9999; visibility: visible !important; }
        body.auth-ready .auth-loading { display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <script>
        document.documentElement.classList.add('auth-checking');
        if (document.body) { document.body.classList.add('auth-checking'); } 
        else { document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('auth-checking'); }); }
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="billing_credits">è«‹æ±‚ã¨ç©åˆ† - VaultCaddy</title>
    <meta name="description" content="AIæ­è¼‰ã®Billingæ˜ç´°æ›¸å¤‰æ›ãƒ„ãƒ¼ãƒ«ã€‚3ç§’ã§PDFã‚’Excel/QuickBooks/Xeroã«å¤‰æ›ã€ç²¾åº¦98%ã€‚20ãƒšãƒ¼ã‚¸ç„¡æ–™è©¦ç”¨ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ä¸è¦ã€‚Â¥926/æœˆã‹ã‚‰ã€æ—¥æœ¬200+ä¼æ¥­ãŒä¿¡é ¼ã€‚">
    <meta property="og:title" content="Billingæ˜ç´°æ›¸å¤‰æ› | PDFã‹ã‚‰Excel/QuickBooks | ç²¾åº¦98% | VaultCaddy">
    <meta property="og:description" content="AIæ­è¼‰ã®Billingæ˜ç´°æ›¸å¤‰æ›ãƒ„ãƒ¼ãƒ«ã€‚3ç§’ã§PDFã‚’Excel/QuickBooks/Xeroã«å¤‰æ›ã€ç²¾åº¦98%ã€‚20ãƒšãƒ¼ã‚¸ç„¡æ–™è©¦ç”¨ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ä¸è¦ã€‚Â¥926/æœˆã‹ã‚‰ã€æ—¥æœ¬200+ä¼æ¥­ãŒä¿¡é ¼ã€‚">
    <meta property="og:url" content="https://vaultcaddy.com/billing.html">
    <meta property="og:type" content="website">
    <link rel="canonical" href="https://vaultcaddy.com/billing.html">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../pages.css">
    <link rel="stylesheet" href="../dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- ä¼˜åŒ–åçš„å…¬å…±ç»„ä»¶ (2026-01-23) -->
    <link rel="stylesheet" href="../user-menu-styles.css">
    <script defer src="../logger.js"></script>
    <script defer src="../init-manager.js"></script>
    <script defer src="../user-menu-manager.js"></script>
    <script defer src="../mobile-menu-manager.js"></script>
    <script defer src="../config.js"></script>
    <script defer src="../translations.js"></script>
    
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-functions-compat.js"></script>
    
    <!-- Firebase è¨­å®šã¨æ•¸æ“šç®¡ç†å™¨ -->
    <script defer src="../firebase-config.js?v=20251105-force-init"></script>
    <!-- ğŸ”¥ æ–°ã®ç°¡åŒ–ç³»çµ± -->
    <script defer src="../simple-auth.js?v=20251105-force-init"></script>
    <script defer src="../user-profile-manager.js?v=20251120"></script>
    <script defer src="../simple-data-manager.js?v=20251105-force-init"></script>
    
    <!-- Email æ¤œè¨¼ãƒã‚§ãƒƒã‚¯ -->
    <script defer src="../email-verification-check.js"></script>
    
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ -->
    <script defer src="../navbar-interactions.js?v=20251108"></script>
    
    <!-- âœ… è¨€èªç®¡ç†å™¨ï¼ˆå¿…é ˆã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ¬„ä¹‹å‰èª­ã¿è¾¼ã¿ï¼‰-->
    <script defer src="language-manager.js?v=20251120"></script>
    
    <!-- âœ… çµ±ä¸€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ¬„ç³»çµ±ï¼šéœæ…‹ HTML + navbar-component.js -->
    <script defer src="../navbar-component.js?v=20260125-user-menu-v2"></script>
    <script defer src="../sidebar-component.js?v=20251107-rebuild"></script>
    <style>
        body {
            background: #ffffff;
            color: #1f2937;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .account-container {
            display: flex;
            min-height: calc(100vh - 60px);
            padding-top: 60px;
        }
        
        .sidebar {
            width: 280px;
            background: #f8fafc;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            top: 60px;
            bottom: 0;
            left: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 1.5rem 1rem 1rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .sidebar-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }
        
        .sidebar-section {
            padding: 1rem 0;
            border-top: 1px solid #e2e8f0;
        }
        
        .sidebar-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: 0 0 0.5rem 1rem;
        }
        
        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            background: #ffffff;
            margin-top: auto;
        }
        
        .sidebar-stats {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .stat-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 1rem 0;
        }
        
        .sidebar-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .sidebar-nav .nav-item {
            margin: 0;
        }
        
        .sidebar-nav .nav-item a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: #6b7280;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-nav .nav-item.active a {
            background: #eff6ff;
            color: #2563eb;
            border-left-color: #2563eb;
        }
        
        .sidebar-nav .nav-item a:hover {
            background: #f1f5f9;
            color: #374151;
        }
        
        .sidebar-nav .nav-item a i {
            width: 20px;
            margin-right: 0.75rem;
            font-size: 1rem;
        }
        
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem 3rem;
            overflow-y: auto;
            min-height: calc(100vh - 60px);
            background: #ffffff;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .page-subtitle {
            color: #6b7280;
            margin: 0;
            font-size: 1rem;
        }
        
        .billing-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .billing-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .card-subtitle {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            width: 100%;
            justify-content: center;
        }
        
        .btn-primary {
            background: #7c3aed;
            color: white;
        }
        
        .btn-primary:hover {
            background: #6d28d9;
        }
        
        .btn-secondary {
            background: transparent;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            background: #f3f4f6;
            color: #1f2937;
        }
        
        .plans-section {
            margin-bottom: 3rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0 0 2rem 0;
            color: #1f2937;
        }
        
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .plan-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .plan-card.featured {
            border-color: #7c3aed;
            background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.15);
        }
        
        .plan-card {
            transition: all 0.3s ease;
        }
        
        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .plan-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.25);
        }
        
        .plan-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .plan-description {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .plan-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 1.5rem 0;
        }
        
        .plan-price span {
            font-size: 1rem;
            font-weight: 400;
            color: #6b7280;
        }
        
        .plan-features {
            list-style: none;
            margin: 0 0 2rem 0;
            padding: 0;
        }
        
        .plan-features li {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .plan-features li i {
            color: #10b981;
            margin-right: 0.75rem;
            width: 16px;
        }
        
        .current-plan-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #10b981;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .pricing-toggle {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card:nth-child(1) {
            animation-delay: 0.1s;
        }
        
        .plan-card:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .plan-card:nth-child(3) {
            animation-delay: 0.3s;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .credit-option {
            transition: all 0.2s ease;
        }
        
        .credit-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
            border-color: #7c3aed !important;
        }
        
        .credit-option.popular {
            animation: pulse-border 2s infinite;
        }
        
        @keyframes pulse-border {
            0% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.7);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(124, 58, 237, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0);
            }
        }
        
        .cta-btn {
            width: 100%;
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.4);
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .cta-btn:hover::before {
            left: 100%;
        }
        
        /* ğŸ§ª æ¸¬è©¦æ¨¡å¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        #test-mode-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.15);
        }
        
        #test-mode-info code {
            background: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 600;
            color: #dc2626;
        }
        
        @media (max-width: 1024px) {
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .billing-overview {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            /* ğŸ§ª æ¸¬è©¦æ¨¡å¼ãƒœã‚¿ãƒ³ã§æ‰‹æ©Ÿä¸Šã®ã‚¹ã‚¿ã‚¤ãƒ« */
            #test-mode-toggle {
                flex-direction: column;
                gap: 0.5rem !important;
                padding: 0.75rem !important;
            }
            
            #test-mode-toggle label {
                font-size: 0.75rem !important;
            }
            
            #test-mode-info {
                padding: 0.75rem !important;
                font-size: 0.75rem !important;
            }
        }
    
        @media (max-width: 768px) {
            /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ¬„ */
            .vaultcaddy-navbar {
                padding: 0 0.75rem !important;
            }
            
            /* é¡¯ç¤ºãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ */
            #mobile-menu-btn {
                display: block !important;
            }
            
            /* ãƒ¢ãƒã‚¤ãƒ«ç‰ˆé¡¯ç¤º logoï¼Œéš±è—ãƒ†ã‚­ã‚¹ãƒˆ */
            .desktop-logo {
                display: flex !important; /* âœ… é¡¯ç¤º V ã‚¢ã‚¤ã‚³ãƒ³ */
            }
            
            .desktop-logo-text {
                display: none !important; /* âœ… éš±è— "VaultCaddy" ãƒ†ã‚­ã‚¹ãƒˆ */
            }
            
            /* å®šåƒ¹ã‚«ãƒ¼ãƒ‰ãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼šæ”¹ã¨ã—ã¦ä¸Šä¸‹æ’åˆ—ï¼Œå¹´è²»ã§ä¸Š */
            #pricing-container {
                grid-template-columns: 1fr !important;
                gap: 1.5rem !important;
                padding: 0 !important; /* ğŸ”¥ å‰Šé™¤å…§è·ï¼Œè®“ã‚«ãƒ¼ãƒ‰æœ‰ç©ºé–“æ“´å±• */
                max-width: 100% !important;
            }
            
            /* ğŸ”¥ plans-section ãƒ¢ãƒã‚¤ãƒ«ç‰ˆä¹Ÿè¦èª¿æ•´ */
            .plans-section {
                padding: 0.5rem !important; /* å·¦å³å„ç•™ 0.5rem è¾¹è· */
            }
            
            /* å¹´è²»ãƒ—ãƒ©ãƒ³ç§»ã¾ã§ç¬¬ä¸€ä½ */
            #yearly-plan {
                order: 1 !important;
            }
            
            /* æœˆè²»ãƒ—ãƒ©ãƒ³ç§»ã¾ã§ç¬¬äºŒä½ */
            #monthly-plan {
                order: 2 !important;
            }
            
            /* ğŸ”¥ å®šåƒ¹ã‚«ãƒ¼ãƒ‰æ©Ÿèƒ½åˆ—è¡¨ï¼šæ”¹ã¨ã—ã¦ 2 åˆ—é¡¯ç¤º */
            .pricing-card div[style*="grid-template-columns: repeat(3, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.5rem 0.75rem !important;
            }
            
            /* ğŸ”¥ å¼·åˆ¶å‰Šé™¤å·¦å³å¯¬åº¦é™åˆ¶ï¼Œè®“ã‚«ãƒ¼ãƒ‰ä½”æ»¿å®¹å™¨ */
            html body .pricing-card[style],
            html body #monthly-plan[style],
            html body #yearly-plan[style],
            html body div[id="monthly-plan"],
            html body div[id="yearly-plan"] {
                max-width: none !important;
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                box-sizing: border-box !important;
            }
        
        /* ãƒ¢ãƒã‚¤ãƒ«ç‰ˆ UI æœ€é©åŒ–ã‚¹ã‚¿ã‚¤ãƒ« */
/* é©ç”¨ã« dashboard.html, firstproject.html, account.html, billing.html */

@media (max-width: 768px) {
    /* ==================== æ±ç”¨ã‚¹ã‚¿ã‚¤ãƒ« ==================== */
    
    /* ä¸»å®¹å™¨ */
    body {
        padding-top: 60px !important;
    }
    
    .main-container,
    .content-wrapper {
        padding: 0.75rem !important;
        margin: 0 !important;
    }
    
    /* ã™ã¹ã¦ã‚«ãƒ¼ãƒ‰ */
    .card,
    div[style*="border-radius"][style*="padding"] {
        padding: 1rem !important;
        margin-bottom: 1rem !important;
    }
    
    /* ã‚¿ã‚¤ãƒˆãƒ« */
    h1 {
        font-size: 1.5rem !important;
    }
    
    h2 {
        font-size: 1.25rem !important;
    }
    
    h3 {
        font-size: 1.125rem !important;
    }
    
    /* ãƒœã‚¿ãƒ³ */
    button,
    .btn {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
    }
    
    /* å…¥åŠ›ãƒœãƒƒã‚¯ã‚¹ */
    input,
    select,
    textarea {
        font-size: 1rem !important;
        padding: 0.75rem !important;
    }
    
    /* ==================== Dashboard å°‚ç”¨ ==================== */
    
    /* ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ—è¡¨ */
    .projects-header {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .projects-header > div {
        width: 100% !important;
    }
    
    /* ãƒ†ãƒ¼ãƒ–ãƒ« */
    table {
        font-size: 0.875rem !important;
    }
    
    table th,
    table td {
        padding: 0.5rem !important;
    }
    
    /* éš±è—åˆ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰ */
    table th:nth-child(3),
    table td:nth-child(3) {
        display: none !important; /* éš±è— CREATED åˆ— */
    }
    
    /* ==================== First Project å°‚ç”¨ ==================== */
    
    /* æ–‡æ›¸ã‚¿ã‚¤ãƒ—ã‚»ãƒ¬ã‚¯ã‚¿ */
    .document-type-selector {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
    }
    
    /* ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒªã‚¢ */
    .upload-area {
        padding: 2rem 1rem !important;
    }
    
    /* å°å‡ºãƒœã‚¿ãƒ³ã‚°ãƒ«ãƒ¼ãƒ— */
    .export-buttons {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .export-buttons button {
        width: 100% !important;
    }
    
    /* æ–‡æ›¸ãƒ†ãƒ¼ãƒ–ãƒ« */
    #team-project-tbody tr {
        font-size: 0.8125rem !important;
    }
    
    /* éš±è—åˆ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
    .document-table th:nth-child(4),
    .document-table td:nth-child(4),
    .document-table th:nth-child(5),
    .document-table td:nth-child(5) {
        display: none !important; /* éš±è—é‡‘é¡ã¨æ—¥ä»˜åˆ— */
    }
    
    /* ==================== Account å°‚ç”¨ ==================== */
    
    /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ */
    .profile-card {
        flex-direction: column !important;
        text-align: center !important;
    }
    
    .profile-avatar {
        margin: 0 auto 1rem !important;
    }
    
    /* ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆä½¿ç”¨çŠ¶æ³ */
    .credits-usage {
        flex-direction: column !important;
    }
    
    .credits-bar {
        width: 100% !important;
    }
    
    /* è¡¨å–® */
    .form-group {
        margin-bottom: 1rem !important;
    }
    
    .form-row {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    /* ==================== Billing å°‚ç”¨ ==================== */
    
    /* ä¾¡æ ¼ã‚«ãƒ¼ãƒ‰ */
    .pricing-cards {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    /* å–å¼•è¨˜éŒ²ãƒ†ãƒ¼ãƒ–ãƒ« */
    .transaction-table {
        font-size: 0.8125rem !important;
    }
    
    .transaction-table th:nth-child(2),
    .transaction-table td:nth-child(2) {
        display: none !important; /* éš±è—èª¬æ˜åˆ— */
    }
    
    /* ==================== ãƒ¢ãƒ¼ãƒ€ãƒ« ==================== */
    
    .modal-content {
        width: 95% !important;
        max-width: 95% !important;
        margin: 1rem !important;
        padding: 1rem !important;
    }
    
    .modal-header {
        padding: 1rem !important;
    }
    
    .modal-body {
        padding: 1rem !important;
    }
    
    .modal-footer {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .modal-footer button {
        width: 100% !important;
    }
    
    /* ==================== ã‚µã‚¤ãƒ‰ãƒãƒ¼ ==================== */
    
    .sidebar {
        width: 100% !important;
        position: fixed !important;
        top: 60px !important;
        left: -100% !important;
        height: calc(100vh - 60px) !important;
        transition: left 0.3s ease !important;
        z-index: 999 !important;
    }
    
    .sidebar.active {
        left: 0 !important;
    }
    
    /* ==================== ãã®ä»–æœ€é©åŒ– ==================== */
    
    /* éš±è—ãªã„å¿…è¦ã®è¦ç´  */
    .desktop-only {
        display: none !important;
    }
    
    /* é¡¯ç¤ºãƒ¢ãƒã‚¤ãƒ«ç‰ˆè¦ç´  */
    .mobile-only {
        display: block !important;
    }
    
    /* é–“è·èª¿æ•´ */
    section {
        padding: 1.5rem 0 !important;
    }
    
    /* ãƒœã‚¿ãƒ³ã‚°ãƒ«ãƒ¼ãƒ— */
    .button-group {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .button-group button,
    .button-group a {
        width: 100% !important;
    }
}

        /* Billing ç‰¹å®šã‚¹ã‚¿ã‚¤ãƒ« */
        @media (max-width: 768px) {
            .billing-header {
                flex-direction: column !important;
            }
            
            .plan-selector {
                width: 100% !important;
            }
            
            .payment-method {
                flex-direction: column !important;
            }
        }
        
        /* ==================== ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« ==================== */
        .modal-overlay {
            display: none !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            background: rgba(0, 0, 0, 0.5) !important;
            z-index: 9999 !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .modal-overlay.active {
            display: flex !important;
        }

        .modal-content {
            background: #ffffff !important;
            border-radius: 12px !important;
            padding: 2rem !important;
            width: 90% !important;
            max-width: 500px !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
            position: relative !important;
            z-index: 10000 !important;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #1f2937;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .btn-cancel {
            background: #ffffff;
            border: 1px solid #d1d5db;
            color: #374151;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-cancel:hover {
            background: #f9fafb;
        }

        .btn-create {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-create:hover {
            opacity: 0.9;
        }
        
        </style>
    
    <script>
        // å³åº§ã«å®Ÿè¡Œï¼šç¢ºä¿ãƒšãƒ¼ã‚¸å¯è¦‹
        (function() {
            logger.log('ğŸš€ Billingãƒšãƒ¼ã‚¸å³åº§ã«åˆæœŸåŒ–...');
            
            // ç¢ºä¿bodyå¯è¦‹
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            
            // ç¢ºä¿dashboardå®¹å™¨å¯è¦‹
            const dashboardContainer = document.querySelector('.dashboard-container');
            if (dashboardContainer) {
                dashboardContainer.style.display = 'flex';
                dashboardContainer.style.visibility = 'visible';
            }
            
            // ç¢ºä¿ã‚µã‚¤ãƒ‰ãƒãƒ¼å¯è¦‹
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.style.display = 'block';
                sidebar.style.visibility = 'visible';
            }
            
            // ç¢ºä¿ä¸»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¯è¦‹
            const mainContent = document.querySelector('.main-content');
            if (mainContent) {
                mainContent.style.display = 'block';
                mainContent.style.visibility = 'visible';
            }
            
            logger.log('âœ… Billingãƒšãƒ¼ã‚¸å³åº§ã«åˆæœŸåŒ–å®Œäº†');
        })();
    </script>
    
    <!-- Stripe Manager -->
    <script defer src="../stripe-manager.js"></script>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="alternate icon" type="image/png" href="../favicon.png">
    <link rel="stylesheet" href="mobile-responsive.css">

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LWPEKNC7RQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LWPEKNC7RQ');
    </script>


    <!-- èµ„æºæç¤º - ä¼˜åŒ–åŠ è½½é€Ÿåº¦ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
        <script src="/multilingual-data-sync.js"></script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "VaultCaddy - Billing Statement Converter",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Web, iOS, Android",
  "offers": {
    "@type": "Offer",
    "price": "926",
    "priceCurrency": "JPY",
    "priceValidUntil": "2026-12-31"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "127",
    "bestRating": "5"
  },
  "featureList": [
    "AI-powered recognition",
    "Excel/QuickBooks/Xero export",
    "98% accuracy",
    "3-second processing",
    "Batch processing",
    "Cloud storage"
  ]
}
</script>
    </head>
<body class="auth-checking">
    <!-- ğŸ”’ Auth åŠ è¼‰å‹•ç•« -->
    <div class="auth-loading">
        <div style="text-align: center;">
            <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
            <p style="color: #6b7280; font-size: 0.875rem;">æœ¬äººç¢ºèªä¸­...</p>
        </div>
    </div>
    
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ¬„ -->
    <!-- çµ±ä¸€ã•ã‚ŒãŸé™ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <!-- âœ… çµ±ä¸€ã•ã‚ŒãŸé™ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <!-- âœ… çµ±ä¸€ã•ã‚ŒãŸé™ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ï¼ˆã¨ firstproject.html å®Œå…¨ä¸€è‡´ï¼‰-->
    <nav class="vaultcaddy-navbar" id="main-navbar" style="position: fixed; top: 0; left: 0; right: 0; height: 60px; background: #ffffff; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; justify-content: space-between; padding: 0 2rem; z-index: 1000; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);">
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ï¼ˆåƒ…æ‰‹æ©Ÿé¡¯ç¤ºï¼‰-->
            <button id="mobile-menu-btn" onclick="openMobileSidebar()" style="display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; color: #1f2937; font-size: 1.5rem;">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="index.html" style="display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: #1f2937; font-weight: 600; font-size: 1.125rem;">
                <div class="desktop-logo" style="width: 32px; height: 32px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.25rem;">
                    V
                </div>
                <div class="desktop-logo-text">
                    <div>VaultCaddy</div>
                    <div style="font-size: 0.75rem; color: #6b7280; font-weight: 400; text-transform: uppercase; letter-spacing: 0.05em;">AI DOCUMENT PROCESSING</div>
                </div>
            </a>
        </div>
        <div style="display: flex; align-items: center; gap: 2rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
                <a href="index.html#features" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">æ©Ÿèƒ½</a>
                <a href="index.html#pricing" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">ä¾¡æ ¼</a>
                <a href="blog/" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">å­¦ç¿’ã‚»ãƒ³ã‚¿ãƒ¼</a>
                <a href="dashboard.html" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
            </div>
            
            <div id="language-switcher" style="display: inline-block; margin-right: 1rem;"></div>
                <div id="user-menu" style="position: relative; display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s;">
                <div id="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem;">Y</div>
            </div>
        </div>
    </nav>
    
    <!-- æ‰‹æ©Ÿã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div id="mobile-sidebar" style="position: fixed; top: 0; left: -100%; width: 280px; height: 100vh; background: white; z-index: 2000; transition: left 0.3s ease; box-shadow: 2px 0 10px rgba(0,0,0,0.1); overflow-y: auto;">
        <div style="padding: 1.5rem;">
            <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼é … -->
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                <a href="index.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-home" style="width: 20px; color: #667eea;"></i>
                    <span>ãƒ›ãƒ¼ãƒ </span>
                </a>
                <a href="index.html#features" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-star" style="width: 20px; color: #667eea;"></i>
                    <span>æ©Ÿèƒ½</span>
                </a>
                <a href="index.html#pricing" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-dollar-sign" style="width: 20px; color: #667eea;"></i>
                    <span>ä¾¡æ ¼</span>
                </a>
                <a href="blog/" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-graduation-cap" style="width: 20px; color: #667eea;"></i>
                    <span>å­¦ç¿’ã‚»ãƒ³ã‚¿ãƒ¼</span>
                </a>
                <a href="dashboard.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-th-large" style="width: 20px; color: #667eea;"></i>
                    <span>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
                </a>
                
                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>

                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>
                
                <a href="privacy.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-shield-alt" style="width: 20px; color: #6b7280;"></i>
                    <span>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</span>
                </a>
                <a href="terms.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-file-contract" style="width: 20px; color: #6b7280;"></i>
                    <span>åˆ©ç”¨è¦ç´„</span>
                </a>
            </div>
        </div>
    </div>
    </div>
    
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒã‚¹ã‚¯ -->
    <div id="mobile-sidebar-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1999; display: none;" onclick="closeMobileSidebar()"></div>
    
    <!-- âœ… æ–°ç‰ˆç”¨æˆ¶èœå–®ï¼ˆ2026-01-25 å„ªåŒ–ï¼‰-->
<div id="user-dropdown" style="display: none; position: fixed; top: 70px; right: 2rem; background: white; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); min-width: 280px; z-index: 2000; border: 1px solid #e5e7eb; overflow: hidden;">
    <!-- ç”¨æˆ¶ä¿¡æ¯é ­éƒ¨ï¼ˆæ¼¸è®ŠèƒŒæ™¯ï¼‰-->
    <div style="padding: 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div id="dropdown-avatar" style="width: 48px; height: 48px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-size: 1.25rem; font-weight: 600; border: 2px solid rgba(255,255,255,0.3);">U</div>
            <div style="flex: 1; min-width: 0;">
                <div id="dropdown-name" style="font-weight: 600; font-size: 1rem; margin-bottom: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">User</div>
                <div id="dropdown-email" style="font-size: 0.75rem; opacity: 0.9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">user@example.com</div>
            </div>
        </div>
        <div style="display: flex; gap: 0.75rem;">
            <div style="flex: 1; background: rgba(255,255,255,0.15); border-radius: 8px; padding: 0.75rem; text-align: center; backdrop-filter: blur(10px);">
                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</div>
                <div id="dropdown-credits" style="font-size: 1.25rem; font-weight: 700;">0</div>
            </div>
            <div style="flex: 1; background: rgba(255,255,255,0.15); border-radius: 8px; padding: 0.75rem; text-align: center; backdrop-filter: blur(10px);">
                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">ãƒ—ãƒ©ãƒ³</div>
                <div id="dropdown-plan" style="font-size: 0.875rem; font-weight: 600;">Free Plan</div>
            </div>
        </div>
    </div>
    <!-- èœå–®é …ç›® -->
    <div style="padding: 0.5rem;">
        <a href="account.html" onmouseout="this.style.backgroundColor='transparent'; this.style.transform='translateX(0)'" onmouseover="this.style.backgroundColor='#f3f4f6'; this.style.transform='translateX(4px)'" style="display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: all 0.2s ease; font-weight: 500;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px;">
                    <i class="fas fa-user" style="color: white; font-size: 0.875rem;"></i>
                </div>
                <span>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</span>
            </div>
            <span style="font-size: 0.75rem; color: #9ca3af;">âŒ˜A</span>
        </a>
        <a href="billing.html" onmouseout="this.style.backgroundColor='transparent'; this.style.transform='translateX(0)'" onmouseover="this.style.backgroundColor='#f3f4f6'; this.style.transform='translateX(4px)'" style="display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: all 0.2s ease; font-weight: 500;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 8px;">
                    <i class="fas fa-credit-card" style="color: white; font-size: 0.875rem;"></i>
                </div>
                <span>è«‹æ±‚</span>
            </div>
            <span style="font-size: 0.75rem; color: #9ca3af;">âŒ˜B</span>
        </a>
    </div>
    <!-- ç™»å‡ºæŒ‰éˆ• -->
    <div style="padding: 0.5rem; border-top: 1px solid #e5e7eb;">
        <button onclick="handleLogout()" onmouseout="this.style.backgroundColor='transparent'; this.style.transform='translateX(0)'" onmouseover="this.style.backgroundColor='#fef2f2'; this.style.transform='translateX(4px)'" style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 1rem; color: #dc2626; background: transparent; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-weight: 500; text-align: left;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: #fef2f2; border-radius: 8px;">
                    <i class="fas fa-sign-out-alt" style="color: #dc2626; font-size: 0.875rem;"></i>
                </div>
                <span>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>
            </div>
            <span style="font-size: 0.75rem; color: #9ca3af;">âŒ˜Q</span>
        </button>
    </div>
</div>
    
    <!-- âœ… index.html å‹•æ…‹æ›´æ–°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            logger.log('âœ… index.html åˆæœŸåŒ–');
            
            let userCredits = 0;
            let userEmail = '';
            let userDisplayName = '';
            
            // å–å¾—ãƒ¦ãƒ¼ã‚¶ãƒ¼é ­ãƒ†ã‚­ã‚¹ãƒˆ
            function getUserInitial() {
                // å„ªå…ˆä½¿ç”¨ displayName ã®æœ€åˆã®ãƒ†ã‚­ã‚¹ãƒˆ
                if (userDisplayName && userDisplayName.trim()) {
                    return userDisplayName.charAt(0).toUpperCase();
                }
                // å¦å‰‡ä½¿ç”¨ email ã®æœ€åˆã®ãƒ†ã‚­ã‚¹ãƒˆ
                if (userEmail && userEmail.trim()) {
                    return userEmail.charAt(0).toUpperCase();
                }
                return 'U';
            }
            
            // ğŸ”¥ ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼ˆå³åº§ã«å®Ÿè¡Œï¼Œãªã„å¾…æ©Ÿ DOMContentLoadedï¼‰
            (function() {
                logger.log('ğŸ”µ åˆæœŸåŒ–ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼...');
                
                // é–‹ãã‚µã‚¤ãƒ‰ãƒãƒ¼
                window.openMobileSidebar = function() {
                    logger.log('ğŸ”µ openMobileSidebar å‘¼ã³å‡ºã•ã‚ŒãŸ');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    logger.log('ğŸ”µ sidebar:', sidebar);
                    logger.log('ğŸ”µ overlay:', overlay);
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '0';
                        overlay.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                        logger.log('âœ… ã‚µã‚¤ãƒ‰ãƒãƒ¼é–‹ã„ãŸ');
                    } else {
                        console.error('âŒ è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¾ãŸã¯ãƒã‚¹ã‚¯è¦ç´ ');
                    }
                };
                
                // é—œé–‰ã‚µã‚¤ãƒ‰ãƒãƒ¼
                window.closeMobileSidebar = function() {
                    logger.log('ğŸ”µ closeMobileSidebar å‘¼ã³å‡ºã•ã‚ŒãŸ');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '-100%';
                        overlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        logger.log('âœ… ã‚µã‚¤ãƒ‰ãƒãƒ¼å·²é—œé–‰');
                    }
                };
                
                // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ä½¿ç”¨ onclickï¼Œç„¡éœ€é¡å¤–ç¶å®š
                logger.log('âœ… ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½å·²å°±ç·’ï¼ˆä½¿ç”¨ onclickï¼‰');
            })();
                
                // ãƒ¢ãƒã‚¤ãƒ«ç‰ˆè‡ªå‹•ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ï¼ˆåƒ…ã§ãƒ¢ãƒã‚¤ãƒ«ç‰ˆå•Ÿç”¨ï¼‰
                if (window.innerWidth <= 768) {
                    // è©•åƒ¹ã‚«ãƒ«ãƒ¼ã‚»ãƒ«
                    const testimonialsContainer = document.getElementById('testimonials-container');
                    if (testimonialsContainer) {
                        let testimonialIndex = 0;
                        const testimonialCards = testimonialsContainer.children;
                        
                        setInterval(() => {
                            testimonialIndex = (testimonialIndex + 1) % testimonialCards.length;
                            const scrollAmount = testimonialCards[testimonialIndex].offsetLeft - testimonialsContainer.offsetLeft;
                            testimonialsContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 4000); // æ¯4ç§’åˆ‡ã‚Šæ›¿ãˆ
                    }
                    
                    // å­¦ç¿’ã‚»ãƒ³ã‚¿ãƒ¼ã‚«ãƒ«ãƒ¼ã‚»ãƒ«
                    const learningContainer = document.getElementById('learning-center-container');
                    if (learningContainer) {
                        let learningIndex = 0;
                        const learningCards = learningContainer.children;
                        
                        setInterval(() => {
                            learningIndex = (learningIndex + 1) % learningCards.length;
                            const scrollAmount = learningCards[learningIndex].offsetLeft - learningContainer.offsetLeft;
                            learningContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 5000); // æ¯5ç§’åˆ‡ã‚Šæ›¿ãˆ
                    }
                }
            });
            
            // åˆ‡ã‚Šæ›¿ãˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
            async function toggleDropdown() {
                const dropdown = document.getElementById('user-dropdown');
                if (dropdown.style.display === 'none') {
                    dropdown.style.display = 'block';
                    
                    // ğŸ”¥ å³æ™‚ã‹ã‚‰ SimpleDataManager å–å¾—æœ€æ–° Credits
                    if (window.simpleDataManager && window.simpleDataManager.initialized) {
                        try {
                            userCredits = await window.simpleDataManager.getUserCredits();
                            logger.log('âœ… å³åº§ã«å–å¾— Credits:', userCredits);
                        } catch (error) {
                            console.error('âŒ å–å¾—å¤±æ•— Credits:', error);
                        }
                    }
                    
                    // æ›´æ–°ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
                    document.getElementById('dropdown-credits').textContent = userCredits.toLocaleString();
                    document.getElementById('dropdown-email').textContent = userEmail;
                } else {
                    dropdown.style.display = 'none';
                }
            }
            
            // ã‚¯ãƒªãƒƒã‚¯å¤–éƒ¨é—œé–‰ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('user-dropdown');
                const userMenu = document.getElementById('user-menu');
                
                if (dropdown && userMenu && 
                    !dropdown.contains(event.target) && 
                    !userMenu.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
            
            // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
            window.handleLogout = async function() {
                try {
                    if (window.simpleAuth) {
                        await window.simpleAuth.logout();
                        window.location.href = 'index.html';
                    }
                } catch (error) {
                    console.error('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¤±æ•—:', error);
                    alert('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¤±æ•—ï¼Œè«‹å†è©¦è¡Œ');
                }
            };
            
            // å¾…æ©Ÿ Firebase ã¨ simpleAuth åŠ è¼‰
            async function updateUserMenu() {
                const userMenu = document.getElementById('user-menu');
                if (!userMenu) return;
                
                try {
                    const isLoggedIn = window.simpleAuth && window.simpleAuth.isLoggedIn();
                    
                    if (isLoggedIn) {
                        // âœ… å·²ãƒ­ã‚°ã‚¤ãƒ³ï¼šé¡¯ç¤ºãƒ¦ãƒ¼ã‚¶ãƒ¼é ­åƒ
                        const currentUser = window.simpleAuth.getCurrentUser();
                        userEmail = currentUser.email || '';
                        userDisplayName = currentUser.displayName || '';
                        
                        // ğŸ”¥ ã‹ã‚‰ Firestore å–å¾— displayName ã¨ credits
                        if (window.simpleDataManager && window.simpleDataManager.initialized) {
                            try {
                                const userDoc = await window.simpleDataManager.getUserDocument();
                                if (userDoc) {
                                    userDisplayName = userDoc.displayName || userDisplayName;
                                    userCredits = userDoc.credits || 0;
                                    logger.log('âœ… index.html å–å¾— Credits:', userCredits);
                                }
                            } catch (error) {
                                logger.log('âš ï¸ ç„¡æ³•ã‹ã‚‰ Firestore å–å¾—ãƒ¦ãƒ¼ã‚¶ãƒ¼è³‡æ–™:', error);
                            }
                        } else {
                            logger.log('â³ SimpleDataManager å°šæœªåˆæœŸåŒ–ï¼Œå¾…æ©Ÿä¸­...');
                            // å»¶é²å†è©¦è¡Œ
                            setTimeout(async () => {
                                if (window.simpleDataManager && window.simpleDataManager.initialized) {
                                    try {
                                        userCredits = await window.simpleDataManager.getUserCredits();
                                        logger.log('âœ… é…å»¶å–å¾— Credits:', userCredits);
                                    } catch (error) {
                                        console.error('âŒ é…å»¶å–å¾—å¤±æ•—:', error);
                                    }
                                }
                            }, 1000);
                        }
                        
                        const userInitial = getUserInitial();
                        logger.log(`ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼é ­ãƒ†ã‚­ã‚¹ãƒˆ: "${userInitial}" (displayName: "${userDisplayName}")`);
                        
                        userMenu.innerHTML = `
                            <div onclick="toggleDropdown()" class="user-menu-trigger">
                                <div class="user-avatar">${userInitial}</div>
                            </div>
                        `;
                        logger.log('âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼å·²ãƒ­ã‚°ã‚¤ãƒ³ï¼Œé¡¯ç¤ºé ­åƒ');
                    } else {
                        // âœ… æœªãƒ­ã‚°ã‚¤ãƒ³ï¼šé¡¯ç¤ºãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³
                        userMenu.innerHTML = `
                            <button onclick="window.location.href='auth.html'" class="login-button">ãƒ­ã‚°ã‚¤ãƒ³</button>
                        `;
                        logger.log('âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼æœªãƒ­ã‚°ã‚¤ãƒ³ï¼Œé¡¯ç¤ºãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³');
                    }
                } catch (e) {
                    logger.log('âŒ ç„¡æ³•æ›´æ–°ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼:', e);
                }
            }
            
            // å³åº§ã«å˜—è©¦æ›´æ–°
            updateUserMenu();
            
            // ç›£è½ Firebase ã¨ Auth äº‹ä»¶
            window.addEventListener('firebase-ready', updateUserMenu);
            window.addEventListener('user-logged-in', updateUserMenu);
            window.addEventListener('user-logged-out', updateUserMenu);
            
            // å»¶é²å†æ¬¡ãƒã‚§ãƒƒã‚¯ï¼ˆä»¥é˜²äº‹ä»¶æ—¢ã«è§¸ç™¼ï¼‰
            setTimeout(updateUserMenu, 1000);
            setTimeout(updateUserMenu, 2000);
            
            // å…¬é–‹ toggleDropdown ã¾ã§å…¨å±€
            window.toggleDropdown = toggleDropdown;
        });
    </script>

    <!-- ä¸»è¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
    <main style="padding-top: 10px;">
    <!-- Dashboard å®¹å™¨ -->
    <div class="dashboard-container" style="display: flex; min-height: calc(100vh - 10px); background: #ffffff; padding-top: 10px;">
        <!-- å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ (ç”± sidebar-component.js å‹•ã®ç”Ÿæˆ) -->
        <aside class="sidebar"></aside>

        <!-- ä¸»è¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
        <main class="main-content" style="flex: 1; background: #ffffff; margin-left: 280px; overflow-y: auto; min-height: calc(100vh - 60px); display: block !important; visibility: visible !important;">
            <!-- è¨‚é–±ãƒ—ãƒ©ãƒ³ -->
            <div class="plans-section" id="subscription-plans" style="padding: 2rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.75rem; color: #1f2937; line-height: 1.3;">éš ã‚ŒãŸè²»ç”¨ãªã—ã€å®‰å…¨ã§ä¿¡é ¼ã§ãã‚‹</h2>
                    <p style="font-size: 1rem; color: #6b7280; margin: 0;">æ•°åƒã®ä¼æ¥­ã¨ã¨ã‚‚ã«ã€è²¡å‹™ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ã®æ™‚é–“ã‚’ç¯€ç´„ã—ã¾ã—ã‚‡ã†ã€‚</p>
                </div>
                
                <!-- æœˆæ‰•ã„ã¨å¹´æ‰•ã„ä¸¦åˆ—é¡¯ç¤ºï¼ˆä½¿ç”¨ index.html ã®ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰-->
                <div id="pricing-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 1000px; margin: 2rem auto;">
                    <!-- æœˆæ‰•ã„ãƒ—ãƒ©ãƒ³ -->
                    <div id="monthly-plan" class="pricing-card" style="border: 2px solid #e5e7eb; border-radius: 16px; padding: 2.5rem; background: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); width: 100%;">
                        <!-- ğŸ”¥ ã‚¿ã‚¤ãƒˆãƒ«ã¨ä¾¡æ ¼æ©«å‘æ’åˆ— -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.monthly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">æœˆæ‰•ã„</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">Â¥</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">599</span>
                                <span style="font-size: 1rem; color: #6b7280;">/æœˆ</span>
                            </div>
                        </div>
                        
                        <!-- å«ã¾ã‚Œã‚‹å†…å®¹ -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f9fafb; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">å«ã¾ã‚Œã‚‹å†…å®¹</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>æœˆé–“100ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>è¶…éå¾Œ1ãƒšãƒ¼ã‚¸Â¥6</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒãƒƒãƒå‡¦ç†ç„¡åˆ¶é™</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ä¸€æ‹¬å¤‰æ›</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooksçµ±åˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰AIå‡¦ç†</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 ç¨®è¨€èªæ”¯æ´</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒ¡ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>å®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒ‡ãƒ¼ã‚¿ä¿æŒ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ç”»åƒä¿æŒ</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA ãƒœã‚¿ãƒ³ -->
                        <button onclick="createCheckoutSession('monthly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">å§‹ã‚ã‚‹</button>
                    </div>

                    <!-- å¹´æ‰•ã„ãƒ—ãƒ©ãƒ³ -->
                    <div id="yearly-plan" class="pricing-card" style="border: 2px solid #8b5cf6; border-radius: 16px; padding: 2.5rem; background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%); box-shadow: 0 4px 20px rgba(139, 92, 246, 0.1); width: 100%; position: relative;">
                        <div data-i18n="pricing.save" style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #8b5cf6; color: white; padding: 0.25rem 1rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">20%ç¯€ç´„</div>
                        <!-- ğŸ”¥ ã‚¿ã‚¤ãƒˆãƒ«ã¨ä¾¡æ ¼æ©«å‘æ’åˆ— -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.yearly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">å¹´æ‰•ã„</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">Â¥</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">479</span>
                                <span style="font-size: 1rem; color: #6b7280;">/æœˆ</span>
                            </div>
                        </div>
                        
                        <!-- å«ã¾ã‚Œã‚‹å†…å®¹ -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: transparent; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">å«ã¾ã‚Œã‚‹å†…å®¹</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>æœˆé–“100ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>è¶…éå¾Œ1ãƒšãƒ¼ã‚¸Â¥6</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒãƒƒãƒå‡¦ç†ç„¡åˆ¶é™</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ä¸€æ‹¬å¤‰æ›</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooksçµ±åˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰AIå‡¦ç†</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 ç¨®è¨€èªæ”¯æ´</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒ¡ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>å®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ãƒ‡ãƒ¼ã‚¿ä¿æŒ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ç”»åƒä¿æŒ</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA ãƒœã‚¿ãƒ³ -->
                        <button onclick="createCheckoutSession('yearly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">å§‹ã‚ã‚‹</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // âœ… ç°¡åŒ–ï¼šç›´æ¥ä½¿ç”¨ SimpleAuth
        function checkAuth() {
            return window.simpleAuth && window.simpleAuth.isLoggedIn();
        }
        
        function showAuthNotificationInBilling() {
            logger.log('ğŸ’¡ ã§ Billing ãƒšãƒ¼ã‚¸é¡¯ç¤ºèº«ä»½æ¤œè¨¼æç¤º');
            
            const notification = document.createElement('div');
            notification.id = 'billing-auth-notification';
            notification.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; background: #f3e8ff; border-bottom: 1px solid #8b5cf6; padding: 0.75rem; z-index: 1000; text-align: center;">
                    <p style="margin: 0; color: #6b21a8;">
                        <i class="fas fa-info-circle"></i> 
                        å¦‚éœ€å®Œæ•´è«‹æ±‚æ©Ÿèƒ½ï¼Œè«‹ <a href="auth.html" style="color: #7c3aed; text-decoration: underline;">é‡æ–°ãƒ­ã‚°ã‚¤ãƒ³</a> ã¾ãŸã¯ 
                        <button onclick="window.location.reload()" style="background: #8b5cf6; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; margin-left: 0.5rem;">é‡æ–°èª­ã¿è¾¼ã¿ãƒšãƒ¼ã‚¸</button>
                        <button onclick="document.getElementById('billing-auth-notification').remove()" style="background: transparent; border: none; color: #6b21a8; margin-left: 1rem;">âœ•</button>
                    </p>
                </div>
            `;
            document.body.insertBefore(notification, document.body.firstChild);
            
            // èª¿æ•´ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‘ä¸‹åç§»
            const mainContent = document.querySelector('.billing-container');
            if (mainContent) {
                mainContent.style.marginTop = '60px';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            logger.log('Billing ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ä¸­...');
            
            // ğŸ”¥ ãƒ¢ãƒã‚¤ãƒ«ç‰ˆå¼·åˆ¶ä¿®æ”¹å®šåƒ¹ã‚«ãƒ¼ãƒ‰å¯¬åº¦
            function forceMobilePricingWidth() {
                if (window.innerWidth <= 768) {
                    const monthlyPlan = document.getElementById('monthly-plan');
                    const yearlyPlan = document.getElementById('yearly-plan');
                    const pricingContainer = document.getElementById('pricing-container');
                    
                    if (monthlyPlan) {
                        monthlyPlan.style.maxWidth = 'none';
                        monthlyPlan.style.width = '100%';
                        monthlyPlan.style.marginLeft = '0';
                        monthlyPlan.style.marginRight = '0';
                        logger.log('âœ… æœˆæ‰•ã„ã‚«ãƒ¼ãƒ‰å¯¬åº¦å·²å¼·åˆ¶è¨­ã¨ã—ã¦ 100%');
                    }
                    
                    if (yearlyPlan) {
                        yearlyPlan.style.maxWidth = 'none';
                        yearlyPlan.style.width = '100%';
                        yearlyPlan.style.marginLeft = '0';
                        yearlyPlan.style.marginRight = '0';
                        logger.log('âœ… å¹´æ‰•ã„ã‚«ãƒ¼ãƒ‰å¯¬åº¦å·²å¼·åˆ¶è¨­ã¨ã—ã¦ 100%');
                    }
                    
                    if (pricingContainer) {
                        pricingContainer.style.padding = '0';
                        pricingContainer.style.maxWidth = '100%';
                        logger.log('âœ… å®šåƒ¹å®¹å™¨å…§è·å·²èª¿æ•´');
                    }
                    
                    // èª¿æ•´ plans-section ã® padding
                    const plansSection = document.querySelector('.plans-section');
                    if (plansSection) {
                        plansSection.style.padding = '0.25rem'; // å·¦å³å„ç•™ 0.25rem è¾¹è·
                        logger.log('âœ… plans-section å…§è·å·²èª¿æ•´ã¨ã—ã¦ 0.25rem');
                    }
                }
            }
            
            // å³åº§ã«å®Ÿè¡Œ + è¦–çª—èª¿æ•´æ™‚åŸ·è¡Œ
            forceMobilePricingWidth();
            window.addEventListener('resize', forceMobilePricingWidth);

            // åˆæœŸåŒ–çµ±ä¸€ã‚µã‚¤ãƒ‰ãƒãƒ¼
            window.billingSidebar = new VaultCaddySidebar('billing');

            // åˆæœŸåŒ–ãƒšãƒ¼ã‚¸
            initBillingPage();
            
            // å‡¦ç† Stripe æ”¯ä»˜å›èª¿
            handlePaymentSuccess();
            
            // ãƒã‚§ãƒƒã‚¯ Credits æ˜¯å¦éæœŸ
            checkCreditsExpiry();
            
            // ç›£è½è¨€èªè®Šæ›´äº‹ä»¶
            window.addEventListener('languageChanged', function(e) {
                logger.log('Billing: è¨€èªå·²è®Šæ›´ã¨ã—ã¦', e.detail.language);
                // é‡æ–°æ‡‰ç”¨ç¿»è­¯
                if (window.languageManager) {
                    window.languageManager.loadLanguage(e.detail.language);
                }
            });
        });

        function initBillingPage() {
            logger.log('Billing page initialized');
        }

        // ç®¡ç†ãƒ—ãƒ©ãƒ³
        function managePlan() {
            window.VaultCaddyNavbar.showNotification('Plan management coming soon!', 'info');
        }

        // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè³¼å…¥
        function purchaseCredits(credits, price) {
            logger.log(`è³¼è²· ${credits} creditsï¼Œä¾¡æ ¼ $${price}`);
            
            // ä½¿ç”¨ StripeManager å‡¦ç†è³¼è²·
            if (window.StripeManager) {
                window.StripeManager.purchaseCredits(credits);
            } else {
                alert('Stripe ç®¡ç†å™¨æœªèª­ã¿è¾¼ã¿ï¼Œè«‹åˆ·æ–°ãƒšãƒ¼ã‚¸å†è©¦è¡Œ');
            }
        }

        // åˆæœŸåŒ– Stripe æ”¯ä»˜
        function initializeStripePayment(credits, price) {
            // é€™è£¡å°‡ä¾†æœƒæ•´åˆ Stripe Checkout
            window.VaultCaddyNavbar.showNotification(`æ­£ã§åˆæœŸåŒ– ${credits} Credits è³¼è²·æµç¨‹...`, 'info');
            
            // æ¨¡æ“¬æ”¯ä»˜æˆåŠŸ
            setTimeout(() => {
                simulatePaymentSuccess(credits);
            }, 2000);
        }

        // æ¨¡æ“¬æ”¯ä»˜æˆåŠŸä¸¦æ›´æ–° Credits
        function simulatePaymentSuccess(credits) {
            // æ›´æ–°æœ¬åœ° Credits æ•¸é‡ï¼ˆå¯¦éš›ä¸Šæ‡‰è©²ã‹ã‚‰ä¼ºæœå™¨å–å¾—ï¼‰
            const currentCredits = parseInt(document.querySelector('.stat-value').textContent) || 0;
            const newCredits = currentCredits + credits;
            
            // æ›´æ–° UI é¡¯ç¤º
            document.querySelector('.stat-value').textContent = newCredits;
            
            window.VaultCaddyNavbar.showNotification(`æˆåŠŸè³¼è²· ${credits} Creditsï¼ç•¶å‰æ®‹é«˜ï¼š${newCredits} Credits`, 'success');
        }

        // âœ… çµ±ä¸€ã®è¨‚é–±ãƒ—ãƒ©ãƒ³å‡½æ•¸ï¼ˆ2025-11-22 æ›´æ–°ï¼‰
        function subscribeToPlan(planType) {
            logger.log(`é–‹å§‹ ${planType} ãƒ—ãƒ©ãƒ³è¨‚é–±æµç¨‹`);
            
            // ä½¿ç”¨ StripeManager å‡¦ç†è¨‚é–±
            if (window.StripeManager && window.StripeManager.subscribeToPlan) {
                window.StripeManager.subscribeToPlan(planType);
            } else {
                console.error('âŒ StripeManager æœªèª­ã¿è¾¼ã¿');
                alert('ç³»çµ±åˆæœŸåŒ–ä¸­ï¼Œè«‹ç¨å¾Œå†è©¦');
            }
            
            return;
            
            // === ä»¥ä¸‹æ˜¯èˆŠé‚è¼¯ï¼ˆä¿ç•™ä½œã¨ã—ã¦åƒè€ƒï¼‰===
            
            // âœ… æ–°å®šåƒ¹ãƒ—ãƒ©ãƒ³ï¼ˆ2025-12-09 æ›´æ–°ï¼‰
            // æœˆè²»: HKD $58/æœˆï¼ŒåŒ…å« 100 Credits + è¶…å‡ºå¾Œ HKD $0.5/é 
            // å¹´è²»: HKD $46/æœˆï¼ˆ$552/å¹´ï¼‰ï¼ŒåŒ…å« 1,200 Credits + è¶…å‡ºå¾Œ HKD $0.5/é 
            
            // âœ… Stripe ç”¢å“æ˜ å°„ï¼ˆ2025-12-09 æ›´æ–°ï¼‰
            // æœˆè²»: prod_TSmKnHeaQVxZXC - HKD $58/æœˆ + ä½¿ç”¨é‡è«‹æ±‚
            // å¹´è²»: prod_TSsEWI5bv9pSkz - HKD $552/å¹´ + ä½¿ç”¨é‡è«‹æ±‚
            const stripeProductIds = {
                'monthly': 'prod_TSmKnHeaQVxZXC',  // VaultCaddy æœˆè²»
                'yearly': 'prod_TSsEWI5bv9pSkz'     // VaultCaddy å¹´è²»
            };
            
            // Credits æ˜ å°„ - æ ¹æ“šæ™‚é–“é€±æœŸ
            const creditsMap = {
                'monthly': { 
                    credits: 100, 
                    duration: '1å€‹æœˆ',
                    price: 'HKD $58',
                    displayPrice: 'HKD $58/æœˆ'
                },
                'yearly': { 
                    credits: 1200, 
                    duration: '12å€‹æœˆ',
                    price: 'HKD $552',
                    displayPrice: 'HKD $46/æœˆ (å¹´æ‰•ã„ $552)'
                }
            };
            
            const paymentLink = stripeLinks[planType];
            const creditsInfo = creditsMap[planType];
            
            if (!paymentLink || paymentLink.includes('REPLACE_WITH_YOUR')) {
                console.error('âš ï¸ Payment link å°šæœªè¨­å®š');
                alert('ä»˜è²»æ©Ÿèƒ½æ­£ã§è¨­ç½®ä¸­ï¼Œè«‹ç¨å¾Œå†è©¦ã¾ãŸã¯è¯ç¹«å®¢æœã€‚\n\næç¤ºï¼šç®¡ç†å“¡éœ€è¦ã§ Stripe ä½œæˆæ–°ã® Payment Linksã€‚');
                return;
            }
            
            logger.log('=== è¨‚é–±è©³ç´°ä¿¡æ¯ ===');
            logger.log('è«‹æ±‚é€±æœŸ:', planType === 'yearly' ? 'å¹´è²»' : 'æœˆè²»');
            logger.log('Credits:', creditsInfo.credits);
            logger.log('æœ‰æ•ˆæœŸ:', creditsInfo.duration);
            logger.log('ä¾¡æ ¼:', creditsInfo.displayPrice);
            logger.log('æ”¯ä»˜é€£çµ:', paymentLink);
            
            // é¡¯ç¤ºç¢ºèªè¨Šæ¯
            const confirmMessage = `ç¢ºèªè¨‚é–± VaultCaddy Pro (${planType === 'yearly' ? 'å¹´è²»' : 'æœˆè²»'})ï¼Ÿ

æ‚¨å°‡ç²å¾—ï¼š
â€¢ ${creditsInfo.credits} Credits
â€¢ æœ‰æ•ˆæœŸï¼š${creditsInfo.duration}
â€¢ è¶…éå¾Œ1ãƒšãƒ¼ã‚¸Â¥8
â€¢ ãƒãƒƒãƒå‡¦ç†ç„¡åˆ¶é™
â€¢ Excel/CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â€¢ QuickBooksçµ±åˆ
â€¢ 8 ç¨®è¨€èªæ”¯æ´

ç¸½åƒ¹ï¼š${creditsInfo.displayPrice}

ã‚¯ãƒªãƒƒã‚¯ç¢ºèªå¾Œå°‡å‰å¾€å®‰å…¨æ”¯ä»˜ãƒšãƒ¼ã‚¸ã€‚`;
            
            if (confirm(confirmMessage)) {
                // é¡¯ç¤ºå‡¦ç†è¨Šæ¯
                if (window.VaultCaddyNavbar) {
                    window.VaultCaddyNavbar.showNotification('æ­£ã§é‡å®šå‘ã¾ã§å®‰å…¨æ”¯ä»˜ãƒšãƒ¼ã‚¸...', 'info');
                }
                
                // è¨­ç½®è¨‚é–±å…ƒæ•¸æ“šã¾ã§æœ¬åœ°å­˜å„²
                localStorage.setItem('pendingSubscription', JSON.stringify({
                    planType: 'pro',  // çµ±ä¸€ã¨ã—ã¦ Pro ãƒ—ãƒ©ãƒ³
                    period: planType,  // monthly ã¾ãŸã¯ yearly
                    credits: creditsInfo.credits,
                    duration: creditsInfo.duration,
                    price: creditsInfo.price,
                    timestamp: new Date().toISOString()
                }));
                
                // é‡å®šå‘ã¾ã§ Stripe Payment Link
                setTimeout(() => {
                    window.open(paymentLink, '_self');
                }, 1000);
            }
        }
        
        // å‡¦ç†æ”¯ä»˜æˆåŠŸå›èª¿
        function handlePaymentSuccess() {
            // ãƒã‚§ãƒƒã‚¯æ˜¯å¦æœ‰å¾…å‡¦ç†ã®è¨‚é–±
            const pendingSubscription = localStorage.getItem('pendingSubscription');
            if (pendingSubscription) {
                try {
                    const subscription = JSON.parse(pendingSubscription);
                    logger.log('æª¢æ¸¬ã¾ã§å¾…å‡¦ç†ã®è¨‚é–±:', subscription);
                    
                    // æˆäºˆ Credits
                    grantSubscriptionCredits(subscription);
                    
                    // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `æˆåŠŸè¨‚é–± ${subscription.planType.toUpperCase()} ãƒ—ãƒ©ãƒ³ï¼å·²ç²å¾— ${subscription.credits} Credits`, 
                            'success'
                        );
                    }
                    
                    // æ¸…ç†å¾…å‡¦ç†ã®è¨‚é–±æ•¸æ“š
                    localStorage.removeItem('pendingSubscription');
                    
                    // æ›´æ–°ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨‚é–±ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                    localStorage.setItem('userPlan', subscription.planType);
                    localStorage.setItem('userPlanPeriod', subscription.period);
                    
                } catch (error) {
                    console.error('å‡¦ç†è¨‚é–±å›èª¿å¤±æ•—:', error);
                }
            }
        }
        
        // æˆäºˆè¨‚é–± Credits
        function grantSubscriptionCredits(subscription) {
            const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const newCredits = currentCredits + subscription.credits;
            
            // è¨­ç½® Credits ã¾ã§æœŸæ™‚é–“
            const expiryDate = new Date();
            if (subscription.period === 'yearly') {
                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
            } else {
                expiryDate.setMonth(expiryDate.getMonth() + 1);
            }
            
            // æ›´æ–°æœ¬åœ°å­˜å„²
            localStorage.setItem('userCredits', newCredits.toString());
            localStorage.setItem('creditsExpiry', expiryDate.toISOString());
            localStorage.setItem('subscriptionCredits', subscription.credits.toString());
            
            logger.log(`å·²æˆäºˆ ${subscription.credits} Creditsï¼Œæ–°æ®‹é«˜: ${newCredits}`);
            logger.log(`Credits ã¾ã§æœŸæ™‚é–“: ${expiryDate.toLocaleDateString()}`);
            
            // æ›´æ–° UI é¡¯ç¤º
            const creditsElements = document.querySelectorAll('.stat-value');
            if (creditsElements.length > 0) {
                const creditsElement = creditsElements[creditsElements.length - 1];
                creditsElement.textContent = newCredits;
            }
        }
        
        // ãƒã‚§ãƒƒã‚¯ Credits æ˜¯å¦éæœŸ
        function checkCreditsExpiry() {
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            
            if (creditsExpiry && subscriptionCredits > 0) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                
                logger.log('Credits ãƒã‚§ãƒƒã‚¯ï¼š');
                logger.log('ã¾ã§æœŸæ™‚é–“:', expiryDate.toLocaleDateString());
                logger.log('ç•¶å‰æ™‚é–“:', now.toLocaleDateString());
                logger.log('è¨‚é–± Credits:', subscriptionCredits);
                
                if (now > expiryDate) {
                    // Credits å·²éæœŸï¼Œå‰Šé™¤è¨‚é–± Credits
                    logger.log('Credits å·²éæœŸï¼Œæ­£ã§å‰Šé™¤...');
                    
                    const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
                    const newCredits = Math.max(0, currentCredits - subscriptionCredits);
                    
                    // æ›´æ–°æœ¬åœ°å­˜å„²
                    localStorage.setItem('userCredits', newCredits.toString());
                    localStorage.removeItem('creditsExpiry');
                    localStorage.removeItem('subscriptionCredits');
                    localStorage.removeItem('userPlan');
                    localStorage.removeItem('userPlanPeriod');
                    
                    // æ›´æ–° UI é¡¯ç¤º
                    const creditsElements = document.querySelectorAll('.stat-value');
                    if (creditsElements.length > 0) {
                        const creditsElement = creditsElements[creditsElements.length - 1];
                        creditsElement.textContent = newCredits;
                    }
                    
                    // é¡¯ç¤ºéæœŸé€šçŸ¥
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `æ‚¨ã®è¨‚é–± Credits å·²éæœŸä¸¦è¢«å‰Šé™¤ã€‚å‰©é¤˜ ${newCredits} Credits`, 
                            'warning'
                        );
                    }
                    
                    logger.log(`å·²å‰Šé™¤ ${subscriptionCredits} éæœŸ Creditsï¼Œæ–°æ®‹é«˜: ${newCredits}`);
                } else {
                    // Credits å°šæœªéæœŸï¼Œé¡¯ç¤ºå‰©é¤˜æ™‚é–“
                    const timeLeft = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
                    logger.log(`è¨‚é–± Credits é‚„æœ‰ ${timeLeft} å¤©ã¾ã§æœŸ`);
                }
            }
        }
        
        // å–å¾— Credits ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¿¡æ¯
        function getCreditsStatus() {
            const userCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const userPlan = localStorage.getItem('userPlan');
            
            let status = {
                totalCredits: userCredits,
                subscriptionCredits: subscriptionCredits,
                purchasedCredits: userCredits - subscriptionCredits,
                plan: userPlan || 'none',
                hasSubscription: subscriptionCredits > 0 && creditsExpiry,
                daysLeft: 0
            };
            
            if (creditsExpiry) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                status.daysLeft = Math.max(0, Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24)));
            }
            
            return status;
        }

        // åˆ‡ã‚Šæ›¿ãˆæœˆè²»/å¹´è²»
        function togglePricingPlan(planType) {
            // æ›´æ–°ãƒœã‚¿ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-plan="${planType}"]`).classList.add('active');
            
            // æ›´æ–°ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                if (btn.classList.contains('active')) {
                    btn.style.background = 'white';
                    btn.style.color = '#1f2937';
                } else {
                    btn.style.background = '#f9fafb';
                    btn.style.color = '#6b7280';
                }
            });
            
            if (planType === 'monthly') {
                // é¡¯ç¤ºæœˆè²»ï¼Œéš±è—å¹´è²»
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'none';
                });
            } else {
                // é¡¯ç¤ºå¹´è²»ï¼Œéš±è—æœˆè²»
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
            }
        }
        
        // ==================== Email æ¤œè¨¼ãƒã‚§ãƒƒã‚¯ ====================
        (async function initEmailVerification() {
            try {
                // å¾…æ©Ÿ Firebase ã¨æ¤œè¨¼ãƒã‚§ãƒƒã‚¯å™¨åˆæœŸåŒ–
                await new Promise((resolve) => {
                    const checkReady = setInterval(() => {
                        if (window.emailVerificationChecker && firebase.auth) {
                            clearInterval(checkReady);
                            resolve();
                        }
                    }, 100);
                    
                    setTimeout(() => {
                        clearInterval(checkReady);
                        resolve();
                    }, 10000);
                });
                
                // ãƒã‚§ãƒƒã‚¯æ¤œè¨¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸¦é¡¯ç¤ºæç¤ºï¼ˆãªã„é˜»æ“‹æ©Ÿèƒ½ï¼‰
                await checkEmailVerification({ showNotice: true, blockPage: false });
            } catch (error) {
                console.error('âŒ Email æ¤œè¨¼ãƒã‚§ãƒƒã‚¯å¤±æ•—:', error);
            }
        })();
    </script>

    <!-- ğŸ”¥ ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¶…ç´šç°¡å–®ä¿®å¾©ãƒ—ãƒ©ãƒ³ -->
    <script>
        logger.log('ğŸ”¥ é–‹å§‹åˆæœŸåŒ–ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼...');
        
        // é–‹ãã‚µã‚¤ãƒ‰ãƒãƒ¼å‡½æ•¸
        function openSidebar() {
            logger.log('ğŸ”µ é–‹ãã‚µã‚¤ãƒ‰ãƒãƒ¼');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '0';
                overlay.style.display = 'block';
                overlay.style.opacity = '1';
                document.body.style.overflow = 'hidden';
                logger.log('âœ… ã‚µã‚¤ãƒ‰ãƒãƒ¼é–‹ã„ãŸ');
            }
        }
        
        // é—œé–‰ã‚µã‚¤ãƒ‰ãƒãƒ¼å‡½æ•¸
        function closeSidebar() {
            logger.log('ğŸ”µ é—œé–‰ã‚µã‚¤ãƒ‰ãƒãƒ¼');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '-100%';
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 300); // å¾…æ©Ÿå‹•ç•«å®Œäº†ï¼ˆã¨ CSS transition ä¸€è‡´ï¼‰
                document.body.style.overflow = 'auto';
                logger.log('âœ… ã‚µã‚¤ãƒ‰ãƒãƒ¼å·²é—œé–‰');
            }
        }
        
        // è¶…ç´šç°¡å–®ã®åˆæœŸåŒ–å‡½æ•¸
        function simpleInitMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (!btn || !overlay) {
                logger.log('â³ è¦ç´ æœªæ‰¾ã¾ã§ï¼Œ200mså¾Œå†è©¦è¡Œ');
                setTimeout(simpleInitMenu, 200);
                return;
            }
            
            logger.log('âœ… æ‰¾ã¾ã§ã™ã¹ã¦è¦ç´ ï¼');
            
            // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
            btn.addEventListener('click', function() {
                logger.log('ğŸ”µ ãƒœã‚¿ãƒ³è¢«ã‚¯ãƒªãƒƒã‚¯ï¼');
                openSidebar();
            });
            
            // ã‚¿ãƒƒãƒå‡¦ç†
            btn.addEventListener('touchend', function(e) {
                e.preventDefault();
                logger.log('ğŸ”µ ã‚¿ãƒƒãƒäº‹ä»¶ï¼');
                openSidebar();
            });
            
            // ãƒã‚¹ã‚¯ã‚¯ãƒªãƒƒã‚¯é—œé–‰
            overlay.addEventListener('click', function() {
                logger.log('ğŸ”µ ã‚¯ãƒªãƒƒã‚¯ãƒã‚¹ã‚¯é—œé–‰');
                closeSidebar();
            });
            
            // ãƒã‚¹ã‚¯ã‚¿ãƒƒãƒé—œé–‰
            overlay.addEventListener('touchend', function(e) {
                e.preventDefault();
                logger.log('ğŸ”µ ã‚¿ãƒƒãƒãƒã‚¹ã‚¯é—œé–‰');
                closeSidebar();
            });
            
            logger.log('âœ… ã™ã¹ã¦äº‹ä»¶ç›£è½å™¨å·²ç¶å®š');
        }
        
        // å³åº§ã«å˜—è©¦åˆæœŸåŒ–
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', simpleInitMenu);
        } else {
            setTimeout(simpleInitMenu, 100);
        }
        
        // å…¬é–‹å‡½æ•¸ä¾›ã‚µã‚¤ãƒ‰ãƒãƒ¼å…§ã®é€£çµä½¿ç”¨
        window.closeMobileSidebar = closeSidebar;
    </script>

    <!-- âœ… Stripe Checkout Session ä½œæˆå‡½æ•¸ -->
    <script>
        /**
         * ä½œæˆ Stripe Checkout Session ä¸¦è·³è½‰
         * @param {string} planType - 'monthly' ã¾ãŸã¯ 'yearly'
         * @param {Event} event - ã‚¯ãƒªãƒƒã‚¯äº‹ä»¶
         * @param {boolean} isTest - æ˜¯å¦ã¨ã—ã¦æ¸¬è©¦æ¨¡å¼ï¼ˆå¯é¸ï¼Œé»˜èª falseï¼‰
         */
        async function createCheckoutSession(planType, event, isTest = false) {
            logger.log(`ğŸ›’ ä½œæˆ ${planType} è¨‚é–±...`, { isTest });
            
            // ãƒã‚§ãƒƒã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ˜¯å¦ç™»éŒ„
            if (!window.simpleAuth || !window.simpleAuth.isLoggedIn()) {
                alert('è«‹å…ˆç™»éŒ„');
                window.location.href = 'auth.html';
                return;
            }
            
            // å–å¾—ãƒœã‚¿ãƒ³è¦ç´ ï¼ˆã§ try å¤–å®šç¾©ï¼Œå›é¿ä½œç”¨åŸŸå•é¡Œï¼‰
            const button = event?.target || event?.currentTarget;
            const originalText = button?.textContent || 'å§‹ã‚ã‚‹';
            
            try {
                // é¡¯ç¤ºåŠ è¼‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                if (button) {
                    button.disabled = true;
                    button.textContent = 'æ­£ã§è·³è½‰ã¾ã§æ”¯ä»˜ãƒšãƒ¼ã‚¸...';
                    button.style.opacity = '0.6';
                }
                
                // å–å¾—ç•¶å‰ãƒ¦ãƒ¼ã‚¶ãƒ¼
                const currentUser = window.simpleAuth.getCurrentUser();
                const userEmail = currentUser.email;
                const userId = currentUser.uid;
                
                logger.log(`ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿¡æ¯:`, { userEmail, userId });
                
                // èª¿ç”¨ Firebase Function ä½œæˆ Checkout Session
                const createSession = firebase.functions().httpsCallable('createStripeCheckoutSession');
                
                logger.log(`ğŸ“ èª¿ç”¨ Firebase Function...`, { planType, userId, email: userEmail, isTest });
                const result = await createSession({
                    planType: planType,
                    userId: userId,
                    email: userEmail,
                    isTest: isTest  // ğŸ§ª å‚³éæ¸¬è©¦æ¨¡å¼æ¨™è¨˜
                });
                
                logger.log(`âœ… Checkout Session ä½œæˆæˆåŠŸ:`, result.data);
                
                // è·³è½‰ã¾ã§ Stripe Checkout
                if (result.data && result.data.url) {
                    window.location.href = result.data.url;
                } else {
                    throw new Error('æœªæ”¶ã¾ã§æ”¯ä»˜ãƒšãƒ¼ã‚¸ URL');
                }
                
            } catch (error) {
                console.error('âŒ ä½œæˆæ”¯ä»˜æœƒè©±å¤±æ•—:', error);
                console.error('éŒ¯èª¤è©³æƒ…:', error.code, error.message);
                
                // æ¢å¾©ãƒœã‚¿ãƒ³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
                if (button) {
                    button.disabled = false;
                    button.textContent = originalText;
                    button.style.opacity = '1';
                }
                
                // é¡¯ç¤ºå‹å¥½ã®éŒ¯èª¤ä¿¡æ¯
                let errorMsg = 'ä½œæˆæ”¯ä»˜æœƒè©±å¤±æ•—ï¼Œè«‹å†è©¦è¡Œã¾ãŸã¯è¯ç¹«å®¢æœ';
                
                if (error.code === 'functions/unauthenticated') {
                    errorMsg = 'è«‹å…ˆç™»éŒ„';
                    alert(errorMsg);
                    window.location.href = 'auth.html';
                } else if (error.code === 'functions/not-found') {
                    errorMsg = 'è¨‚é–±è¨ˆåŠƒè¨­å®šéŒ¯èª¤ï¼Œè«‹è¯ç¹«å®¢æœ';
                    alert(errorMsg);
                } else if (error.message) {
                    errorMsg = `ä½œæˆæ”¯ä»˜æœƒè©±å¤±æ•—: ${error.message}`;
                    alert(errorMsg);
                } else {
                    alert(errorMsg);
                }
            }
        }
        
        // å…¬é–‹ã¾ã§å…¨å±€
        window.createCheckoutSession = createCheckoutSession;
    </script>

    <!-- ä½œæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="createProjectModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 2rem; width: 90%; max-width: 500px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);">
            <h2 style="font-size: 1.5rem; font-weight: 600; color: #1f2937; margin: 0 0 1rem 0;"><span data-translate="create_new_project">å»ºç«‹æ–°å°ˆæ¡ˆ</span></h2>
            <p style="color: #6b7280; font-size: 0.875rem; margin: 0 0 1.5rem 0;">è¼¸å…¥<span data-translate="project_name">å°ˆæ¡ˆåç¨±</span>ä»¥ä½œæˆæ–°ã®æ–‡æ›¸ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;"><span data-translate="project_name">å°ˆæ¡ˆåç¨±</span></label>
                <input 
                    type="text" 
                    id="projectName" 
                    placeholder="ä¾‹å¦‚ï¼š2025å¹´1æœˆè«‹æ±‚æ›¸"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem; color: #1f2937; box-sizing: border-box;"
                    onkeypress="if(event.key==='Enter') createProject()">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 0.75rem;">
                <button 
                    onclick="closeCreateProjectModal()" 
                    style="background: #ffffff; border: 1px solid #d1d5db; color: #374151; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;"><span data-translate="cancel">å–æ¶ˆ</span></button>
                <button 
                    onclick="createProject()" 
                    style="background: #3b82f6; border: none; color: white; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;"><span data-translate="create">å»ºç«‹</span></button>
            </div>
        </div>
    </div>

    <script>
        // é–‹ãä½œæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«
        function openCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            const input = document.getElementById('projectName');
            modal.style.display = 'flex';
            input.value = '';
            input.focus();
        }

        // é—œé–‰ä½œæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«
        function closeCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            modal.style.display = 'none';
        }

        // <span data-translate="create_new_project">å»ºç«‹æ–°å°ˆæ¡ˆ</span>
        async function createProject() {
            const input = document.getElementById('projectName');
            const projectName = input.value.trim();
            
            if (!projectName) {
                alert('Please enter a project name');
                return;
            }
            
            // ä¿å­˜ã¾ã§ Firebase
            try {
                const projectData = await window.simpleDataManager.createProject(projectName);
                logger.log('âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå·²ä¿å­˜ã¾ã§ Firebase:', projectData);
                
                // é—œé–‰ãƒ¢ãƒ¼ãƒ€ãƒ«
                closeCreateProjectModal();
                
                // ğŸ”¥ ä¿®å¾©ï¼šä½¿ç”¨ projectData.id è€Œé projectData æœ¬èº«
                const projectId = projectData.id;
                logger.log('ğŸš€ è·³è½‰ã¾ã§æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸:', projectId);
                
                // è·³è½‰ã¾ã§æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸
                window.location.href = `firstproject.html?project=${projectId}`;
            } catch (error) {
                console.error('âŒ ä¿å­˜ã¾ã§ Firebase å¤±æ•—:', error);
                alert('ä½œæˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤±æ•—ï¼Œè«‹å†è©¦è¡Œ');
                return;
            }
        }

        // ã‚¯ãƒªãƒƒã‚¯ãƒã‚¹ã‚¯é—œé–‰ãƒ¢ãƒ¼ãƒ€ãƒ«
        document.getElementById('createProjectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCreateProjectModal();
            }
        });
    </script>


    <!-- Google Analytics äº‹ä»¶è·Ÿè¸ª -->
    <script src="/ga-event-tracking.js"></script>
</body>
</html>
