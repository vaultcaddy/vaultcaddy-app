<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <!-- èµ„æºé¢„è¿æ¥ - æ€§èƒ½ä¼˜åŒ– -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://www.gstatic.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">

    <meta charset="UTF-8">
    <!-- æ€§èƒ½ä¼˜åŒ–ï¼šå…³é”®CSSå†…è” -->
    <style>
        /* å…³é”®CSS - é¦–å±æ¸²æŸ“å¿…éœ€ */
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;line-height:1.6;color:#1f2937}
        .vaultcaddy-navbar{position:fixed;top:0;width:100%;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.1);z-index:1000}
        .hero-section{min-height:100vh;display:flex;align-items:center;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}
        .container{max-width:1200px;margin:0 auto;padding:0 1rem}
        .loading{opacity:0.5}
    </style>

    
    <!-- ğŸ”’ í˜ì´ì§€ë³´í˜¸ -->
    <style>
        body.auth-checking { visibility: hidden !important; }
        .auth-loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; align-items: center; justify-content: center; z-index: 9999; visibility: visible !important; }
        body.auth-ready .auth-loading { display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
    <script>
        document.documentElement.classList.add('auth-checking');
        if (document.body) { document.body.classList.add('auth-checking'); } 
        else { document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('auth-checking'); }); }
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="billing_credits">ì²­êµ¬ì™€ç©åˆ† - VaultCaddy</title>
    <meta name="description" content="AI ê¸°ë°˜ Billing ëª…ì„¸ì„œ ë³€í™˜ ë„êµ¬. 3ì´ˆ ë‚´ì— PDFë¥¼ Excel/QuickBooks/Xeroë¡œ ë³€í™˜, ì •í™•ë„ 98%. 20í˜ì´ì§€ ë¬´ë£Œ ì²´í—˜, ì‹ ìš©ì¹´ë“œ ë¶ˆí•„ìš”. â‚©6,988/ì›”ë¶€í„°, í•œêµ­ 150+ê¸°ì—… ì‹ ë¢°.">
    <meta property="og:title" content="Billing ëª…ì„¸ì„œ ë³€í™˜ | PDFë¥¼ Excel/QuickBooksë¡œ | ì •í™•ë„ 98% | VaultCaddy">
    <meta property="og:description" content="AI ê¸°ë°˜ Billing ëª…ì„¸ì„œ ë³€í™˜ ë„êµ¬. 3ì´ˆ ë‚´ì— PDFë¥¼ Excel/QuickBooks/Xeroë¡œ ë³€í™˜, ì •í™•ë„ 98%. 20í˜ì´ì§€ ë¬´ë£Œ ì²´í—˜, ì‹ ìš©ì¹´ë“œ ë¶ˆí•„ìš”. â‚©6,988/ì›”ë¶€í„°, í•œêµ­ 150+ê¸°ì—… ì‹ ë¢°.">
    <meta property="og:url" content="https://vaultcaddy.com/billing.html">
    <meta property="og:type" content="website">
    <link rel="canonical" href="https://vaultcaddy.com/billing.html">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../pages.css">
    <link rel="stylesheet" href="../dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- ä¼˜åŒ–åçš„å…¬å…±ç»„ä»¶ (2026-01-23) -->
    <link rel="stylesheet" href="../user-menu-styles.css">
    <script defer src="../logger.js"></script>
    <script defer src="../init-manager.js"></script>
    <script defer src="../user-menu-manager.js"></script>
    <script defer src="../mobile-menu-manager.js"></script>
    <script defer src="../config.js"></script>
    <script defer src="../translations.js"></script>
    
    <!-- Firebase SDK -->
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/10.7.0/firebase-functions-compat.js"></script>
    
    <!-- Firebase ì„¤ì •ë°ë°ì´í„°ê´€ë¦¬ì -->
    <script defer src="../firebase-config.js?v=20251105-force-init"></script>
    <!-- ğŸ”¥ ìƒˆë¡œìš´ë‹¨ìˆœí™”ì‹œìŠ¤í…œ -->
    <script defer src="../simple-auth.js?v=20251105-force-init"></script>
    <script defer src="../user-profile-manager.js?v=20251120"></script>
    <script defer src="../simple-data-manager.js?v=20251105-force-init"></script>
    
    <!-- Email ê²€ì¦ í™•ì¸ -->
    <script defer src="../email-verification-check.js"></script>
    
    <!-- ë‚´ë¹„ê²Œì´ì…˜ ë°” ì¸í„°ë™ì…˜ê¸°ëŠ¥ -->
    <script defer src="../navbar-interactions.js?v=20251108"></script>
    
    <!-- âœ… ì–¸ì–´ê´€ë¦¬ìï¼ˆå¿…é ˆì—ì„œë‚´ë¹„ê²Œì´ì…˜ì—´ä¹‹ì•ë¡œë“œï¼‰-->
    <script defer src="language-manager.js?v=20251120"></script>
    
    <!-- âœ… í†µì¼ë‚´ë¹„ê²Œì´ì…˜ì—´ì‹œìŠ¤í…œï¼šéœæ…‹ HTML + navbar-component.js -->
    <script defer src="../navbar-component.js?v=20260125-user-menu-v2"></script>
    <script defer src="../sidebar-component.js?v=20251107-rebuild"></script>
    <style>
        body {
            background: #ffffff;
            color: #1f2937;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .navbar {
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .account-container {
            display: flex;
            min-height: calc(100vh - 60px);
            padding-top: 60px;
        }
        
        .sidebar {
            width: 280px;
            background: #f8fafc;
            border-right: 1px solid #e5e7eb;
            position: fixed;
            top: 60px;
            bottom: 0;
            left: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-header {
            padding: 1.5rem 1rem 1rem 1rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .sidebar-header h2 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }
        
        .sidebar-section {
            padding: 1rem 0;
            border-top: 1px solid #e2e8f0;
        }
        
        .sidebar-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: 0 0 0.5rem 1rem;
        }
        
        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            background: #ffffff;
            margin-top: auto;
        }
        
        .sidebar-stats {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .stat-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 1rem 0;
        }
        
        .sidebar-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .sidebar-nav .nav-item {
            margin: 0;
        }
        
        .sidebar-nav .nav-item a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: #6b7280;
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .sidebar-nav .nav-item.active a {
            background: #eff6ff;
            color: #2563eb;
            border-left-color: #2563eb;
        }
        
        .sidebar-nav .nav-item a:hover {
            background: #f1f5f9;
            color: #374151;
        }
        
        .sidebar-nav .nav-item a i {
            width: 20px;
            margin-right: 0.75rem;
            font-size: 1rem;
        }
        
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem 3rem;
            overflow-y: auto;
            min-height: calc(100vh - 60px);
            background: #ffffff;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .page-subtitle {
            color: #6b7280;
            margin: 0;
            font-size: 1rem;
        }
        
        .billing-overview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .billing-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .card-subtitle {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            width: 100%;
            justify-content: center;
        }
        
        .btn-primary {
            background: #7c3aed;
            color: white;
        }
        
        .btn-primary:hover {
            background: #6d28d9;
        }
        
        .btn-secondary {
            background: transparent;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }
        
        .btn-secondary:hover {
            background: #f3f4f6;
            color: #1f2937;
        }
        
        .plans-section {
            margin-bottom: 3rem;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0 0 2rem 0;
            color: #1f2937;
        }
        
        .plans-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .plan-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .plan-card.featured {
            border-color: #7c3aed;
            background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%);
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.15);
        }
        
        .plan-card {
            transition: all 0.3s ease;
        }
        
        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .plan-card.featured:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.25);
        }
        
        .plan-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #1f2937;
        }
        
        .plan-description {
            color: #6b7280;
            margin: 0 0 2rem 0;
            font-size: 0.875rem;
        }
        
        .plan-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1f2937;
            margin: 0 0 1.5rem 0;
        }
        
        .plan-price span {
            font-size: 1rem;
            font-weight: 400;
            color: #6b7280;
        }
        
        .plan-features {
            list-style: none;
            margin: 0 0 2rem 0;
            padding: 0;
        }
        
        .plan-features li {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .plan-features li i {
            color: #10b981;
            margin-right: 0.75rem;
            width: 16px;
        }
        
        .current-plan-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #10b981;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .pricing-toggle {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .plan-card:nth-child(1) {
            animation-delay: 0.1s;
        }
        
        .plan-card:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .plan-card:nth-child(3) {
            animation-delay: 0.3s;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .credit-option {
            transition: all 0.2s ease;
        }
        
        .credit-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.15);
            border-color: #7c3aed !important;
        }
        
        .credit-option.popular {
            animation: pulse-border 2s infinite;
        }
        
        @keyframes pulse-border {
            0% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0.7);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(124, 58, 237, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(124, 58, 237, 0);
            }
        }
        
        .cta-btn {
            width: 100%;
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.4);
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .cta-btn:hover::before {
            left: 100%;
        }
        
        /* ğŸ§ª æ¸¬è©¦æ¨¡å¼ì „í™˜ë²„íŠ¼ìŠ¤íƒ€ì¼ */
        #test-mode-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.15);
        }
        
        #test-mode-info code {
            background: white;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 600;
            color: #dc2626;
        }
        
        @media (max-width: 1024px) {
            .plans-grid {
                grid-template-columns: 1fr;
            }
            
            .billing-overview {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            /* ğŸ§ª æ¸¬è©¦æ¨¡å¼ë²„íŠ¼ì—ì„œëª¨ë°”ì¼ìœ„çš„ìŠ¤íƒ€ì¼ */
            #test-mode-toggle {
                flex-direction: column;
                gap: 0.5rem !important;
                padding: 0.75rem !important;
            }
            
            #test-mode-toggle label {
                font-size: 0.75rem !important;
            }
            
            #test-mode-info {
                padding: 0.75rem !important;
                font-size: 0.75rem !important;
            }
        }
    
        @media (max-width: 768px) {
            /* ë‚´ë¹„ê²Œì´ì…˜ì—´ */
            .vaultcaddy-navbar {
                padding: 0 0.75rem !important;
            }
            
            /* í‘œì‹œí–„ë²„ê±° ë©”ë‰´ë²„íŠ¼ */
            #mobile-menu-btn {
                display: block !important;
            }
            
            /* ëª¨ë°”ì¼ ë²„ì „í‘œì‹œ logoï¼Œìˆ¨ê¹€í…ìŠ¤íŠ¸ */
            .desktop-logo {
                display: flex !important; /* âœ… í‘œì‹œ V ì•„ì´ì½˜ */
            }
            
            .desktop-logo-text {
                display: none !important; /* âœ… ìˆ¨ê¹€ "VaultCaddy" í…ìŠ¤íŠ¸ */
            }
            
            /* ê°€ê²©ì¹´ë“œëª¨ë°”ì¼ ë²„ì „ï¼šë³€ê²½ë¡œì„œìœ„ì•„ë˜æ’ì—´ï¼Œì—°ê°„ ìš”ê¸ˆì—ì„œìœ„ */
            #pricing-container {
                grid-template-columns: 1fr !important;
                gap: 1.5rem !important;
                padding: 0 !important; /* ğŸ”¥ ì œê±°ë‚´ë¶€ê±°ë¦¬ï¼Œè®“ì¹´ë“œìˆìŒç©ºì‚¬ì´æ“´å±• */
                max-width: 100% !important;
            }
            
            /* ğŸ”¥ plans-section ëª¨ë°”ì¼ ë²„ì „ä¹Ÿè¦ì¡°ì • */
            .plans-section {
                padding: 0.5rem !important; /* ì™¼ìª½ì˜¤ë¥¸ìª½å„ç•™ 0.5rem è¾¹ê±°ë¦¬ */
            }
            
            /* ì—°ê°„ ìš”ê¸ˆë°©ì•ˆì´ë™ê¹Œì§€ç¬¬ä¸€ä½ */
            #yearly-plan {
                order: 1 !important;
            }
            
            /* ì›” ìš”ê¸ˆë°©ì•ˆì´ë™ê¹Œì§€ç¬¬äºŒä½ */
            #monthly-plan {
                order: 2 !important;
            }
            
            /* ğŸ”¥ ê°€ê²©ì¹´ë“œê¸°ëŠ¥ëª©ë¡ï¼šë³€ê²½ë¡œì„œ 2 ì—´í‘œì‹œ */
            .pricing-card div[style*="grid-template-columns: repeat(3, 1fr)"] {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.5rem 0.75rem !important;
            }
            
            /* ğŸ”¥ ê°•ì œì œê±°ì™¼ìª½ì˜¤ë¥¸ìª½ë„ˆë¹„é™åˆ¶ï¼Œè®“ì¹´ë“œä½”æ»¿ì»¨í…Œì´ë„ˆ */
            html body .pricing-card[style],
            html body #monthly-plan[style],
            html body #yearly-plan[style],
            html body div[id="monthly-plan"],
            html body div[id="yearly-plan"] {
                max-width: none !important;
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                box-sizing: border-box !important;
            }
        
        /* ëª¨ë°”ì¼ ë²„ì „ UI ìµœì í™”ìŠ¤íƒ€ì¼ */
/* é©ç”¨ì— dashboard.html, firstproject.html, account.html, billing.html */

@media (max-width: 768px) {
    /* ==================== ë²”ìš©ìŠ¤íƒ€ì¼ ==================== */
    
    /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
    body {
        padding-top: 60px !important;
    }
    
    .main-container,
    .content-wrapper {
        padding: 0.75rem !important;
        margin: 0 !important;
    }
    
    /* ëª¨ë“ ì¹´ë“œ */
    .card,
    div[style*="border-radius"][style*="padding"] {
        padding: 1rem !important;
        margin-bottom: 1rem !important;
    }
    
    /* ì œëª© */
    h1 {
        font-size: 1.5rem !important;
    }
    
    h2 {
        font-size: 1.25rem !important;
    }
    
    h3 {
        font-size: 1.125rem !important;
    }
    
    /* ë²„íŠ¼ */
    button,
    .btn {
        padding: 0.75rem 1rem !important;
        font-size: 0.875rem !important;
    }
    
    /* ì…ë ¥ ìƒì */
    input,
    select,
    textarea {
        font-size: 1rem !important;
        padding: 0.75rem !important;
    }
    
    /* ==================== Dashboard ì „ìš© ==================== */
    
    /* í”„ë¡œì íŠ¸ëª©ë¡ */
    .projects-header {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    .projects-header > div {
        width: 100% !important;
    }
    
    /* í‘œ */
    table {
        font-size: 0.875rem !important;
    }
    
    table th,
    table td {
        padding: 0.5rem !important;
    }
    
    /* ìˆ¨ê¹€ì—´ ì„¹ì…˜ï¼ˆëª¨ë°”ì¼ ë²„ì „ï¼‰ */
    table th:nth-child(3),
    table td:nth-child(3) {
        display: none !important; /* ìˆ¨ê¹€ CREATED ì—´ */
    }
    
    /* ==================== First Project ì „ìš© ==================== */
    
    /* ë¬¸ì„œìœ í˜•ì„ íƒê¸° */
    .document-type-selector {
        grid-template-columns: 1fr !important;
        gap: 0.75rem !important;
    }
    
    /* ì—…ë¡œë“œ ì˜ì—­ */
    .upload-area {
        padding: 2rem 1rem !important;
    }
    
    /* ë‚´ë³´ë‚´ê¸°ë²„íŠ¼ ê·¸ë£¹ */
    .export-buttons {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .export-buttons button {
        width: 100% !important;
    }
    
    /* ë¬¸ì„œí‘œ */
    #team-project-tbody tr {
        font-size: 0.8125rem !important;
    }
    
    /* ìˆ¨ê¹€ì—´ ì„¹ì…˜ */
    .document-table th:nth-child(4),
    .document-table td:nth-child(4),
    .document-table th:nth-child(5),
    .document-table td:nth-child(5) {
        display: none !important; /* ìˆ¨ê¹€ê¸ˆì•¡ë°ë‚ ì§œì—´ */
    }
    
    /* ==================== Account ì „ìš© ==================== */
    
    /* í”„ë¡œí•„ì¹´ë“œ */
    .profile-card {
        flex-direction: column !important;
        text-align: center !important;
    }
    
    .profile-avatar {
        margin: 0 auto 1rem !important;
    }
    
    /* í¬ë ˆë”§ ì‚¬ìš© í˜„í™© */
    .credits-usage {
        flex-direction: column !important;
    }
    
    .credits-bar {
        width: 100% !important;
    }
    
    /* è¡¨å–® */
    .form-group {
        margin-bottom: 1rem !important;
    }
    
    .form-row {
        flex-direction: column !important;
        gap: 1rem !important;
    }
    
    /* ==================== Billing ì „ìš© ==================== */
    
    /* ê°€ê²©ì¹´ë“œ */
    .pricing-cards {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    /* ê±°ë˜ê¸°ë¡í‘œ */
    .transaction-table {
        font-size: 0.8125rem !important;
    }
    
    .transaction-table th:nth-child(2),
    .transaction-table td:nth-child(2) {
        display: none !important; /* ìˆ¨ê¹€ì„¤ëª…ì—´ */
    }
    
    /* ==================== ëª¨ë‹¬ ==================== */
    
    .modal-content {
        width: 95% !important;
        max-width: 95% !important;
        margin: 1rem !important;
        padding: 1rem !important;
    }
    
    .modal-header {
        padding: 1rem !important;
    }
    
    .modal-body {
        padding: 1rem !important;
    }
    
    .modal-footer {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .modal-footer button {
        width: 100% !important;
    }
    
    /* ==================== ì‚¬ì´ë“œë°” ==================== */
    
    .sidebar {
        width: 100% !important;
        position: fixed !important;
        top: 60px !important;
        left: -100% !important;
        height: calc(100vh - 60px) !important;
        transition: left 0.3s ease !important;
        z-index: 999 !important;
    }
    
    .sidebar.active {
        left: 0 !important;
    }
    
    /* ==================== ê¸°íƒ€ìµœì í™” ==================== */
    
    /* ìˆ¨ê¹€ì•„ë‹ˆí•„ìš”í•œìš”ì†Œ */
    .desktop-only {
        display: none !important;
    }
    
    /* í‘œì‹œëª¨ë°”ì¼ ë²„ì „ìš”ì†Œ */
    .mobile-only {
        display: block !important;
    }
    
    /* ì‚¬ì´ê±°ë¦¬ì¡°ì • */
    section {
        padding: 1.5rem 0 !important;
    }
    
    /* ë²„íŠ¼ ê·¸ë£¹ */
    .button-group {
        flex-direction: column !important;
        gap: 0.5rem !important;
    }
    
    .button-group button,
    .button-group a {
        width: 100% !important;
    }
}

        /* Billing íŠ¹ì •ìŠ¤íƒ€ì¼ */
        @media (max-width: 768px) {
            .billing-header {
                flex-direction: column !important;
            }
            
            .plan-selector {
                width: 100% !important;
            }
            
            .payment-method {
                flex-direction: column !important;
            }
        }
        
        /* ==================== ëª¨ë‹¬ìŠ¤íƒ€ì¼ ==================== */
        .modal-overlay {
            display: none !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            background: rgba(0, 0, 0, 0.5) !important;
            z-index: 9999 !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .modal-overlay.active {
            display: flex !important;
        }

        .modal-content {
            background: #ffffff !important;
            border-radius: 12px !important;
            padding: 2rem !important;
            width: 90% !important;
            max-width: 500px !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
            position: relative !important;
            z-index: 10000 !important;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 1.5rem;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #1f2937;
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
            color: #1f2937;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .btn-cancel {
            background: #ffffff;
            border: 1px solid #d1d5db;
            color: #374151;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-cancel:hover {
            background: #f9fafb;
        }

        .btn-create {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .btn-create:hover {
            opacity: 0.9;
        }
        
        </style>
    
    <script>
        // ì¦‰ì‹œ ì‹¤í–‰ï¼šë³´ì¥í˜ì´ì§€ê°€ëŠ¥è¦‹
        (function() {
            logger.log('ğŸš€ Billingí˜ì´ì§€ì¦‰ì‹œì´ˆê¸°í™”...');
            
            // ë³´ì¥bodyê°€ëŠ¥è¦‹
            document.body.style.display = 'block';
            document.body.style.visibility = 'visible';
            
            // ë³´ì¥dashboardì»¨í…Œì´ë„ˆê°€ëŠ¥è¦‹
            const dashboardContainer = document.querySelector('.dashboard-container');
            if (dashboardContainer) {
                dashboardContainer.style.display = 'flex';
                dashboardContainer.style.visibility = 'visible';
            }
            
            // ë³´ì¥ì‚¬ì´ë“œë°”ê°€ëŠ¥è¦‹
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                sidebar.style.display = 'block';
                sidebar.style.visibility = 'visible';
            }
            
            // ë³´ì¥ì£¼ë‚´ìš©ê°€ëŠ¥è¦‹
            const mainContent = document.querySelector('.main-content');
            if (mainContent) {
                mainContent.style.display = 'block';
                mainContent.style.visibility = 'visible';
            }
            
            logger.log('âœ… Billingí˜ì´ì§€ì¦‰ì‹œì´ˆê¸°í™”ì™„ë£Œ');
        })();
    </script>
    
    <!-- Stripe Manager -->
    <script defer src="../stripe-manager.js"></script>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="alternate icon" type="image/png" href="../favicon.png">
    <link rel="stylesheet" href="mobile-responsive.css">

    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LWPEKNC7RQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LWPEKNC7RQ');
    </script>


    <!-- ë¦¬ì†ŒìŠ¤ íŒíŠ¸ - ë¡œë”© ì†ë„ ìµœì í™” -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
        <script src="/multilingual-data-sync.js"></script>

    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "VaultCaddy - Billing Statement Converter",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Web, iOS, Android",
  "offers": {
    "@type": "Offer",
    "price": "6988",
    "priceCurrency": "KRW",
    "priceValidUntil": "2026-12-31"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "127",
    "bestRating": "5"
  },
  "featureList": [
    "AI-powered recognition",
    "Excel/QuickBooks/Xero export",
    "98% accuracy",
    "3-second processing",
    "Batch processing",
    "Cloud storage"
  ]
}
</script>
    </head>
<body class="auth-checking">
    <!-- ğŸ”’ Auth ë¡œë“œì• ë‹ˆë©”ì´ì…˜ -->
    <div class="auth-loading">
        <div style="text-align: center;">
            <div style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
            <p style="color: #6b7280; font-size: 0.875rem;">ì‹ ì› í™•ì¸ ì¤‘...</p>
        </div>
    </div>
    
    <!-- ë‚´ë¹„ê²Œì´ì…˜ì—´ -->
    <!-- í†µì¼ëœ ì •ì  ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <!-- âœ… í†µì¼ëœ ì •ì  ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <!-- âœ… í†µì¼ëœ ì •ì  ë„¤ë¹„ê²Œì´ì…˜ ë°”ï¼ˆì™€ firstproject.html ì™„ì „ì¼ì¹˜ï¼‰-->
    <nav class="vaultcaddy-navbar" id="main-navbar" style="position: fixed; top: 0; left: 0; right: 0; height: 60px; background: #ffffff; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; justify-content: space-between; padding: 0 2rem; z-index: 1000; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);">
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <!-- í–„ë²„ê±° ë©”ë‰´ë²„íŠ¼ï¼ˆëª¨ë°”ì¼ë§Œ í‘œì‹œï¼‰-->
            <button id="mobile-menu-btn" onclick="openMobileSidebar()" style="display: none; background: none; border: none; cursor: pointer; padding: 0.5rem; color: #1f2937; font-size: 1.5rem;">
                <i class="fas fa-bars"></i>
            </button>
            
            <a href="index.html" style="display: flex; align-items: center; gap: 0.75rem; text-decoration: none; color: #1f2937; font-weight: 600; font-size: 1.125rem;">
                <div class="desktop-logo" style="width: 32px; height: 32px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.25rem;">
                    V
                </div>
                <div class="desktop-logo-text">
                    <div>VaultCaddy</div>
                    <div style="font-size: 0.75rem; color: #6b7280; font-weight: 400; text-transform: uppercase; letter-spacing: 0.05em;">AI DOCUMENT PROCESSING</div>
                </div>
            </a>
        </div>
        <div style="display: flex; align-items: center; gap: 2rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
                <a href="index.html#features" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">ê¸°ëŠ¥</a>
                <a href="index.html#pricing" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">ê°€ê²©</a>
                <a href="dashboard.html" style="color: #4b5563; text-decoration: none; font-size: 0.9375rem; font-weight: 500; transition: color 0.2s;">ëŒ€ì‹œë³´ë“œ</a>
            </div>
            
            <div id="language-switcher" style="display: inline-block; margin-right: 1rem;"></div>
                <div id="user-menu" style="position: relative; display: flex; align-items: center; gap: 0.75rem; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.2s;">
                <div id="user-avatar" style="width: 32px; height: 32px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 0.875rem;">Y</div>
            </div>
        </div>
    </nav>
    
    <!-- ëª¨ë°”ì¼ì‚¬ì´ë“œë°”ë©”ë‰´ -->
    <div id="mobile-sidebar" style="position: fixed; top: 0; left: -100%; width: 280px; height: 100vh; background: white; z-index: 2000; transition: left 0.3s ease; box-shadow: 2px 0 10px rgba(0,0,0,0.1); overflow-y: auto;">
        <div style="padding: 1.5rem;">
            <!-- ë©”ë‰´í•­ëª© -->
            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                <a href="index.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-home" style="width: 20px; color: #667eea;"></i>
                    <span>í™ˆ</span>
                </a>
                <a href="index.html#features" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-star" style="width: 20px; color: #667eea;"></i>
                    <span>ê¸°ëŠ¥</span>
                </a>
                <a href="index.html#pricing" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-dollar-sign" style="width: 20px; color: #667eea;"></i>
                    <span>ê°€ê²©</span>
                </a>
                <a href="dashboard.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-th-large" style="width: 20px; color: #667eea;"></i>
                    <span>ëŒ€ì‹œë³´ë“œ</span>
                </a>
                
                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>

                <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>
                
                <a href="privacy.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-shield-alt" style="width: 20px; color: #6b7280;"></i>
                    <span>ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</span>
                </a>
                <a href="terms.html" style="padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: background 0.2s; display: flex; align-items: center; gap: 0.75rem;" onclick="closeMobileSidebar()">
                    <i class="fas fa-file-contract" style="width: 20px; color: #6b7280;"></i>
                    <span>ì„œë¹„ìŠ¤ ì•½ê´€</span>
                </a>
            </div>
        </div>
    </div>
    </div>
    
    <!-- ì‚¬ì´ë“œë°”ë§ˆìŠ¤í¬ -->
    <div id="mobile-sidebar-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1999; display: none;" onclick="closeMobileSidebar()"></div>
    
    <!-- âœ… æ–°ç‰ˆç”¨æˆ¶èœå–®ï¼ˆ2026-01-25 å„ªåŒ–ï¼‰-->
<div id="user-dropdown" style="display: none; position: fixed; top: 70px; right: 2rem; background: white; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); min-width: 280px; z-index: 2000; border: 1px solid #e5e7eb; overflow: hidden;">
    <!-- ç”¨æˆ¶ä¿¡æ¯é ­éƒ¨ï¼ˆæ¼¸è®ŠèƒŒæ™¯ï¼‰-->
    <div style="padding: 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
            <div id="dropdown-avatar" style="width: 48px; height: 48px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-size: 1.25rem; font-weight: 600; border: 2px solid rgba(255,255,255,0.3);">U</div>
            <div style="flex: 1; min-width: 0;">
                <div id="dropdown-name" style="font-weight: 600; font-size: 1rem; margin-bottom: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">User</div>
                <div id="dropdown-email" style="font-size: 0.75rem; opacity: 0.9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">user@example.com</div>
            </div>
        </div>
        <div style="display: flex; gap: 0.75rem;">
            <div style="flex: 1; background: rgba(255,255,255,0.15); border-radius: 8px; padding: 0.75rem; text-align: center; backdrop-filter: blur(10px);">
                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">í¬ë ˆë”§</div>
                <div id="dropdown-credits" style="font-size: 1.25rem; font-weight: 700;">0</div>
            </div>
            <div style="flex: 1; background: rgba(255,255,255,0.15); border-radius: 8px; padding: 0.75rem; text-align: center; backdrop-filter: blur(10px);">
                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">ìš”ê¸ˆì œ</div>
                <div id="dropdown-plan" style="font-size: 0.875rem; font-weight: 600;">Free Plan</div>
            </div>
        </div>
    </div>
    <!-- èœå–®é …ç›® -->
    <div style="padding: 0.5rem;">
        <a href="account.html" onmouseout="this.style.backgroundColor='transparent'; this.style.transform='translateX(0)'" onmouseover="this.style.backgroundColor='#f3f4f6'; this.style.transform='translateX(4px)'" style="display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: all 0.2s ease; font-weight: 500;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px;">
                    <i class="fas fa-user" style="color: white; font-size: 0.875rem;"></i>
                </div>
                <span>ê³„ì •</span>
            </div>
            <span style="font-size: 0.75rem; color: #9ca3af;">âŒ˜A</span>
        </a>
        <a href="billing.html" onmouseout="this.style.backgroundColor='transparent'; this.style.transform='translateX(0)'" onmouseover="this.style.backgroundColor='#f3f4f6'; this.style.transform='translateX(4px)'" style="display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 1rem; color: #374151; text-decoration: none; border-radius: 8px; transition: all 0.2s ease; font-weight: 500;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 8px;">
                    <i class="fas fa-credit-card" style="color: white; font-size: 0.875rem;"></i>
                </div>
                <span>ê²°ì œ</span>
            </div>
            <span style="font-size: 0.75rem; color: #9ca3af;">âŒ˜B</span>
        </a>
    </div>
    <!-- ç™»å‡ºæŒ‰éˆ• -->
    <div style="padding: 0.5rem; border-top: 1px solid #e5e7eb;">
        <button onclick="handleLogout()" onmouseout="this.style.backgroundColor='transparent'; this.style.transform='translateX(0)'" onmouseover="this.style.backgroundColor='#fef2f2'; this.style.transform='translateX(4px)'" style="width: 100%; display: flex; align-items: center; justify-content: space-between; padding: 0.875rem 1rem; color: #dc2626; background: transparent; border: none; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-weight: 500; text-align: left;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: #fef2f2; border-radius: 8px;">
                    <i class="fas fa-sign-out-alt" style="color: #dc2626; font-size: 0.875rem;"></i>
                </div>
                <span>ë¡œê·¸ì•„ì›ƒ</span>
            </div>
            <span style="font-size: 0.75rem; color: #9ca3af;">âŒ˜Q</span>
        </button>
    </div>
</div>
    
    <!-- âœ… index.html ë™ì ì—…ë°ì´íŠ¸ì‚¬ìš©ììƒíƒœ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            logger.log('âœ… index.html ì´ˆê¸°í™”');
            
            let userCredits = 0;
            let userEmail = '';
            let userDisplayName = '';
            
            // ê°€ì ¸ì˜¤ê¸°ì‚¬ìš©ìì²« ê¸€ì
            function getUserInitial() {
                // ìš°ì„ ì‚¬ìš© displayName ì˜ ì²« ê¸€ì
                if (userDisplayName && userDisplayName.trim()) {
                    return userDisplayName.charAt(0).toUpperCase();
                }
                // ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ì‚¬ìš© email ì˜ ì²« ê¸€ì
                if (userEmail && userEmail.trim()) {
                    return userEmail.charAt(0).toUpperCase();
                }
                return 'U';
            }
            
            // ğŸ”¥ í–„ë²„ê±° ë©”ë‰´ê¸°ëŠ¥ï¼ˆì¦‰ì‹œ ì‹¤í–‰ï¼Œì•„ë‹ˆëŒ€ê¸° DOMContentLoadedï¼‰
            (function() {
                logger.log('ğŸ”µ ì´ˆê¸°í™”í–„ë²„ê±° ë©”ë‰´...');
                
                // ì—´ê¸°ì‚¬ì´ë“œë°”
                window.openMobileSidebar = function() {
                    logger.log('ğŸ”µ openMobileSidebar í˜¸ì¶œë¨');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    logger.log('ğŸ”µ sidebar:', sidebar);
                    logger.log('ğŸ”µ overlay:', overlay);
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '0';
                        overlay.style.display = 'block';
                        document.body.style.overflow = 'hidden';
                        logger.log('âœ… ì‚¬ì´ë“œë°”ì—´ë¦¼');
                    } else {
                        console.error('âŒ ì°¾ì„ ìˆ˜ ì—†ìŒì‚¬ì´ë“œë°”ë˜ëŠ”ë§ˆìŠ¤í¬ ìš”ì†Œ');
                    }
                };
                
                // ë‹«ê¸°ì‚¬ì´ë“œë°”
                window.closeMobileSidebar = function() {
                    logger.log('ğŸ”µ closeMobileSidebar í˜¸ì¶œë¨');
                    const sidebar = document.getElementById('mobile-sidebar');
                    const overlay = document.getElementById('mobile-sidebar-overlay');
                    
                    if (sidebar && overlay) {
                        sidebar.style.left = '-100%';
                        overlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        logger.log('âœ… ì‚¬ì´ë“œë°”ì´ë¯¸ ë‹«í˜');
                    }
                };
                
                // í–„ë²„ê±° ë©”ë‰´ë²„íŠ¼ì‚¬ìš© onclickï¼Œç„¡éœ€é¡ì™¸ë¶€ë°”ì¸ë”©
                logger.log('âœ… í–„ë²„ê±° ë©”ë‰´ê¸°ëŠ¥ì¤€ë¹„ë¨ï¼ˆì‚¬ìš© onclickï¼‰');
            })();
                
                // ëª¨ë°”ì¼ ë²„ì „ìë™ìºëŸ¬ì…€ï¼ˆë§Œì—ì„œëª¨ë°”ì¼ ë²„ì „í™œì„±í™”ï¼‰
                if (window.innerWidth <= 768) {
                    // í‰ê°€ìºëŸ¬ì…€
                    const testimonialsContainer = document.getElementById('testimonials-container');
                    if (testimonialsContainer) {
                        let testimonialIndex = 0;
                        const testimonialCards = testimonialsContainer.children;
                        
                        setInterval(() => {
                            testimonialIndex = (testimonialIndex + 1) % testimonialCards.length;
                            const scrollAmount = testimonialCards[testimonialIndex].offsetLeft - testimonialsContainer.offsetLeft;
                            testimonialsContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 4000); // ë§¤4ì´ˆ ì „í™˜
                    }
                    
                    // í•™ìŠµ ì„¼í„°ìºëŸ¬ì…€
                    const learningContainer = document.getElementById('learning-center-container');
                    if (learningContainer) {
                        let learningIndex = 0;
                        const learningCards = learningContainer.children;
                        
                        setInterval(() => {
                            learningIndex = (learningIndex + 1) % learningCards.length;
                            const scrollAmount = learningCards[learningIndex].offsetLeft - learningContainer.offsetLeft;
                            learningContainer.scrollTo({
                                left: scrollAmount,
                                behavior: 'smooth'
                            });
                        }, 5000); // ë§¤5ì´ˆ ì „í™˜
                    }
                }
            });
            
            // ì „í™˜ë“œë¡­ë‹¤ìš´ ë©”ë‰´
            async function toggleDropdown() {
                const dropdown = document.getElementById('user-dropdown');
                if (dropdown.style.display === 'none') {
                    dropdown.style.display = 'block';
                    
                    // ğŸ”¥ ì¦‰ì‹œë•Œë¶€í„° SimpleDataManager ê°€ì ¸ì˜¤ê¸°ìµœìƒˆë¡œìš´ Credits
                    if (window.simpleDataManager && window.simpleDataManager.initialized) {
                        try {
                            userCredits = await window.simpleDataManager.getUserCredits();
                            logger.log('âœ… ì¦‰ì‹œ ê°€ì ¸ì˜¤ê¸° Credits:', userCredits);
                        } catch (error) {
                            console.error('âŒ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨ Credits:', error);
                        }
                    }
                    
                    // ì—…ë°ì´íŠ¸ë“œë¡­ë‹¤ìš´ ë©”ë‰´ë‚´ìš©
                    document.getElementById('dropdown-credits').textContent = userCredits.toLocaleString();
                    document.getElementById('dropdown-email').textContent = userEmail;
                } else {
                    dropdown.style.display = 'none';
                }
            }
            
            // í´ë¦­ì™¸ë¶€ ë‹«ê¸°ë“œë¡­ë‹¤ìš´ ë©”ë‰´
            document.addEventListener('click', function(event) {
                const dropdown = document.getElementById('user-dropdown');
                const userMenu = document.getElementById('user-menu');
                
                if (dropdown && userMenu && 
                    !dropdown.contains(event.target) && 
                    !userMenu.contains(event.target)) {
                    dropdown.style.display = 'none';
                }
            });
            
            // ë¡œê·¸ì•„ì›ƒê¸°ëŠ¥
            window.handleLogout = async function() {
                try {
                    if (window.simpleAuth) {
                        await window.simpleAuth.logout();
                        window.location.href = 'index.html';
                    }
                } catch (error) {
                    console.error('ë¡œê·¸ì•„ì›ƒì‹¤íŒ¨:', error);
                    alert('ë¡œê·¸ì•„ì›ƒì‹¤íŒ¨ï¼Œìš”ì²­ì¬ì‹œë„');
                }
            };
            
            // ëŒ€ê¸° Firebase ë° simpleAuth ë¡œë“œ
            async function updateUserMenu() {
                const userMenu = document.getElementById('user-menu');
                if (!userMenu) return;
                
                try {
                    const isLoggedIn = window.simpleAuth && window.simpleAuth.isLoggedIn();
                    
                    if (isLoggedIn) {
                        // âœ… ì´ë¯¸ë¡œê·¸ì¸ï¼ší‘œì‹œì‚¬ìš©ìì•„ë°”íƒ€
                        const currentUser = window.simpleAuth.getCurrentUser();
                        userEmail = currentUser.email || '';
                        userDisplayName = currentUser.displayName || '';
                        
                        // ğŸ”¥ ë¶€í„° Firestore ê°€ì ¸ì˜¤ê¸° displayName ë° credits
                        if (window.simpleDataManager && window.simpleDataManager.initialized) {
                            try {
                                const userDoc = await window.simpleDataManager.getUserDocument();
                                if (userDoc) {
                                    userDisplayName = userDoc.displayName || userDisplayName;
                                    userCredits = userDoc.credits || 0;
                                    logger.log('âœ… index.html ê°€ì ¸ì˜¤ê¸° Credits:', userCredits);
                                }
                            } catch (error) {
                                logger.log('âš ï¸ ë¶ˆê°€ëŠ¥ë¶€í„° Firestore ê°€ì ¸ì˜¤ê¸°ì‚¬ìš©ììë£Œ:', error);
                            }
                        } else {
                            logger.log('â³ SimpleDataManager ì•„ì§ì´ˆê¸°í™”ï¼ŒëŒ€ê¸°ì¤‘...');
                            // ì§€ì—°ì¬ì‹œë„
                            setTimeout(async () => {
                                if (window.simpleDataManager && window.simpleDataManager.initialized) {
                                    try {
                                        userCredits = await window.simpleDataManager.getUserCredits();
                                        logger.log('âœ… ì§€ì—° ê°€ì ¸ì˜¤ê¸° Credits:', userCredits);
                                    } catch (error) {
                                        console.error('âŒ ì§€ì—° ê°€ì ¸ì˜¤ê¸°ì‹¤íŒ¨:', error);
                                    }
                                }
                            }, 1000);
                        }
                        
                        const userInitial = getUserInitial();
                        logger.log(`ğŸ‘¤ ì‚¬ìš©ìì²« ê¸€ì: "${userInitial}" (displayName: "${userDisplayName}")`);
                        
                        userMenu.innerHTML = `
                            <div onclick="toggleDropdown()" class="user-menu-trigger">
                                <div class="user-avatar">${userInitial}</div>
                            </div>
                        `;
                        logger.log('âœ… ì‚¬ìš©ìì´ë¯¸ë¡œê·¸ì¸ï¼Œí‘œì‹œì•„ë°”íƒ€');
                    } else {
                        // âœ… ë¯¸ë¡œê·¸ì¸ï¼ší‘œì‹œë¡œê·¸ì¸ë²„íŠ¼
                        userMenu.innerHTML = `
                            <button onclick="window.location.href='auth.html'" class="login-button">ë¡œê·¸ì¸</button>
                        `;
                        logger.log('âœ… ì‚¬ìš©ìë¯¸ë¡œê·¸ì¸ï¼Œí‘œì‹œë¡œê·¸ì¸ë²„íŠ¼');
                    }
                } catch (e) {
                    logger.log('âŒ ë¶ˆê°€ëŠ¥ì—…ë°ì´íŠ¸ì‚¬ìš©ìë©”ë‰´:', e);
                }
            }
            
            // âœ… simpleAuth ì´ˆê¸°í™”ë¥¼ ê¸°ë‹¤ë¦° í›„ ì‚¬ìš©ì ë©”ë‰´ ì—…ë°ì´íŠ¸
            async function waitForAuthAndUpdate() {
                if (window.simpleAuth && window.simpleAuth.initialized) {
                    updateUserMenu();
                    return;
                }
                let attempts = 0;
                const checkInterval = setInterval(() => {
                    attempts++;
                    if (window.simpleAuth && window.simpleAuth.initialized) {
                        clearInterval(checkInterval);
                        console.log('âœ… simpleAuth ì´ˆê¸°í™” ì™„ë£Œ, ì‚¬ìš©ì ë©”ë‰´ ì—…ë°ì´íŠ¸');
                        updateUserMenu();
                    } else if (attempts > 50) {
                        clearInterval(checkInterval);
                        console.warn('âš ï¸ simpleAuth ì´ˆê¸°í™” íƒ€ì„ì•„ì›ƒ, ê°•ì œ ì—…ë°ì´íŠ¸');
                        updateUserMenu();
                    }
                }, 100);
            }
            waitForAuthAndUpdate();
            
            // Firebase ë° Auth ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë‹
            window.addEventListener('firebase-ready', updateUserMenu);
            window.addEventListener('user-logged-in', updateUserMenu);
            window.addEventListener('user-logged-out', updateUserMenu);
            window.addEventListener('auth-state-changed', updateUserMenu);
            
            // ë…¸ì¶œ toggleDropdown ê¹Œì§€ì „ì—­
            window.toggleDropdown = toggleDropdown;
        });
    </script>

    <!-- ì£¼ìš”ì½˜í…ì¸  ì˜ì—­ -->
    <main style="padding-top: 10px;">
    <!-- Dashboard ì»¨í…Œì´ë„ˆ -->
    <div class="dashboard-container" style="display: flex; min-height: calc(100vh - 10px); background: #ffffff; padding-top: 10px;">
        <!-- ì™¼ìª½ì‚¬ì´ë“œë°” (ì˜í•´ sidebar-component.js ë™ì  ìƒì„±) -->
        <aside class="sidebar"></aside>

        <!-- ì£¼ìš”ì½˜í…ì¸  ì˜ì—­ -->
        <main class="main-content" style="flex: 1; background: #ffffff; margin-left: 280px; overflow-y: auto; min-height: calc(100vh - 60px); display: block !important; visibility: visible !important;">
            <!-- êµ¬ë…ë°©ì•ˆ -->
            <div class="plans-section" id="subscription-plans" style="padding: 2rem;">
                <div style="text-align: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.75rem; color: #1f2937; line-height: 1.3;">ìˆ¨ê²¨ì§„ ë¹„ìš© ì—†ì´ ì•ˆì „í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</h2>
                    <p style="font-size: 1rem; color: #6b7280; margin: 0;">ìˆ˜ì²œ ê°œì˜ ê¸°ì—…ê³¼ í•¨ê»˜ ì¬ë¬´ ë°ì´í„° ì…ë ¥ ì‹œê°„ì„ ì ˆì•½í•˜ì„¸ìš”.</p>
                </div>
                
                <!-- ì›”ê°„ë°ì—°ê°„ë°ì—´í‘œì‹œï¼ˆì‚¬ìš© index.html çš„ì¹´ë“œìŠ¤íƒ€ì¼ï¼‰-->
                <div id="pricing-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 1000px; margin: 2rem auto;">
                    <!-- ì›”ê°„ë°©ì•ˆ -->
                    <div id="monthly-plan" class="pricing-card" style="border: 2px solid #e5e7eb; border-radius: 16px; padding: 2.5rem; background: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); width: 100%;">
                        <!-- ğŸ”¥ ì œëª©ë°ê°€ê²©æ©«í–¥í•´æ’ì—´ -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.monthly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">ì›”ê°„</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">â‚©</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">6,988</span>
                                <span style="font-size: 1rem; color: #6b7280;">/ì›”</span>
                            </div>
                        </div>
                        
                        <!-- í¬í•¨ ì‚¬í•­ -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f9fafb; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">í¬í•¨ ì‚¬í•­</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì›” 100 í¬ë ˆë”§</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>ì´ˆê³¼ ì‹œ í˜ì´ì§€ë‹¹ â‚©55</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ë¬´ì œí•œ ë°°ì¹˜ ì²˜ë¦¬</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì›í´ë¦­ ì¼ê´„ ë³€í™˜</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSV ë‚´ë³´ë‚´ê¸°</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooks í†µí•©</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>í•˜ì´ë¸Œë¦¬ë“œ AI ì²˜ë¦¬</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 ç¨®ì–¸ì–´æ”¯æ´</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì´ë©”ì¼ ì§€ì›</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì•ˆì „í•œ íŒŒì¼ ì—…ë¡œë“œ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ë°ì´í„° ë³´ê´€</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì´ë¯¸ì§€ ë°±ì—…</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA ë²„íŠ¼ -->
                        <button onclick="createCheckoutSession('monthly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">ì‹œì‘í•˜ê¸°</button>
                    </div>

                    <!-- ì—°ê°„ë°©ì•ˆ -->
                    <div id="yearly-plan" class="pricing-card" style="border: 2px solid #8b5cf6; border-radius: 16px; padding: 2.5rem; background: linear-gradient(135deg, #ffffff 0%, #f3f0ff 100%); box-shadow: 0 4px 20px rgba(139, 92, 246, 0.1); width: 100%; position: relative;">
                        <div data-i18n="pricing.save" style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #8b5cf6; color: white; padding: 0.25rem 1rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">20% ì ˆì•½</div>
                        <!-- ğŸ”¥ ì œëª©ë°ê°€ê²©æ©«í–¥í•´æ’ì—´ -->
                        <div class="pricing-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h3 data-i18n="pricing.yearly" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 0; color: #1f2937; text-align: left;">ì—°ê°„</h3>
                            <div style="display: flex; align-items: baseline; gap: 0.25rem;">
                                <span style="font-size: 1rem; color: #6b7280;">â‚©</span>
                                <span style="font-size: 3rem; font-weight: 700; color: #1f2937; line-height: 1;">5,188</span>
                                <span style="font-size: 1rem; color: #6b7280;">/ì›”</span>
                            </div>
                        </div>
                        
                        <!-- í¬í•¨ ì‚¬í•­ -->
                        <div style="margin-bottom: 1.5rem; padding: 1rem; background: transparent; border-radius: 8px;">
                            <p style="font-weight: 600; margin-bottom: 0.5rem; color: #1f2937; font-size: 0.875rem;">í¬í•¨ ì‚¬í•­</p>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì›” 100 í¬ë ˆë”§</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>ì´ˆê³¼ ì‹œ í˜ì´ì§€ë‹¹ â‚©55</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ë¬´ì œí•œ ë°°ì¹˜ ì²˜ë¦¬</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì›í´ë¦­ ì¼ê´„ ë³€í™˜</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>Excel/CSV ë‚´ë³´ë‚´ê¸°</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>QuickBooks í†µí•©</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>í•˜ì´ë¸Œë¦¬ë“œ AI ì²˜ë¦¬</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span><strong>8 ç¨®ì–¸ì–´æ”¯æ´</strong></span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì´ë©”ì¼ ì§€ì›</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì•ˆì „í•œ íŒŒì¼ ì—…ë¡œë“œ</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ë°ì´í„° ë³´ê´€</span></div>
                                <div style="display: flex; align-items: center; font-size: 0.875rem;"><i class="fas fa-check" style="color: #10b981; margin-right: 0.5rem;"></i> <span>ì´ë¯¸ì§€ ë°±ì—…</span></div>
                            </div>
                        </div>
                        
                        <!-- CTA ë²„íŠ¼ -->
                        <button onclick="createCheckoutSession('yearly', event)" data-i18n="pricing.cta" class="cta-btn" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; background: #8b5cf6; color: white; border: none; border-radius: 8px; cursor: pointer; display: block; text-align: center; text-decoration: none; transition: background 0.2s;">ì‹œì‘í•˜ê¸°</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        // âœ… ç°¡åŒ–ï¼šì§ì ‘ì‚¬ìš© SimpleAuth
        function checkAuth() {
            return window.simpleAuth && window.simpleAuth.isLoggedIn();
        }
        
        function showAuthNotificationInBilling() {
            logger.log('ğŸ’¡ ì—ì„œ Billing í˜ì´ì§€í‘œì‹œèº«ä»½ê²€ì¦íŒíŠ¸');
            
            const notification = document.createElement('div');
            notification.id = 'billing-auth-notification';
            notification.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; background: #f3e8ff; border-bottom: 1px solid #8b5cf6; padding: 0.75rem; z-index: 1000; text-align: center;">
                    <p style="margin: 0; color: #6b21a8;">
                        <i class="fas fa-info-circle"></i> 
                        å¦‚éœ€å®Œæ•´ì²­êµ¬ê¸°ëŠ¥ï¼Œìš”ì²­ <a href="auth.html" style="color: #7c3aed; text-decoration: underline;">ì¤‘ìƒˆë¡œìš´ë¡œê·¸ì¸</a> ë˜ëŠ” 
                        <button onclick="window.location.reload()" style="background: #8b5cf6; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; margin-left: 0.5rem;">ì¤‘ìƒˆë¡œìš´ë¡œë“œí˜ì´ì§€</button>
                        <button onclick="document.getElementById('billing-auth-notification').remove()" style="background: transparent; border: none; color: #6b21a8; margin-left: 1rem;">âœ•</button>
                    </p>
                </div>
            `;
            document.body.insertBefore(notification, document.body.firstChild);
            
            // ì¡°ì •í˜ì´ì§€ë‚´ìš©í–¥í•´ì•„ë˜åì´ë™
            const mainContent = document.querySelector('.billing-container');
            if (mainContent) {
                mainContent.style.marginTop = '60px';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            logger.log('Billing í˜ì´ì§€ë¡œë“œ ì¤‘...');
            
            // ğŸ”¥ ëª¨ë°”ì¼ ë²„ì „ê°•ì œä¿®ë³€ê²½ê°€ê²©ì¹´ë“œë„ˆë¹„
            function forceMobilePricingWidth() {
                if (window.innerWidth <= 768) {
                    const monthlyPlan = document.getElementById('monthly-plan');
                    const yearlyPlan = document.getElementById('yearly-plan');
                    const pricingContainer = document.getElementById('pricing-container');
                    
                    if (monthlyPlan) {
                        monthlyPlan.style.maxWidth = 'none';
                        monthlyPlan.style.width = '100%';
                        monthlyPlan.style.marginLeft = '0';
                        monthlyPlan.style.marginRight = '0';
                        logger.log('âœ… ì›”ê°„ì¹´ë“œë„ˆë¹„ì´ë¯¸ê°•ì œè¨­ë¡œì„œ 100%');
                    }
                    
                    if (yearlyPlan) {
                        yearlyPlan.style.maxWidth = 'none';
                        yearlyPlan.style.width = '100%';
                        yearlyPlan.style.marginLeft = '0';
                        yearlyPlan.style.marginRight = '0';
                        logger.log('âœ… ì—°ê°„ì¹´ë“œë„ˆë¹„ì´ë¯¸ê°•ì œè¨­ë¡œì„œ 100%');
                    }
                    
                    if (pricingContainer) {
                        pricingContainer.style.padding = '0';
                        pricingContainer.style.maxWidth = '100%';
                        logger.log('âœ… ê°€ê²©ì»¨í…Œì´ë„ˆë‚´ë¶€ê±°ë¦¬ì´ë¯¸ì¡°ì •');
                    }
                    
                    // ì¡°ì • plans-section çš„ padding
                    const plansSection = document.querySelector('.plans-section');
                    if (plansSection) {
                        plansSection.style.padding = '0.25rem'; // ì™¼ìª½ì˜¤ë¥¸ìª½å„ç•™ 0.25rem è¾¹ê±°ë¦¬
                        logger.log('âœ… plans-section ë‚´ë¶€ê±°ë¦¬ì´ë¯¸ì¡°ì •ë¡œì„œ 0.25rem');
                    }
                }
            }
            
            // ì¦‰ì‹œ ì‹¤í–‰ + è¦–çª—ì¡°ì •ë•ŒåŸ·í–‰
            forceMobilePricingWidth();
            window.addEventListener('resize', forceMobilePricingWidth);

            // ì´ˆê¸°í™”í†µì¼ì‚¬ì´ë“œë°”
            window.billingSidebar = new VaultCaddySidebar('billing');

            // ì´ˆê¸°í™”í˜ì´ì§€
            initBillingPage();
            
            // ì²˜ë¦¬ Stripe æ”¯ä»˜å›èª¿
            handlePaymentSuccess();
            
            // í™•ì¸ Credits ì—¬ë¶€ë§Œë£Œ
            checkCreditsExpiry();
            
            // ë¦¬ìŠ¤ë‹ì–¸ì–´è®Šæ›´ì´ë²¤íŠ¸
            window.addEventListener('languageChanged', function(e) {
                logger.log('Billing: ì–¸ì–´ì´ë¯¸è®Šæ›´ë¡œì„œ', e.detail.language);
                // ì¤‘ìƒˆë¡œìš´æ‡‰ç”¨ç¿»è­¯
                if (window.languageManager) {
                    window.languageManager.loadLanguage(e.detail.language);
                }
            });
        });

        function initBillingPage() {
            logger.log('Billing page initialized');
        }

        // ê´€ë¦¬ë°©ì•ˆ
        function managePlan() {
            window.VaultCaddyNavbar.showNotification('Plan management coming soon!', 'info');
        }

        // í¬ë ˆë”§ êµ¬ë§¤
        function purchaseCredits(credits, price) {
            logger.log(`è³¼è²· ${credits} creditsï¼Œê°€ê²© $${price}`);
            
            // ì‚¬ìš© StripeManager ì²˜ë¦¬è³¼è²·
            if (window.StripeManager) {
                window.StripeManager.purchaseCredits(credits);
            } else {
                alert('Stripe ê´€ë¦¬ìë¯¸ë¡œë“œï¼Œìš”ì²­åˆ·ìƒˆë¡œìš´í˜ì´ì§€ì¬ì‹œë„');
            }
        }

        // ì´ˆê¸°í™” Stripe æ”¯ä»˜
        function initializeStripePayment(credits, price) {
            // ì—¬ê¸°í• ä¾†æœƒæ•´åˆ Stripe Checkout
            window.VaultCaddyNavbar.showNotification(`æ­£ì—ì„œì´ˆê¸°í™” ${credits} Credits è³¼è²·æµç¨‹...`, 'info');
            
            // æ¨¡æ“¬æ”¯ä»˜ì„±ê³µ
            setTimeout(() => {
                simulatePaymentSuccess(credits);
            }, 2000);
        }

        // æ¨¡æ“¬æ”¯ä»˜ì„±ê³µë°ì—…ë°ì´íŠ¸ Credits
        function simulatePaymentSuccess(credits) {
            // ì—…ë°ì´íŠ¸æœ¬åœ° Credits æ•¸é‡ï¼ˆå¯¦éš›ìœ„æ‡‰è©²ë¶€í„°ä¼ºæœê¸°ê°€ì ¸ì˜¤ê¸°ï¼‰
            const currentCredits = parseInt(document.querySelector('.stat-value').textContent) || 0;
            const newCredits = currentCredits + credits;
            
            // ì—…ë°ì´íŠ¸ UI í‘œì‹œ
            document.querySelector('.stat-value').textContent = newCredits;
            
            window.VaultCaddyNavbar.showNotification(`ì„±ê³µè³¼è²· ${credits} Creditsï¼ë•Œì•ì”ì•¡ï¼š${newCredits} Credits`, 'success');
        }

        // âœ… í†µì¼çš„êµ¬ë…ë°©ì•ˆí•¨ìˆ˜ï¼ˆ2025-11-22 ì—…ë°ì´íŠ¸ï¼‰
        function subscribeToPlan(planType) {
            logger.log(`ì‹œì‘ ${planType} ë°©ì•ˆêµ¬ë…æµç¨‹`);
            
            // ì‚¬ìš© StripeManager ì²˜ë¦¬êµ¬ë…
            if (window.StripeManager && window.StripeManager.subscribeToPlan) {
                window.StripeManager.subscribeToPlan(planType);
            } else {
                console.error('âŒ StripeManager ë¯¸ë¡œë“œ');
                alert('ì‹œìŠ¤í…œì´ˆê¸°í™”ì¤‘ï¼Œìš”ì²­ç¨í›„å†è©¦');
            }
            
            return;
            
            // === ä»¥ì•„ë˜æ˜¯èˆŠé‚è¼¯ï¼ˆä¿ç•™ä½œë¡œì„œåƒè€ƒï¼‰===
            
            // âœ… ìƒˆë¡œìš´ê°€ê²©ë°©ì•ˆï¼ˆ2025-12-09 ì—…ë°ì´íŠ¸ï¼‰
            // ì›” ìš”ê¸ˆ: HKD $58/ì›”ï¼Œí¬í•¨ 100 Credits + è¶…å‡ºí›„ HKD $0.5/í˜ì´ì§€
            // ì—°ê°„ ìš”ê¸ˆ: HKD $46/ì›”ï¼ˆ$552/ë…„ï¼‰ï¼Œí¬í•¨ 1,200 Credits + è¶…å‡ºí›„ HKD $0.5/í˜ì´ì§€
            
            // âœ… Stripe ç”¢å“æ˜ å°„ï¼ˆ2025-12-09 ì—…ë°ì´íŠ¸ï¼‰
            // ì›” ìš”ê¸ˆ: prod_TSmKnHeaQVxZXC - HKD $58/ì›” + ì‚¬ìš©é‡ì²­êµ¬
            // ì—°ê°„ ìš”ê¸ˆ: prod_TSsEWI5bv9pSkz - HKD $552/ë…„ + ì‚¬ìš©é‡ì²­êµ¬
            const stripeProductIds = {
                'monthly': 'prod_TSmKnHeaQVxZXC',  // VaultCaddy ì›” ìš”ê¸ˆ
                'yearly': 'prod_TSsEWI5bv9pSkz'     // VaultCaddy ì—°ê°„ ìš”ê¸ˆ
            };
            
            // Credits æ˜ å°„ - ê¸°ë°˜ë•Œì‚¬ì´é€±æœŸ
            const creditsMap = {
                'monthly': { 
                    credits: 100, 
                    duration: '1å€‹ì›”',
                    price: 'HKD $58',
                    displayPrice: 'HKD $58/ì›”'
                },
                'yearly': { 
                    credits: 1200, 
                    duration: '12å€‹ì›”',
                    price: 'HKD $552',
                    displayPrice: 'HKD $46/ì›” (ì—°ê°„ $552)'
                }
            };
            
            const paymentLink = stripeLinks[planType];
            const creditsInfo = creditsMap[planType];
            
            if (!paymentLink || paymentLink.includes('REPLACE_WITH_YOUR')) {
                console.error('âš ï¸ Payment link ì•„ì§ì„¤ì •');
                alert('ä»˜è²»ê¸°ëŠ¥æ­£ì—ì„œì„¤ì •ì¤‘ï¼Œìš”ì²­ç¨í›„å†è©¦ë˜ëŠ”è¯ç¹«å®¢æœã€‚\n\níŒíŠ¸ï¼šê´€ë¦¬å“¡éœ€è¦ì—ì„œ Stripe ìƒì„±ìƒˆë¡œìš´çš„ Payment Linksã€‚');
                return;
            }
            
            logger.log('=== êµ¬ë…ìƒì„¸ì •ë³´ ===');
            logger.log('ì²­êµ¬é€±æœŸ:', planType === 'yearly' ? 'ì—°ê°„ ìš”ê¸ˆ' : 'ì›” ìš”ê¸ˆ');
            logger.log('Credits:', creditsInfo.credits);
            logger.log('ìˆìŒæ•ˆæœŸ:', creditsInfo.duration);
            logger.log('ê°€ê²©:', creditsInfo.displayPrice);
            logger.log('æ”¯ä»˜é€£çµ:', paymentLink);
            
            // í‘œì‹œí™•ì¸è¨Šæ¯
            const confirmMessage = `í™•ì¸êµ¬ë… VaultCaddy Pro (${planType === 'yearly' ? 'ì—°ê°„ ìš”ê¸ˆ' : 'ì›” ìš”ê¸ˆ'})ï¼Ÿ

ê·€í•˜í• ç²å¾—ï¼š
â€¢ ${creditsInfo.credits} Credits
â€¢ ìˆìŒæ•ˆæœŸï¼š${creditsInfo.duration}
â€¢ ì´ˆê³¼ ì‹œ í˜ì´ì§€ë‹¹ â‚©80
â€¢ ë¬´ì œí•œ ë°°ì¹˜ ì²˜ë¦¬
â€¢ Excel/CSV ë‚´ë³´ë‚´ê¸°
â€¢ QuickBooks í†µí•©
â€¢ 8 ç¨®ì–¸ì–´æ”¯æ´

ç¸½åƒ¹ï¼š${creditsInfo.displayPrice}

í´ë¦­í™•ì¸í›„í• ì•å¾€å®‰å…¨æ”¯ä»˜í˜ì´ì§€ã€‚`;
            
            if (confirm(confirmMessage)) {
                // í‘œì‹œì²˜ë¦¬è¨Šæ¯
                if (window.VaultCaddyNavbar) {
                    window.VaultCaddyNavbar.showNotification('æ­£ì—ì„œì¤‘ì„¤ì •í–¥í•´ê¹Œì§€å®‰å…¨æ”¯ä»˜í˜ì´ì§€...', 'info');
                }
                
                // ì„¤ì •êµ¬ë…å…ƒë°ì´í„°ê¹Œì§€æœ¬åœ°å­˜å„²
                localStorage.setItem('pendingSubscription', JSON.stringify({
                    planType: 'pro',  // í†µì¼ë¡œì„œ Pro ë°©ì•ˆ
                    period: planType,  // monthly ë˜ëŠ” yearly
                    credits: creditsInfo.credits,
                    duration: creditsInfo.duration,
                    price: creditsInfo.price,
                    timestamp: new Date().toISOString()
                }));
                
                // ì¤‘ì„¤ì •í–¥í•´ê¹Œì§€ Stripe Payment Link
                setTimeout(() => {
                    window.open(paymentLink, '_self');
                }, 1000);
            }
        }
        
        // ì²˜ë¦¬æ”¯ä»˜ì„±ê³µå›èª¿
        function handlePaymentSuccess() {
            // í™•ì¸ì—¬ë¶€ìˆìŒå¾…ì²˜ë¦¬çš„êµ¬ë…
            const pendingSubscription = localStorage.getItem('pendingSubscription');
            if (pendingSubscription) {
                try {
                    const subscription = JSON.parse(pendingSubscription);
                    logger.log('ê²€ì¸¡ê¹Œì§€å¾…ì²˜ë¦¬çš„êµ¬ë…:', subscription);
                    
                    // æˆäºˆ Credits
                    grantSubscriptionCredits(subscription);
                    
                    // í‘œì‹œì„±ê³µè¨Šæ¯
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `ì„±ê³µêµ¬ë… ${subscription.planType.toUpperCase()} ë°©ì•ˆï¼ì´ë¯¸ç²å¾— ${subscription.credits} Credits`, 
                            'success'
                        );
                    }
                    
                    // æ¸…ç†å¾…ì²˜ë¦¬çš„êµ¬ë…ë°ì´í„°
                    localStorage.removeItem('pendingSubscription');
                    
                    // ì—…ë°ì´íŠ¸ì‚¬ìš©ìêµ¬ë…ìƒíƒœ
                    localStorage.setItem('userPlan', subscription.planType);
                    localStorage.setItem('userPlanPeriod', subscription.period);
                    
                } catch (error) {
                    console.error('ì²˜ë¦¬êµ¬ë…å›èª¿ì‹¤íŒ¨:', error);
                }
            }
        }
        
        // æˆäºˆêµ¬ë… Credits
        function grantSubscriptionCredits(subscription) {
            const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const newCredits = currentCredits + subscription.credits;
            
            // ì„¤ì • Credits ê¹Œì§€æœŸë•Œì‚¬ì´
            const expiryDate = new Date();
            if (subscription.period === 'yearly') {
                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
            } else {
                expiryDate.setMonth(expiryDate.getMonth() + 1);
            }
            
            // ì—…ë°ì´íŠ¸æœ¬åœ°å­˜å„²
            localStorage.setItem('userCredits', newCredits.toString());
            localStorage.setItem('creditsExpiry', expiryDate.toISOString());
            localStorage.setItem('subscriptionCredits', subscription.credits.toString());
            
            logger.log(`ì´ë¯¸æˆäºˆ ${subscription.credits} Creditsï¼Œìƒˆë¡œìš´ì”ì•¡: ${newCredits}`);
            logger.log(`Credits ê¹Œì§€æœŸë•Œì‚¬ì´: ${expiryDate.toLocaleDateString()}`);
            
            // ì—…ë°ì´íŠ¸ UI í‘œì‹œ
            const creditsElements = document.querySelectorAll('.stat-value');
            if (creditsElements.length > 0) {
                const creditsElement = creditsElements[creditsElements.length - 1];
                creditsElement.textContent = newCredits;
            }
        }
        
        // í™•ì¸ Credits ì—¬ë¶€ë§Œë£Œ
        function checkCreditsExpiry() {
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            
            if (creditsExpiry && subscriptionCredits > 0) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                
                logger.log('Credits í™•ì¸ï¼š');
                logger.log('ê¹Œì§€æœŸë•Œì‚¬ì´:', expiryDate.toLocaleDateString());
                logger.log('ë•Œì•ë•Œì‚¬ì´:', now.toLocaleDateString());
                logger.log('êµ¬ë… Credits:', subscriptionCredits);
                
                if (now > expiryDate) {
                    // Credits ì´ë¯¸ë§Œë£Œï¼Œì œê±°êµ¬ë… Credits
                    logger.log('Credits ì´ë¯¸ë§Œë£Œï¼Œæ­£ì—ì„œì œê±°...');
                    
                    const currentCredits = parseInt(localStorage.getItem('userCredits') || '0');
                    const newCredits = Math.max(0, currentCredits - subscriptionCredits);
                    
                    // ì—…ë°ì´íŠ¸æœ¬åœ°å­˜å„²
                    localStorage.setItem('userCredits', newCredits.toString());
                    localStorage.removeItem('creditsExpiry');
                    localStorage.removeItem('subscriptionCredits');
                    localStorage.removeItem('userPlan');
                    localStorage.removeItem('userPlanPeriod');
                    
                    // ì—…ë°ì´íŠ¸ UI í‘œì‹œ
                    const creditsElements = document.querySelectorAll('.stat-value');
                    if (creditsElements.length > 0) {
                        const creditsElement = creditsElements[creditsElements.length - 1];
                        creditsElement.textContent = newCredits;
                    }
                    
                    // í‘œì‹œë§Œë£Œì•Œë¦¼
                    if (window.VaultCaddyNavbar) {
                        window.VaultCaddyNavbar.showNotification(
                            `ê·€í•˜ì˜êµ¬ë… Credits ì´ë¯¸ë§Œë£Œë°ì˜í•´ì œê±°ã€‚å‰©é¤˜ ${newCredits} Credits`, 
                            'warning'
                        );
                    }
                    
                    logger.log(`ì´ë¯¸ì œê±° ${subscriptionCredits} ë§Œë£Œ Creditsï¼Œìƒˆë¡œìš´ì”ì•¡: ${newCredits}`);
                } else {
                    // Credits ì•„ì§ë§Œë£Œï¼Œí‘œì‹œå‰©é¤˜ë•Œì‚¬ì´
                    const timeLeft = Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24));
                    logger.log(`êµ¬ë… Credits é‚„ìˆìŒ ${timeLeft} å¤©ê¹Œì§€æœŸ`);
                }
            }
        }
        
        // ê°€ì ¸ì˜¤ê¸° Credits ìƒíƒœì •ë³´
        function getCreditsStatus() {
            const userCredits = parseInt(localStorage.getItem('userCredits') || '0');
            const subscriptionCredits = parseInt(localStorage.getItem('subscriptionCredits') || '0');
            const creditsExpiry = localStorage.getItem('creditsExpiry');
            const userPlan = localStorage.getItem('userPlan');
            
            let status = {
                totalCredits: userCredits,
                subscriptionCredits: subscriptionCredits,
                purchasedCredits: userCredits - subscriptionCredits,
                plan: userPlan || 'none',
                hasSubscription: subscriptionCredits > 0 && creditsExpiry,
                daysLeft: 0
            };
            
            if (creditsExpiry) {
                const expiryDate = new Date(creditsExpiry);
                const now = new Date();
                status.daysLeft = Math.max(0, Math.ceil((expiryDate - now) / (1000 * 60 * 60 * 24)));
            }
            
            return status;
        }

        // ì „í™˜ì›” ìš”ê¸ˆ/ì—°ê°„ ìš”ê¸ˆ
        function togglePricingPlan(planType) {
            // ì—…ë°ì´íŠ¸ë²„íŠ¼ìƒíƒœ
            document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-plan="${planType}"]`).classList.add('active');
            
            // ì—…ë°ì´íŠ¸ë²„íŠ¼ìŠ¤íƒ€ì¼
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                if (btn.classList.contains('active')) {
                    btn.style.background = 'white';
                    btn.style.color = '#1f2937';
                } else {
                    btn.style.background = '#f9fafb';
                    btn.style.color = '#6b7280';
                }
            });
            
            if (planType === 'monthly') {
                // í‘œì‹œì›” ìš”ê¸ˆï¼Œìˆ¨ê¹€ì—°ê°„ ìš”ê¸ˆ
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'none';
                });
            } else {
                // í‘œì‹œì—°ê°„ ìš”ê¸ˆï¼Œìˆ¨ê¹€ì›” ìš”ê¸ˆ
                document.querySelectorAll('.monthly-price, .monthly-period, .monthly-subtitle, .monthly-feature, .monthly-savings').forEach(el => {
                    el.style.display = 'none';
                });
                document.querySelectorAll('.yearly-price, .yearly-period, .yearly-subtitle, .yearly-feature, .yearly-savings').forEach(el => {
                    el.style.display = 'inline';
                });
            }
        }
        
        // ==================== Email ê²€ì¦ í™•ì¸ ====================
        (async function initEmailVerification() {
            try {
                // ëŒ€ê¸° Firebase ë°ê²€ì¦ í™•ì¸ê¸°ì´ˆê¸°í™”
                await new Promise((resolve) => {
                    const checkReady = setInterval(() => {
                        if (window.emailVerificationChecker && firebase.auth) {
                            clearInterval(checkReady);
                            resolve();
                        }
                    }, 100);
                    
                    setTimeout(() => {
                        clearInterval(checkReady);
                        resolve();
                    }, 10000);
                });
                
                // í™•ì¸ê²€ì¦ìƒíƒœë°í‘œì‹œíŒíŠ¸ï¼ˆì•„ë‹ˆé˜»æ“‹ê¸°ëŠ¥ï¼‰
                await checkEmailVerification({ showNotice: true, blockPage: false });
            } catch (error) {
                console.error('âŒ Email ê²€ì¦ í™•ì¸ì‹¤íŒ¨:', error);
            }
        })();
    </script>

    <!-- ğŸ”¥ í–„ë²„ê±° ë©”ë‰´ë§¤ìš° ê°„ë‹¨í•œ ìˆ˜ì •ë°©ì•ˆ -->
    <script>
        logger.log('ğŸ”¥ ì‹œì‘ì´ˆê¸°í™”í–„ë²„ê±° ë©”ë‰´...');
        
        // ì—´ê¸°ì‚¬ì´ë“œë°”í•¨ìˆ˜
        function openSidebar() {
            logger.log('ğŸ”µ ì—´ê¸°ì‚¬ì´ë“œë°”');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '0';
                overlay.style.display = 'block';
                overlay.style.opacity = '1';
                document.body.style.overflow = 'hidden';
                logger.log('âœ… ì‚¬ì´ë“œë°”ì—´ë¦¼');
            }
        }
        
        // ë‹«ê¸°ì‚¬ì´ë“œë°”í•¨ìˆ˜
        function closeSidebar() {
            logger.log('ğŸ”µ ë‹«ê¸°ì‚¬ì´ë“œë°”');
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (sidebar && overlay) {
                sidebar.style.left = '-100%';
                overlay.style.opacity = '0';
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 300); // ëŒ€ê¸°ì• ë‹ˆë©”ì´ì…˜ì™„ë£Œï¼ˆì™€ CSS transition ì¼ì¹˜ï¼‰
                document.body.style.overflow = 'auto';
                logger.log('âœ… ì‚¬ì´ë“œë°”ì´ë¯¸ ë‹«í˜');
            }
        }
        
        // ë§¤ìš° ê°„ë‹¨í•œì´ˆê¸°í™”í•¨ìˆ˜
        function simpleInitMenu() {
            const btn = document.getElementById('mobile-menu-btn');
            const overlay = document.getElementById('mobile-sidebar-overlay');
            
            if (!btn || !overlay) {
                logger.log('â³ ìš”ì†Œë¯¸ì°¾ê¸°ê¹Œì§€ï¼Œ200msí›„ì¬ì‹œë„');
                setTimeout(simpleInitMenu, 200);
                return;
            }
            
            logger.log('âœ… ì°¾ê¸°ê¹Œì§€ëª¨ë“ ìš”ì†Œï¼');
            
            // ë²„íŠ¼í´ë¦­ì²˜ë¦¬
            btn.addEventListener('click', function() {
                logger.log('ğŸ”µ ë²„íŠ¼ì˜í•´í´ë¦­ï¼');
                openSidebar();
            });
            
            // í„°ì¹˜ì²˜ë¦¬
            btn.addEventListener('touchend', function(e) {
                e.preventDefault();
                logger.log('ğŸ”µ í„°ì¹˜ì´ë²¤íŠ¸ï¼');
                openSidebar();
            });
            
            // ë§ˆìŠ¤í¬í´ë¦­ë‹«ê¸°
            overlay.addEventListener('click', function() {
                logger.log('ğŸ”µ í´ë¦­ë§ˆìŠ¤í¬ë‹«ê¸°');
                closeSidebar();
            });
            
            // ë§ˆìŠ¤í¬í„°ì¹˜ë‹«ê¸°
            overlay.addEventListener('touchend', function(e) {
                e.preventDefault();
                logger.log('ğŸ”µ í„°ì¹˜ë§ˆìŠ¤í¬ë‹«ê¸°');
                closeSidebar();
            });
            
            logger.log('âœ… ëª¨ë“ ì´ë²¤íŠ¸ë¦¬ìŠ¤ë‹ê¸°ì´ë¯¸ë°”ì¸ë”©');
        }
        
        // ì¦‰ì‹œì‹œë„ì´ˆê¸°í™”
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', simpleInitMenu);
        } else {
            setTimeout(simpleInitMenu, 100);
        }
        
        // ë…¸ì¶œí•¨ìˆ˜ì œê³µì‚¬ì´ë“œë°”ë‚´ë¶€ë§í¬ì‚¬ìš©
        window.closeMobileSidebar = closeSidebar;
    </script>

    <!-- âœ… Stripe Checkout Session ìƒì„±í•¨ìˆ˜ -->
    <script>
        /**
         * ìƒì„± Stripe Checkout Session ë°ì´ë™
         * @param {string} planType - 'monthly' ë˜ëŠ” 'yearly'
         * @param {Event} event - í´ë¦­ì´ë²¤íŠ¸
         * @param {boolean} isTest - ì—¬ë¶€ë¡œì„œæ¸¬è©¦æ¨¡å¼ï¼ˆê°€ëŠ¥ì„ íƒï¼Œé»˜èª falseï¼‰
         */
        async function createCheckoutSession(planType, event, isTest = false) {
            logger.log(`ğŸ›’ ìƒì„± ${planType} êµ¬ë…...`, { isTest });
            
            // í™•ì¸ì‚¬ìš©ìì—¬ë¶€ç™»éŒ„
            if (!window.simpleAuth || !window.simpleAuth.isLoggedIn()) {
                alert('ìš”ì²­ë¨¼ì €ç™»éŒ„');
                window.location.href = 'auth.html';
                return;
            }
            
            // ê°€ì ¸ì˜¤ê¸°ë²„íŠ¼ìš”ì†Œï¼ˆì—ì„œ try ì™¸ë¶€ì •ì˜ï¼ŒíšŒí”¼ä½œç”¨åŸŸå•é¡Œï¼‰
            const button = event?.target || event?.currentTarget;
            const originalText = button?.textContent || 'ì‹œì‘í•˜ê¸°';
            
            try {
                // í‘œì‹œë¡œë“œìƒíƒœ
                if (button) {
                    button.disabled = true;
                    button.textContent = 'æ­£ì—ì„œì´ë™ê¹Œì§€æ”¯ä»˜í˜ì´ì§€...';
                    button.style.opacity = '0.6';
                }
                
                // ê°€ì ¸ì˜¤ê¸°ë•Œì•ì‚¬ìš©ì
                const currentUser = window.simpleAuth.getCurrentUser();
                const userEmail = currentUser.email;
                const userId = currentUser.uid;
                
                logger.log(`ğŸ‘¤ ì‚¬ìš©ìì •ë³´:`, { userEmail, userId });
                
                // í˜¸ì¶œ Firebase Function ìƒì„± Checkout Session
                const createSession = firebase.functions().httpsCallable('createStripeCheckoutSession');
                
                logger.log(`ğŸ“ í˜¸ì¶œ Firebase Function...`, { planType, userId, email: userEmail, isTest });
                const result = await createSession({
                    planType: planType,
                    userId: userId,
                    email: userEmail,
                    isTest: isTest  // ğŸ§ª å‚³éæ¸¬è©¦æ¨¡å¼æ¨™è¨˜
                });
                
                logger.log(`âœ… Checkout Session ìƒì„±ì„±ê³µ:`, result.data);
                
                // ì´ë™ê¹Œì§€ Stripe Checkout
                if (result.data && result.data.url) {
                    window.location.href = result.data.url;
                } else {
                    throw new Error('ë¯¸æ”¶ê¹Œì§€æ”¯ä»˜í˜ì´ì§€ URL');
                }
                
            } catch (error) {
                console.error('âŒ ìƒì„±æ”¯ä»˜æœƒè©±ì‹¤íŒ¨:', error);
                console.error('ì˜¤ë¥˜ì„¸ë¶€ì •ë³´:', error.code, error.message);
                
                // ë³µì›ë²„íŠ¼ìƒíƒœ
                if (button) {
                    button.disabled = false;
                    button.textContent = originalText;
                    button.style.opacity = '1';
                }
                
                // í‘œì‹œå‹å¥½çš„ì˜¤ë¥˜ì •ë³´
                let errorMsg = 'ìƒì„±æ”¯ä»˜æœƒè©±ì‹¤íŒ¨ï¼Œìš”ì²­ì¬ì‹œë„ë˜ëŠ”è¯ç¹«å®¢æœ';
                
                if (error.code === 'functions/unauthenticated') {
                    errorMsg = 'ìš”ì²­ë¨¼ì €ç™»éŒ„';
                    alert(errorMsg);
                    window.location.href = 'auth.html';
                } else if (error.code === 'functions/not-found') {
                    errorMsg = 'êµ¬ë…ê³„íšì„¤ì •ì˜¤ë¥˜ï¼Œìš”ì²­è¯ç¹«å®¢æœ';
                    alert(errorMsg);
                } else if (error.message) {
                    errorMsg = `ìƒì„±æ”¯ä»˜æœƒè©±ì‹¤íŒ¨: ${error.message}`;
                    alert(errorMsg);
                } else {
                    alert(errorMsg);
                }
            }
        }
        
        // ë…¸ì¶œê¹Œì§€ì „ì—­
        window.createCheckoutSession = createCheckoutSession;
    </script>

    <!-- ìƒì„±í”„ë¡œì íŠ¸ëª¨ë‹¬ -->
    <div id="createProjectModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 2rem; width: 90%; max-width: 500px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);">
            <h2 style="font-size: 1.5rem; font-weight: 600; color: #1f2937; margin: 0 0 1rem 0;">ìƒì„±ìƒˆë¡œìš´í”„ë¡œì íŠ¸</h2>
            <p style="color: #6b7280; font-size: 0.875rem; margin: 0 0 1.5rem 0;">ì…ë ¥í”„ë¡œì íŠ¸ì´ë¦„ä»¥ìƒì„±ìƒˆë¡œìš´çš„ë¬¸ì„œí”„ë¡œì íŠ¸</p>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">í”„ë¡œì íŠ¸ì´ë¦„</label>
                <input 
                    type="text" 
                    id="projectName" 
                    placeholder="ä¾‹å¦‚ï¼š2025ë…„1ì›”ì†¡ì¥"
                    style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem; color: #1f2937; box-sizing: border-box;"
                    onkeypress="if(event.key==='Enter') createProject()">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 0.75rem;">
                <button 
                    onclick="closeCreateProjectModal()" 
                    style="background: #ffffff; border: 1px solid #d1d5db; color: #374151; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;">
                    ì·¨ì†Œ
                </button>
                <button 
                    onclick="createProject()" 
                    style="background: #3b82f6; border: none; color: white; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.875rem; font-weight: 500;">
                    ìƒì„±
                </button>
            </div>
        </div>
    </div>

    <script>
        // ì—´ê¸°ìƒì„±í”„ë¡œì íŠ¸ëª¨ë‹¬
        function openCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            const input = document.getElementById('projectName');
            modal.style.display = 'flex';
            input.value = '';
            input.focus();
        }

        // ë‹«ê¸°ìƒì„±í”„ë¡œì íŠ¸ëª¨ë‹¬
        function closeCreateProjectModal() {
            const modal = document.getElementById('createProjectModal');
            modal.style.display = 'none';
        }

        // ìƒì„±ìƒˆë¡œìš´í”„ë¡œì íŠ¸
        async function createProject() {
            const input = document.getElementById('projectName');
            const projectName = input.value.trim();
            
            if (!projectName) {
                alert('Please enter a project name');
                return;
            }
            
            // ì €ì¥ê¹Œì§€ Firebase
            try {
                const projectData = await window.simpleDataManager.createProject(projectName);
                logger.log('âœ… í”„ë¡œì íŠ¸ì´ë¯¸ì €ì¥ê¹Œì§€ Firebase:', projectData);
                
                // ë‹«ê¸°ëª¨ë‹¬
                closeCreateProjectModal();
                
                // ğŸ”¥ ìˆ˜ì •ï¼šì‚¬ìš© projectData.id è€Œé projectData æœ¬èº«
                const projectId = projectData.id;
                logger.log('ğŸš€ ì´ë™ê¹Œì§€ìƒˆë¡œìš´í”„ë¡œì íŠ¸í˜ì´ì§€:', projectId);
                
                // ì´ë™ê¹Œì§€ìƒˆë¡œìš´í”„ë¡œì íŠ¸í˜ì´ì§€
                window.location.href = `firstproject.html?project=${projectId}`;
            } catch (error) {
                console.error('âŒ ì €ì¥ê¹Œì§€ Firebase ì‹¤íŒ¨:', error);
                alert('ìƒì„±í”„ë¡œì íŠ¸ì‹¤íŒ¨ï¼Œìš”ì²­ì¬ì‹œë„');
                return;
            }
        }

        // í´ë¦­ë§ˆìŠ¤í¬ë‹«ê¸°ëª¨ë‹¬
        document.getElementById('createProjectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCreateProjectModal();
            }
        });
    </script>


    <!-- Google Analytics äº‹ä»¶è·Ÿè¸ª -->
    <script src="/ga-event-tracking.js"></script>
</body>
</html>
